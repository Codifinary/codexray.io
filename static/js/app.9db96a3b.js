(function(){var t={2383:function(t,e,s){"use strict";var a={};s.r(a),s.d(a,{isAddr:function(){return I},isEmail:function(){return A},isFloat:function(){return q},isPrometheusSelector:function(){return P},isSlug:function(){return $},isUrl:function(){return S},notEmpty:function(){return Z}});var i={};s.r(i),s.d(i,{local:function(){return j},session:function(){return E}});var r={};s.r(r),s.d(r,{DAY:function(){return F},HOUR:function(){return z},MINUTE:function(){return M},SECOND:function(){return N},date:function(){return H},duration:function(){return D},durationPretty:function(){return R},float:function(){return B},percent:function(){return U},timeSinceNow:function(){return V}});var o=s(144),n=s(8345),l=s(9908);o.ZP.use(l.Z);var c=new l.Z({icons:{iconfont:"mdi"},theme:{themes:{light:{primary:"#013912",success:"#1DBF73"},dark:{}}}}),d=s(8354);const u=window.ResizeObserver||d["do"];o.ZP.directive("on-resize",{bind:function(t,e){t._resizeObserver=new u(e.value),t._resizeObserver.observe(t)},unbind:function(t){t._resizeObserver.disconnect(),delete t._resizeObserver}});var m=s(637),h=(s(2613),s(9093));o.ZP.directive("highlight",(function(t,e){const s=e.value;if(!s)return;let a=t.innerText;try{switch(s){case"sql":a=(0,h.WU)(a,{paramTypes:{numbered:["?",":","$"],named:[":","@","$"],quoted:[":","@","$"]}});break;case"json":a=JSON.stringify(JSON.parse(a),null,2);break}}catch{}try{a=m.Z.highlight(a,{language:s}).value}catch{}const i=t.style.whiteSpace;t.addEventListener("click",(()=>{t.style.whiteSpace="pre"===t.style.whiteSpace?i:"pre"})),t.innerHTML=a}));var p=s(3450),v=s.n(p),f=new o.ZP({data(){return{events:{refresh:0,projects:0,roles:0}}},methods:{watch(t,e,...s){s.forEach((s=>{void 0!==this.events[s]?t.$watch((()=>this.events[s]),(()=>{e()})):console.warn("unknown event:",s)}))},emit(t){void 0!==!this.events[t]?this.events[t]++:console.warn("unknown event:",t)}}}),_=s(3823);const g=JSON.stringify({});class y{constructor(t){(0,_.Z)(this,"router",null),this.router=t}stateToUri(t){const e=JSON.stringify(t),s=e===g?void 0:"#"+encodeURIComponent(e);this.router.replace({hash:s}).catch((t=>t))}stateFromUri(){const t=decodeURIComponent(this.router.currentRoute.hash.substring(1));if(!t)return{};try{return JSON.parse(t)}catch{return this.router.replace({hash:void 0}),{}}}appId(t){const e=t.split(":");return{ns:"_"!==e[0]?e[0]:"",kind:e[1],name:e[3]?e[2]+":"+e[3]:e[2]}}contextQuery(){const t=this.router.currentRoute;if(!t)return{};const{from:e,to:s,incident:a}=t.query||{};return{from:e,to:s,incident:a}}}const b=/^[-_0-9a-z]{3,}$/,x=/^https?:\/\/.{3,}$/,w=/^[-_0-9a-z.]+:[0-9]+$/,k=/^{.+=.+}$/,C=/[^@\r\n\t\f\v ]+@[^@\r\n\t\f\v ]+\.[a-z]+/;function Z(t){return!!t||"required"}function $(t){return b.test(t)||"3 or more letters/numbers, lower case"}function S(t){return!t||x.test(t)||"a valid URL is required, e.g. http://HOST:PORT"}function I(t){return!t||w.test(t)||"a valid address is required, e.g. HOST:PORT"}function q(t){return!isNaN(parseFloat(t))||"number is required"}function P(t){return!t||k.test(t)||'a valid Prometheus selector is required, e.g. {label_name="label_value", another_label=~"some_regexp"}'}function A(t){return C.test(t)||"invalid email"}const O="codexray";function T(t,e,s){const a=JSON.parse(t.getItem(O)||"{}");return s?(a[e]=s,t.setItem(O,JSON.stringify(a)),s):a[e]}function j(t,e){return T(localStorage,t,e)}function E(t,e){return T(sessionStorage,t,e)}var L=s(5420);const N=1e3,M=60*N,z=60*M,F=24*z;function D(t,e){let s=t;const a=Math.floor(s/F);s%=F;const i=Math.floor(s/z);s%=z;const r=Math.floor(s/M);s%=M;const o=Math.floor(s/N);s%=N;const n={d:a,h:i,m:r,s:o,ms:s};let l="",c=!1;for(const d in n){d===e&&(c=!0);const t=n[d];if(t&&(l+=t+d,c))break}return l.trimEnd()}function R(t){return D(t,t>5*F?"d":t>F?"h":t>z?"m":t>M?"s":"ms")}function H(t,e){return L.Z.fmtDate(e)(new Date(t))}function V(t){return R(Date.now()-t)}function U(t){return t>10?t.toFixed(0):t>1?t.toFixed(1):t.toFixed(2)}function B(t){return 0===t?"0":t>=1?t.toFixed(0):t>=.1?t.toFixed(1):t>=.01?t.toFixed(2):t.toFixed(3)}var W=s(6154),Q=s(7632);const J="Something went wrong, please try again later.",G="Request timed out.";class Y{constructor(t,e,s){(0,_.Z)(this,"axios",null),(0,_.Z)(this,"router",null),(0,_.Z)(this,"vuetify",null),(0,_.Z)(this,"deviceId",""),(0,_.Z)(this,"basePath",""),(0,_.Z)(this,"context",{status:{},search:{}}),this.router=t,this.vuetify=e.framework,this.deviceId=j("device-id"),this.deviceId||(this.deviceId=(0,Q.Z)(),j("device-id",this.deviceId)),this.basePath=s,this.axios=W.Z.create({baseURL:this.basePath+"api/",timeout:6e4,timeoutErrorMessage:G})}stats(t,e){const s={...e,type:t,device_id:this.deviceId,device_size:this.vuetify.breakpoint.name,theme:j("theme")||""};navigator.sendBeacon(this.basePath+"stats",JSON.stringify(s))}request(t,e){this.axios(t).then((t=>{t.data.context&&(this.context.status=t.data.context.status,this.context.search=t.data.context.search);try{e(t.data.data||t.data,"")}catch(s){console.error(s)}})).catch((t=>{const s=t.response&&t.response.data&&t.response.data.trim();if(t.response&&302===t.response.status&&(window.location=s),t.response&&401===t.response.status){const t=this.router.currentRoute,e=s||void 0;if(!t.meta.anonymous||t.query.action!==e){const s="/"!==t.fullPath&&"login"!==t.name?t.fullPath:void 0;this.router.push({name:"login",query:{action:e,next:s}}).catch((t=>t))}}e(null,s||t.message||J)}))}get(t,e,s){const{from:a,to:i,incident:r,rcaFrom:o,rcaTo:n}=this.router.currentRoute.query,l={...e,from:a,to:i,incident:r,rcaFrom:o,rcaTo:n};this.request({method:"get",url:t,params:l},s)}put(t,e,s){this.request({method:"put",url:t,data:e},s)}post(t,e,s){this.request({method:"post",url:t,data:e},s)}del(t,e){this.request({method:"delete",url:t},e)}user(t,e){t?this.post("user",t,e):this.get("user",{},e)}login(t,e){this.post("login",t,e)}logout(t){this.post("logout",null,t)}users(t,e){t?this.post("users",t,e):this.get("users",{},e)}roles(t,e){t?this.post("roles",t,e):this.get("roles",{},e)}sso(t,e){t?this.post("sso",t,e):this.get("sso",{},e)}getProject(t,e){this.get(`project/${t||""}`,{},e)}saveProject(t,e,s){this.post(`project/${t||""}`,e,s)}delProject(t,e){this.del(`project/${t}`,e)}projectPath(t){const e=this.router.currentRoute.params.projectId;return`project/${e}/${t}`}getStatus(t){this.get(this.projectPath("status"),{},t)}apiKeys(t,e){const s=this.projectPath("api_keys");t?this.post(s,t,e):this.get(s,{},e)}getOverview(t,e,s){this.get(this.projectPath(`overview/${t}`),{query:e},s)}getInspections(t){this.get(this.projectPath("inspections"),{},t)}getApplicationCategories(t){this.get(this.projectPath("categories"),{},t)}saveApplicationCategory(t,e){this.post(this.projectPath("categories"),t,e)}getCustomApplications(t){this.get(this.projectPath("custom_applications"),{},t)}saveCustomApplication(t,e){this.post(this.projectPath("custom_applications"),t,e)}getIntegrations(t,e){this.get(this.projectPath("integrations"+(t?"/"+t:"")),{},e)}saveIntegrations(t,e,s,a){const i=this.projectPath("integrations"+(t?"/"+t:""));switch(e){case"save":return void this.put(i,s,a);case"del":return void this.del(i,a);case"test":return void this.post(i,s,a)}}getApplication(t,e){this.get(this.projectPath(`app/${t}`),{},e)}getIncident(t,e){this.get(this.projectPath(`incident/${t}`),{},e)}getRCA(t,e){this.get(this.projectPath(`app/${t}/rca`),{},e)}getInspectionConfig(t,e,s){this.get(this.projectPath(`app/${t}/inspection/${e}/config`),{},s)}saveInspectionConfig(t,e,s,a){this.post(this.projectPath(`app/${t}/inspection/${e}/config`),s,a)}getInstrumentation(t,e,s){this.get(this.projectPath(`app/${t}/instrumentation/${e}`),{},s)}saveInstrumentationSettings(t,e,s,a){this.post(this.projectPath(`app/${t}/instrumentation/${e}`),s,a)}getProfiling(t,e,s){this.get(this.projectPath(`app/${t}/profiling`),{query:e},s)}saveProfilingSettings(t,e,s){this.post(this.projectPath(`app/${t}/profiling`),e,s)}getTracing(t,e,s){this.get(this.projectPath(`app/${t}/tracing`),{trace:e},s)}saveTracingSettings(t,e,s){this.post(this.projectPath(`app/${t}/tracing`),e,s)}getLogs(t,e,s){this.get(this.projectPath(`app/${t}/logs`),{query:e},s)}saveLogsSettings(t,e,s){this.post(this.projectPath(`app/${t}/logs`),e,s)}getNode(t,e){this.get(this.projectPath(`node/${t}`),{},e)}getPrometheusCompleteConfiguration(){return{remote:{apiPrefix:this.basePath+"api/"+this.projectPath("prom")+"/api/v1"}}}}var K=s(5286),X=s(3087),tt=s(6583),et=s(3438),st=s(7111),at=s(6896),it=s(999),rt=s(7109),ot=s(5298),nt=s(7711),lt=s(7586),ct=s(1041),dt=s(5090),ut=function(){var t=this,e=t._self._c;return e(X.Z,[t.$codexray.check_for_updates?e("CheckForUpdates",{attrs:{currentVersion:t.$codexray.version,instanceUuid:t.$codexray.uuid}}):t._e(),e(tt.Z,{staticClass:"menu",attrs:{app:"",flat:"",dark:"",color:"primary"}},[e(st.Z,{staticClass:"py-0 fill-height flex-nowrap mx-0 px-0"},[e("router-link",{attrs:{to:t.project?{name:"overview",query:t.$utils.contextQuery()}:{name:"index"}}},[e("img",{staticClass:"logo",attrs:{src:`${t.$codexray.base_path}static/Logo${"Enterprise"===t.$codexray.edition?"-ee":""}.svg`,height:"45",alt:":~#"}})]),e("div",{staticClass:"search-container"},[t.$vuetify.breakpoint.mdAndUp&&t.project&&"project_settings"!==t.$route.name?e("div",[e("Search")],1):t._e(),t.user?e("div",[e(lt.Z,{attrs:{dark:"","offset-y":"",tile:"",attach:".v-app-bar"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(et.Z,t._g({staticClass:"ml-3 px-2 project-name-btn",attrs:{plain:"",outlined:"",height:"40"}},s),[t.$vuetify.breakpoint.smAndUp?[e("span",{staticClass:"project-name"},[t.project?[t._v(t._s(t.project.name))]:t.$route.params.projectId?[t._v("choose a project")]:[t._v("new project")]],2),e(it.Z,{staticClass:"ml-auto mr-1",attrs:{small:""}},[t._v(" mdi-chevron-"+t._s("true"===a["aria-expanded"]?"up":"down")+" ")])]:t._e()],2)]}}],null,!1,2405626059)},[e(rt.Z,{attrs:{dense:""}},[t._l(t.projects,(function(s){return e(ot.Z,{key:s.name,staticClass:"px-4",attrs:{to:{name:"overview",params:{projectId:s.id}}}},[t._v(" "+t._s(s.name)+" ")])})),e(ot.Z,{attrs:{to:{name:"project_new"},exact:""}},[e(it.Z,{staticClass:"pl-2 pr-1",attrs:{small:"",color:"primary"}},[t._v("mdi-plus")]),t._v(" new project ")],1)],2)],1)],1):t._e()]),e(ct.Z),t.$vuetify.breakpoint.smAndUp?e("div",[e(lt.Z,{attrs:{dark:"","offset-y":"",tile:"",attach:".v-app-bar"},scopedSlots:t._u([{key:"activator",fn:function({on:s}){return[e("div",t._g({staticClass:"header-icon pb-2"},s),[e(it.Z,[t._v("mdi-help-circle-outline")])],1)]}}],null,!1,3270558729)},[e(rt.Z,{staticClass:"help-dropdown",attrs:{dense:""}},[e(ot.Z,{attrs:{href:"https://codexray.com/docs/",target:"_blank"}},[e(it.Z,{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-book-open-outline")]),t._v("Documentation")],1),e(ot.Z,{attrs:{href:"https://github.com/codexray/codexray",target:"_blank"}},[e(it.Z,{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-github")]),t._v("GitHub ")],1),e(ot.Z,{attrs:{href:"https://join.slack.com/t/codexray-community/shared_invite/zt-1gsnfo0wj-I~Zvtx5CAAb8vr~r~vecyw",target:"_blank"}},[e(it.Z,{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-slack")]),t._v("Slack chat ")],1),e(at.Z),e(ot.Z,{staticClass:"px-4"},[t._v(" codexray Edition: "+t._s(t.$codexray.edition)+" ")]),e(ot.Z,{staticClass:"px-4",attrs:{href:"https://github.com/codexray/codexray/releases",target:"_blank"}},[t._v(" Version: "+t._s(t.$codexray.version)+" ")])],1)],1)],1):t._e(),t.project&&"project_settings"!==t.$route.name?e("div",{staticClass:"pb-1"},[e("TimePicker",{attrs:{small:t.$vuetify.breakpoint.xsOnly}})],1):t._e(),e(lt.Z,{attrs:{dark:"","offset-y":"",left:"",tile:"",eager:"",attach:".v-app-bar"},scopedSlots:t._u([{key:"activator",fn:function({on:s}){return[e("div",t._g({staticClass:"header-icon px-4"},s),[e("BaseIcon",{staticClass:"userIcon",attrs:{name:"user-profile"}})],1)]}}])},[e(rt.Z,{attrs:{dense:""}},[t.user?e(ot.Z,{staticClass:"px-4"},[e("div",[e("div",[t._v(t._s(t.user.name))]),t.user.email?e("div",{staticClass:"caption grey--text"},[t._v("login: "+t._s(t.user.email))]):t._e(),t.user.role?e("div",{staticClass:"caption grey--text"},[t._v("role: "+t._s(t.user.role))]):t._e()])]):t._e(),t.user?e(at.Z,{staticClass:"my-2 px-4"}):t._e(),e(dt.Z,{staticClass:"px-4"},[t._v("Theme")]),e("ThemeSelector"),t.user&&!t.user.anonymous?[e(at.Z,{staticClass:"my-2"}),e(ot.Z,{staticClass:"px-4",on:{click:function(e){t.changePassword=!0}}},[t._v("Change password")])]:t._e()],2)],1)],1)],1),e(nt.Z,[e(st.Z,{staticClass:"mx-0 px-0 py-0"},[e("div",{staticClass:"main-content-wrapper"},[t.status&&"warning"===t.status.status&&"project_settings"!==t.$route.name?e(K.Z,{staticClass:"mt-4",attrs:{color:"red",elevation:"2",border:"left","colored-border":""}},[e("div",{staticClass:"d-sm-flex align-center"},[t.status.error?[t._v(" "+t._s(t.status.error)+" ")]:"ok"!==t.status.prometheus.status?[e("div",{staticClass:"flex-grow-1 mb-3 mb-sm-0"},[t._v(t._s(t.status.prometheus.message))]),"configure"===t.status.prometheus.action?e(et.Z,{attrs:{outlined:"",to:{name:"project_settings",params:{tab:"prometheus"}}}},[t.status.prometheus.error?[t._v(" Review the configuration ")]:[t._v(" Configure ")]],2):t._e(),"wait"===t.status.prometheus.action?e(et.Z,{attrs:{outlined:""},on:{click:t.refresh}},[t._v("refresh")]):t._e()]:"ok"!==t.status.node_agent.status?[e("div",{staticClass:"flex-grow-1 mb-3 mb-sm-0"},[t._v(" No metrics found. If you just installed codexray and node-agent, please wait a couple minutes for it to collect data. "),e("br"),t._v(" If you haven't installed node-agent, please do so now. ")]),e("AgentInstallation",{attrs:{outlined:""}},[t._v("Install node-agent")])]:t.status.kube_state_metrics&&"ok"!==t.status.kube_state_metrics.status?[e("div",{staticClass:"flex-grow-1 mb-3 mb-sm-0"},[t._v(" It looks like you use Kubernetes, so codexray requires "),e("b",[t._v("kube-state-metrics")]),t._v(" to combine individual containers into applications. ")]),e(et.Z,{attrs:{outlined:"",to:{name:"project_settings"}}},[t._v("Install kube-state-metrics")])]:t._e()],2)]):t._e(),e("div",{staticClass:"app-content"},[t.user&&!t.user.anonymous&&"login"!==t.$route.name?e("div",{staticClass:"sidebar-comp"},[e("Sidebar",{attrs:{user:t.user,project:t.project,views:t.views,icons:t.icons},on:{"toggle-sidebar":t.toggleSidebar}})],1):t._e(),e("div",{staticClass:"content",class:{"full-width":"login"===t.$route.name||t.isSidebarCollapsed}},[e("div",{staticClass:"scrollable"},[e("router-view")],1)])])],1),t.user?e("ChangePassword",{model:{value:t.changePassword,callback:function(e){t.changePassword=e},expression:"changePassword"}}):t._e()],1)],1)],1)},mt=[],ht=function(){var t=this,e=t._self._c;return e(lt.Z,{attrs:{"close-on-content-click":"","offset-y":"",attach:".v-app-bar"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e("div",t._g({staticClass:"time-selector-btn",attrs:{height:"40"}},s),[t.small?t._e():e("span",{staticClass:"ml-2"},[t._v(t._s(t.intervals.find((t=>t.active)).text))]),t.small?t._e():e(it.Z,{staticClass:"ml-2",attrs:{small:""}},[t._v(" mdi-chevron-"+t._s("true"===a["aria-expanded"]?"up":"down")+" ")])],1)]}}])},[e(rt.Z,t._l(t.intervals,(function(s){return e(ot.Z,{key:s.text,attrs:{to:{query:s.query},exact:""}},[t._v(" "+t._s(s.text)+" ")])})),1)],1)},pt=[],vt={props:{small:Boolean},computed:{intervals(){const t=[{text:"last hour",query:{}},{text:"last 3 hours",query:{from:"now-3h"}},{text:"last 12 hours",query:{from:"now-12h"}},{text:"last day",query:{from:"now-1d"}},{text:"last 3 days",query:{from:"now-3d"}},{text:"last week",query:{from:"now-7d"}}],e=this.$route.query.incident;if(e)return t.unshift({text:"incident: "+e,query:{incident:e},active:!0}),t;const s=this.$route.query.from,a="now"===this.$route.query.to?void 0:this.$route.query.to,i=t.find((t=>t.query.from===s&&t.query.to===a));if(i)return i.active=!0,t;const r=parseInt(s),o=parseInt(a),n=t=>this.$format.date(t,"{MMM} {DD}, {HH}:{mm}"),l=isNaN(r)?s:n(r),c=isNaN(o)?a:n(o);return t.unshift({text:(l||"")+" to "+(c||"now"),query:{from:s,to:a},active:!0}),t}}},ft=vt,_t=s(1001),gt=(0,_t.Z)(ft,ht,pt,!1,null,"508857d8",null),yt=gt.exports,bt=s(2774),xt=s(2296),wt=s(6434),kt=function(){var t=this,e=t._self._c;return e(lt.Z,{attrs:{value:!!t.query,"offset-y":"","max-height":"50vh",attach:".v-app-bar"},scopedSlots:t._u([{key:"activator",fn:function({}){return[e(wt.Z,{attrs:{dense:"",outlined:"",flat:"","hide-details":"",placeholder:"search for apps and nodes"},on:{blur:t.close,keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.close.apply(null,arguments)}},scopedSlots:t._u([{key:"append",fn:function(){return[e(it.Z,[t._v("mdi-magnify")])]},proxy:!0}],null,!0),model:{value:t.query,callback:function(e){t.query=e},expression:"query"}})]}}])},[e(rt.Z,{attrs:{dark:""}},[t.error?[e(ot.Z,[e(bt.V9,{staticClass:"ml-3"},[t._v(" "+t._s(t.error)+" ")])],1)]:t._e(),t.results.empty?[e(ot.Z,[e(bt.V9,{staticClass:"ml-3"},[t._v(" no entries found ")])],1)]:t._e(),t.results.apps&&t.results.apps.length?[e(ot.Z,[e(xt.Z,{staticClass:"mr-1"},[e(it.Z,{attrs:{small:""}},[t._v("mdi-apps")])],1),e(bt.km,[e(bt.V9,[t._v("Applications")])],1)],1),t._l(t.results.apps,(function(s){return e(ot.Z,{key:s.id,attrs:{to:{name:"application",params:{id:s.id},query:t.$utils.contextQuery()}}},[e(bt.V9,{staticClass:"ml-3"},[e("Led",{attrs:{status:s.status}}),e("span",[t._v(t._s(s.name))]),s.ns?e("span",{staticClass:"caption"},[t._v(" (ns: "+t._s(s.ns)+")")]):t._e()],1)],1)}))]:t._e(),t.results.nodes&&t.results.nodes.length?[e(ot.Z,[e(xt.Z,{staticClass:"mr-1"},[e(it.Z,{attrs:{small:""}},[t._v("mdi-server")])],1),e(bt.km,[e(bt.V9,[t._v("Nodes")])],1)],1),t._l(t.results.nodes,(function(s){return e(ot.Z,{key:s.name,attrs:{to:{name:"node",params:{name:s.name},query:t.$utils.contextQuery()}}},[e(bt.V9,{staticClass:"ml-3"},[e("Led",{attrs:{status:s.status}}),e("span",[t._v(t._s(s.name))])],1)],1)}))]:t._e()],2)],1)},Ct=[],Zt=function(){var t=this,e=t._self._c;return e("span",{staticClass:"wrapper",class:{absolute:t.absolute}},[e("span",{staticClass:"led",class:`status-${t.status}`})])},$t=[],St={props:{status:String,absolute:Boolean}},It=St,qt=(0,_t.Z)(It,Zt,$t,!1,null,"6513e47a",null),Pt=qt.exports,At={components:{Led:Pt},data(){return{context:this.$api.context,query:"",loading:!1,error:""}},computed:{results(){const t=this.context.search;if(!this.query||!t)return{};const e=this.query.toLowerCase(),s=t=>t.toLowerCase().includes(e),a=(t.applications||[]).filter((t=>s(t.id))).map((t=>{const e=this.$utils.appId(t.id);return{id:t.id,name:e.name,ns:e.ns,status:t.status}}));a.sort(((t,e)=>t.name.localeCompare(e.name)));const i=(t.nodes||[]).filter((t=>s(t.name)));i.sort(((t,e)=>t.name.localeCompare(e.name)));const r=!a.length&&!i.length;return{apps:a,nodes:i,empty:r}}},methods:{close(){setTimeout((()=>{this.query=""}),200)}}},Ot=At,Tt=(0,_t.Z)(Ot,kt,Ct,!1,null,"cdf3f0f0",null),jt=Tt.exports,Et=s(7892),Lt=function(){var t=this,e=t._self._c;return t.show?e(Et.Z,{attrs:{app:"",color:"green",dark:"",height:"30"}},[e(ct.Z),e("div",{staticStyle:{color:"white"}},[t._v("codexray "+t._s(t.latestVersion)+" is available 🎉")]),e("a",{staticClass:"ml-2 mr-1 link",attrs:{href:"https://github.com/codexray/codexray/releases",target:"_blank"}},[t._v("Changelog")]),t._v(" ("),e("a",{staticClass:"link",attrs:{href:"https://codexray.com/docs/",target:"_blank"}},[t._v(" how to upgrade")]),t._v(") "),e(ct.Z),e(et.Z,{attrs:{"x-small":"",icon:""},on:{click:t.dismiss}},[e(it.Z,{staticClass:"mr-0"},[t._v("mdi-close")])],1)],1):t._e()},Nt=[];const Mt="update-alert-dismissed";var zt={props:{currentVersion:String,instanceUuid:String},data(){return{latestVersion:"",ignoredVersion:"",ticker:0}},mounted(){this.ignoredVersion=this.$storage.local(Mt),this.get(),this.ticker=setInterval(this.get,36e5)},beforeDestroy(){this.ticker&&clearInterval(this.ticker)},computed:{show(){return this.latestVersion&&this.latestVersion!==this.ignoredVersion}},methods:{get(){const t="https://codexray.com/ce/version";W.Z.get(t,{headers:{"x-instance-version":this.currentVersion,"x-instance-uuid":this.instanceUuid}}).then((t=>{this.latestVersion=t.data.trim()}))},dismiss(){this.ignoredVersion=this.latestVersion,this.$storage.local(Mt,this.latestVersion)}}},Ft=zt,Dt=(0,_t.Z)(Ft,Lt,Nt,!1,null,"da18254e",null),Rt=Dt.exports,Ht=s(5252),Vt=function(){var t=this,e=t._self._c;return e(Ht.Z,{model:{value:t.theme,callback:function(e){t.theme=e},expression:"theme"}},t._l(t.themes,(function(s,a){return e(ot.Z,{staticClass:"px-4",attrs:{value:a},on:{click:function(e){return t.setTheme(a)}}},[e(it.Z,{staticClass:"mr-1",attrs:{small:""}},[t._v(t._s(s))]),t._v(" "+t._s(a)+" ")],1)})),1)},Ut=[],Bt={data(){return{theme:this.$storage.local("theme")||"auto"}},computed:{themes(){return{light:"mdi-weather-sunny",dark:"mdi-weather-night",auto:"mdi-theme-light-dark"}}},created(){this.setTheme()},methods:{setTheme(t){const e=window.matchMedia("(prefers-color-scheme: dark)");t?(this.theme=t,this.$storage.local("theme",this.theme)):e.addEventListener("change",(t=>{const e=this.$storage.local("theme")||"auto";"auto"===e&&(this.$vuetify.theme.dark=t.matches)})),this.theme=this.$storage.local("theme")||"auto","auto"===this.theme?this.$vuetify.theme.dark=e.matches:this.$vuetify.theme.dark="dark"===this.theme}}},Wt=Bt,Qt=(0,_t.Z)(Wt,Vt,Ut,!1,null,"c1856306",null),Jt=Qt.exports,Gt=s(8020),Yt=s(2583),Kt=s(6205),Xt=s(3667),te=s(7088),ee=s(4331),se=s(205),ae=function(){var t=this,e=t._self._c;return e(Yt.Z,{scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(et.Z,t._g(t._b({attrs:{color:t.color,outlined:t.outlined,small:t.small}},"v-btn",a,!1),s),[t._t("default")],2)]}}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(Gt.Z,{staticClass:"pa-5"},[e("div",{staticClass:"d-flex align-center text-h5 mb-4"},[t._v(" Node agent installation "),e(ct.Z),e(et.Z,{attrs:{icon:""},on:{click:function(e){t.dialog=!1}}},[e(it.Z,[t._v("mdi-close")])],1)],1),e("p",[e("a",{attrs:{href:"https://github.com/codexray/codexray-node-agent",target:"_blank"}},[t._v("codexray-node-agent")]),t._v(" gathers metrics, traces, logs, and profiles, and sends them to codexray. To ingest telemetry data, the agent must have the address of the codexray instance and the capability to establish TCP connections with it. ")]),e("div",{staticClass:"subtitle-1"},[t._v("codexray URL:")]),e(Kt.Z,{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e(wt.Z,{attrs:{rules:[t.$validators.notEmpty,t.$validators.isUrl],placeholder:"http://codexray:8080",outlined:"",dense:""},model:{value:t.codexray_url,callback:function(e){t.codexray_url=e},expression:"codexray_url"}})],1),e(ee.Z,{staticClass:"mb-4",attrs:{height:"40","slider-size":"2"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(Xt.Z,[e(it.Z,{staticClass:"mr-1"},[t._v("mdi-memory")]),t._v("Linux node (Systemd)")],1),e(Xt.Z,[e(it.Z,{staticClass:"mr-1"},[t._v("mdi-docker")]),t._v("Docker")],1),e(Xt.Z,[e(it.Z,{staticClass:"mr-1"},[t._v("mdi-kubernetes")]),t._v("Kubernetes")],1)],1),e(se.Z,{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(te.Z,{attrs:{transition:"none"}},[e("p",[t._v(" This script downloads the latest version of the agent and installs it as a Systemd service. Additionally, it generates an uninstall script. ")]),e("Code",{attrs:{disabled:!t.valid}},[e("pre",[t._v("curl -sfL https://raw.githubusercontent.com/codexray/codexray-node-agent/main/install.sh | \\\n  COLLECTOR_ENDPOINT="+t._s(t.codexray_url||"<codexray_URL_HERE>")+" \\\n  API_KEY="+t._s(t.api_key)+" \\\n  SCRAPE_INTERVAL="+t._s(t.scrape_interval)+" \\\n  sh -\n                        ")])]),e("p",[t._v("You can read the agent log using the "),e("var",[t._v("journalctl")]),t._v(" command:")]),e("Code",[e("pre",[t._v("sudo journalctl -u codexray-node-agent\n                        ")])]),e("p",[t._v("To uninstall the agent run the command below:")]),e("Code",[e("pre",[t._v("/usr/bin/codexray-node-agent-uninstall.sh\n                        ")])])],1),e(te.Z,{attrs:{transition:"none"}},[e("Code",{attrs:{disabled:!t.valid}},[e("pre",[t._v("docker run --detach --name codexray-node-agent \\\n  --pull=always \\\n  --privileged --pid host \\\n  -v /sys/kernel/debug:/sys/kernel/debug:rw \\\n  -v /sys/fs/cgroup:/host/sys/fs/cgroup:ro \\\n  ghcr.io/codexray/codexray-node-agent:latest \\\n  --cgroupfs-root=/host/sys/fs/cgroup \\\n  --collector-endpoint="+t._s(t.codexray_url||"<codexray_URL_HERE>")+" \\\n  --api-key="+t._s(t.api_key)+" \\\n  --scrape-interval="+t._s(t.scrape_interval)+"\n                        ")])]),e("p",[t._v("To read the agent log:")]),e("Code",[e("pre",[t._v("docker logs codexray-node-agent\n                        ")])]),e("p",[t._v("To uninstall the agent run the command below:")]),e("Code",[e("pre",[t._v("docker rm -f codexray-node-agent\n                        ")])])],1),e(te.Z,{attrs:{transition:"none"}},[e("p",[t._v("Add the codexray helm chart repo:")]),e("Code",[e("pre",[t._v("helm repo add codexray https://codexray.github.io/helm-charts\nhelm repo update codexray\n                        ")])]),e("p",[t._v("Next, install the codexray Operator:")]),e("Code",[e("pre",[t._v("helm install -n codexray --create-namespace codexray-operator codexray/codexray-operator\n                        ")])]),e("p",[t._v("Install codexray's agents (node-agent and cluster-agent):")]),e("Code",{attrs:{disabled:!t.valid}},[e("pre",[t._v("helm install -n codexray codexray codexray/"+t._s(t.helm_chart)+' --set "apiKey='+t._s(t.api_key)+",agentsOnly.codexrayURL="+t._s(t.codexray_url||"<codexray_URL_HERE>")+'"\n                        ')])])],1)],1)],1)],1)},ie=[],re=function(){var t=this,e=t._self._c;return e("div",{ref:"code",staticClass:"code"},[e(et.Z,{staticClass:"copy",attrs:{icon:"",small:"",dark:"",disabled:t.disabled},on:{click:t.copy}},[e(it.Z,{attrs:{small:""}},[t._v(t._s(t.icon))])],1),e("div",{ref:"body"},[t._t("default")],2)],1)},oe=[],ne={props:{disabled:Boolean},data(){return{copied:!1}},computed:{icon(){return this.copied?"mdi-check":"mdi-content-copy"}},methods:{copy(){const t=document.createElement("textarea");this.$refs.code.appendChild(t),t.value=this.$refs.body.innerText.trim(),t.focus(),t.select();try{document.execCommand("copy"),this.copied=!0,setTimeout((()=>{this.copied=!1}),3e3)}finally{this.$refs.code.removeChild(t)}}}},le=ne,ce=(0,_t.Z)(le,re,oe,!1,null,"2fddc6a1",null),de=ce.exports,ue={props:{color:String,outlined:Boolean,small:Boolean},components:{Code:de},data(){const t=["127.0.0.1","localhost"].some((t=>location.origin.includes(t)));return{error:"",dialog:!1,tab:null,codexray_url:t?"":location.origin,helm_chart:"Enterprise"===window.codexray.edition?"codexray-ee":"codexray-ce",api_key:"",scrape_interval:"15s",valid:!1}},watch:{dialog(){this.dialog&&this.get()}},methods:{get(){this.$api.getProject(this.$route.params.projectId,((t,e)=>{e?this.error=e:(this.api_keys=t.api_keys||[],t.refresh_interval&&(this.scrape_interval=t.refresh_interval/1e3+"s"))}))}}},me=ue,he=(0,_t.Z)(me,ae,ie,!1,null,"599df858",null),pe=he.exports,ve=function(){var t=this,e=t._self._c;return e(Yt.Z,{attrs:{"max-width":"600"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(Gt.Z,{staticClass:"pa-4"},[e("div",{staticClass:"d-flex align-center font-weight-medium mb-4"},[t._v(" Change password "),e(ct.Z),e(et.Z,{attrs:{icon:""},on:{click:function(e){t.dialog=!1}}},[e(it.Z,[t._v("mdi-close")])],1)],1),e(Kt.Z,{ref:"form",on:{submit:function(e){return e.preventDefault(),t.post.apply(null,arguments)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e("div",{staticClass:"font-weight-medium"},[t._v("Old password")]),e(wt.Z,{attrs:{outlined:"",dense:"",type:"password",rules:[t.$validators.notEmpty]},model:{value:t.form.old_password,callback:function(e){t.$set(t.form,"old_password",e)},expression:"form.old_password"}}),e("div",{staticClass:"font-weight-medium"},[t._v("New password")]),e(wt.Z,{attrs:{outlined:"",dense:"",type:"password",rules:[t.$validators.notEmpty]},model:{value:t.form.new_password,callback:function(e){t.$set(t.form,"new_password",e)},expression:"form.new_password"}}),e("div",{staticClass:"font-weight-medium"},[t._v("Confirm password")]),e(wt.Z,{attrs:{outlined:"",dense:"",type:"password",rules:[t.$validators.notEmpty,e=>e===t.form.new_password||"passwords do not match"]},model:{value:t.confirm_password,callback:function(e){t.confirm_password=e},expression:"confirm_password"}}),t.error?e(K.Z,{attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(" "+t._s(t.error)+" ")]):t.message?e(K.Z,{attrs:{color:"green",outlined:"",text:""}},[t._v(" "+t._s(t.message)+" ")]):t._e(),e("div",{staticClass:"d-flex align-center"},[e(ct.Z),e(et.Z,{staticClass:"mt-5",attrs:{type:"submit",disabled:!t.valid,loading:t.loading,color:"primary"}},[t._v("Change")])],1)],1)],1)],1)},fe=[],_e={props:{value:Boolean},data(){return{dialog:this.value,form:{old_password:"",new_password:""},confirm_password:"",valid:!1,error:"",message:"",loading:!1}},watch:{value(t){this.dialog=t},dialog(t){this.$emit("input",t),t&&(this.error="",this.message="",this.form.old_password="",this.form.new_password="",this.confirm_password="",this.$refs.form&&this.$refs.form.resetValidation())}},methods:{post(){this.loading=!0,this.error="",this.message="",this.$api.user(this.form,((t,e)=>{this.loading=!1,e?this.error=e:this.message="User password changed."}))}}},ge=_e,ye=(0,_t.Z)(ge,ve,fe,!1,null,"31dcc8cc",null),be=ye.exports,xe=s(7564),we=function(){var t=this,e=t._self._c;return e(xe.Z,{class:["sidebar",{collapsed:!t.showTitles}],attrs:{floating:"",permanent:""},scopedSlots:t._u([{key:"append",fn:function(){return[e("div",[t.user?e(ot.Z,{class:{"selected-view":"settings"===t.selectedView},attrs:{to:{name:t.project?"project_settings":"project_new"}},on:{click:function(e){return t.setSelectedView("settings")}}},[e("BaseIcon",{class:["sidebar-icon","settings"===t.selectedView?"settings-icon-selected":"settings-icon"],attrs:{name:"settings"}}),t.showTitles?e(bt.km,[e(bt.V9,{staticClass:"sidebar-name"},[t._v("Settings")])],1):t._e()],1):t._e(),e(ot.Z,{attrs:{to:{name:"logout"}}},[e("img",{staticClass:"sidebar-icon",attrs:{src:`${t.$codexray.base_path}static/icons/sidebar/logout.svg`}}),t.showTitles?e(bt.km,[e(bt.V9,{staticClass:"sidebar-name"},[t._v("Logout")])],1):t._e()],1),e("div",{staticClass:"line"}),e("img",{staticClass:"sidebar-menu",attrs:{src:`${t.$codexray.base_path}static/icons/sidebar/menuFold.svg`},on:{click:t.toggleSidebar}})],1)]},proxy:!0}])},[e(rt.Z,{attrs:{dense:"",nav:""}},[e(Ht.Z,[e(rt.Z,{attrs:{dense:"",nav:""}},t._l(t.views,(function(s,a){return e(ot.Z,{key:a,class:{"selected-view":t.selectedView===a},attrs:{to:{name:"overview",params:{view:a,app:void 0}}},on:{click:function(e){return t.setSelectedView(a)}}},[e("BaseIcon",{class:["sidebar-icon",t.selectedView===a?`${t.icons[a].class}-selected`:t.icons[a].class],attrs:{name:t.icons[a].name}}),t.showTitles?e(bt.km,[e(bt.V9,{staticClass:"sidebar-name"},[t._v(t._s(s))])],1):t._e()],1)})),1)],1)],1)],1)},ke=[],Ce=function(){var t=this,e=t._self._c;return e("span",{on:{click:t.emitClickEvent}},[t.iconComponent?e(t.iconComponent,{tag:"component",class:t.className,style:{width:t.width,height:t.height,fill:t.iconColor,transform:t.transform},attrs:{role:"img"}}):t._e()],1)},Ze=[];const $e={},Se=s(8091);Se.keys().forEach((t=>{const e=t.replace(/^\.\/(.+)\.svg$/,"$1"),s=Se(t);$e[e]=s.default||s}));var Ie={emits:["onClick"],props:{name:{type:String,required:!0,validator(t){return Object.prototype.hasOwnProperty.call($e,t)}},width:{type:String},height:{type:String},iconColor:{type:String},className:{},transform:{type:String}},computed:{iconComponent(){return $e[this.name]||null}},methods:{emitClickEvent(){this.$emit("onClick")}}},qe=Ie,Pe=(0,_t.Z)(qe,Ce,Ze,!1,null,"559371ff",null),Ae=Pe.exports,Oe={components:{BaseIcon:Ae},props:{user:Object,project:Object,views:Object,icons:Object},data(){return{showTitles:!0,selectedView:""}},mounted(){this.selectedView=localStorage.getItem("selectedView")||this.$route.params.view||"applications"},methods:{toggleSidebar(){this.showTitles=!this.showTitles,this.$emit("toggle-sidebar",this.showTitles)},setSelectedView(t){this.selectedView=t,localStorage.setItem("selectedView",t)}}},Te=Oe,je=(0,_t.Z)(Te,we,ke,!1,null,null,null),Ee=je.exports,Le={components:{Search:jt,TimePicker:yt,CheckForUpdates:Rt,ThemeSelector:Jt,AgentInstallation:pe,ChangePassword:be,Sidebar:Ee,BaseIcon:Ae},data(){return{user:null,context:this.$api.context,changePassword:!1,isSidebarCollapsed:!1}},created(){this.$events.watch(this,this.getUser,"projects"),this.getUser()},computed:{projects(){return this.user&&this.user.projects||[]},project(){const t=this.$route.params.projectId;return t?this.projects.find((e=>e.id===t)):null},status(){return this.project?this.context.status:null},views(){return{health:"Application",map:"Topology",traces:"Traces",nodes:"Nodes",EUM:"EUM",incidents:"Incidents"}},icons(){return{health:{name:"health",class:"health-icon"},map:{name:"map",class:"map-icon"},traces:{name:"traces",class:"traces-icon"},nodes:{name:"nodes",class:"nodes-icon"},incidents:{name:"incidents",class:"incident-icon"},EUM:{name:"eum",class:"eum-icon"}}}},watch:{$route(t,e){this.getUser(),t.query.from===e.query.from&&t.query.to===e.query.to&&t.query.incident===e.query.incident||this.$events.emit("refresh"),t.params.projectId!==e.params.projectId&&(this.$events.emit("refresh"),this.lastProject(t.params.projectId))}},methods:{getUser(){this.$route.meta.anonymous||this.$api.user(null,((t,e)=>{if(e)this.user=null;else if(this.user=t,this.user&&"index"===this.$route.name){if(!this.projects.length)return void this.$router.replace({name:"welcome"});let t=this.projects[0].id;const e=this.lastProject();e&&this.projects.find((t=>t.id===e))&&(t=e),this.$router.replace({name:"overview",params:{projectId:t}})}}))},lastProject(t){return this.$storage.local("last-project",t)},refresh(){this.$events.emit("refresh")},toggleSidebar(t){this.isSidebarCollapsed=!t}}},Ne=Le,Me=(0,_t.Z)(Ne,ut,mt,!1,null,"5418413a",null),ze=Me.exports,Fe=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mx-auto"},[e("h1",{staticClass:"text-h5 my-5"},[t._v("Configuration")]),e(ee.Z,{attrs:{height:"40","show-arrows":"","slider-size":"2"}},t._l(t.tabs,(function(s){return e(Xt.Z,{key:s.id,attrs:{to:{params:{tab:s.id}},disabled:s.disabled,exact:""}},[t._v(" "+t._s(s.name)+" ")])})),1),t.tab?t._e():[e("h2",{staticClass:"text-h5 my-5"},[t._v("Project name")]),e("ProjectSettings",{attrs:{projectId:t.projectId}}),t.projectId?[e("h2",{staticClass:"text-h5 mt-10 mb-5"},[t._v("Status")]),e("ProjectStatus",{attrs:{projectId:t.projectId}}),e("h2",{staticClass:"text-h5 mt-10 mb-5"},[t._v("Danger zone")]),e("ProjectDelete",{attrs:{projectId:t.projectId}})]:t._e()],"prometheus"===t.tab?[e("h1",{staticClass:"text-h5 my-5"},[t._v(" Prometheus integration "),e("a",{attrs:{href:"https://codexray.com/docs/codexray/configuration/prometheus",target:"_blank"}},[e(it.Z,[t._v("mdi-information-outline")])],1)]),e("IntegrationPrometheus")]:t._e(),"clickhouse"===t.tab?[e("h1",{staticClass:"text-h5 my-5"},[t._v(" ClickHouse integration "),e("a",{attrs:{href:"https://codexray.com/docs/codexray/configuration/clickhouse",target:"_blank"}},[e(it.Z,[t._v("mdi-information-outline")])],1)]),t._m(0),e("IntegrationClickhouse")]:t._e(),"aws"===t.tab?[e("h1",{staticClass:"text-h5 my-5"},[t._v("AWS integration")]),e("IntegrationAWS")]:t._e(),"inspections"===t.tab?[e("h1",{staticClass:"text-h5 my-5"},[t._v(" Inspection configs "),e("a",{attrs:{href:"https://codexray.com/docs/codexray/inspections/overview",target:"_blank"}},[e(it.Z,[t._v("mdi-information-outline")])],1)]),e("Inspections")]:t._e(),"applications"===t.tab?[e("h2",{staticClass:"text-h5 my-5",attrs:{id:"categories"}},[t._v(" Application categories "),e("a",{attrs:{href:"https://codexray.com/docs/codexray/configuration/application-categories",target:"_blank"}},[e(it.Z,[t._v("mdi-information-outline")])],1)]),t._m(1),e("ApplicationCategories"),e("h2",{staticClass:"text-h5 mt-10 mb-5",attrs:{id:"custom-applications"}},[t._v(" Custom applications "),e("a",{attrs:{href:"https://codexray.com/docs/codexray/configuration/custom-applications",target:"_blank"}},[e(it.Z,[t._v("mdi-information-outline")])],1)]),e("p",[t._v("codexray groups individual containers into applications using the following approach:")]),t._m(2),t._m(3),e("CustomApplications")]:t._e(),"notifications"===t.tab?[e("h1",{staticClass:"text-h5 my-5"},[t._v(" Notification integrations "),e("a",{attrs:{href:"https://codexray.com/docs/codexray/alerting/slo-monitoring",target:"_blank"}},[e(it.Z,[t._v("mdi-information-outline")])],1)]),e("Integrations")]:t._e(),"organization"===t.tab?[e("h1",{staticClass:"text-h5 my-5"},[t._v(" Users "),e("a",{attrs:{href:"https://codexray.com/docs/codexray/configuration/authentication",target:"_blank"}},[e(it.Z,[t._v("mdi-information-outline")])],1)]),e("Users"),e("h1",{staticClass:"text-h5 mt-10 mb-5"},[t._v(" Role-Based Access Control (RBAC) "),e("a",{attrs:{href:"https://codexray.com/docs/codexray/configuration/rbac",target:"_blank"}},[e(it.Z,[t._v("mdi-information-outline")])],1)]),e("RBAC"),e("h1",{staticClass:"text-h5 mt-10 mb-5"},[t._v(" Single Sign-On (SAML) "),e("a",{attrs:{href:"https://codexray.com/docs/codexray/configuration/authentication",target:"_blank"}},[e(it.Z,[t._v("mdi-information-outline")])],1)]),e("SSO")]:t._e()],2)},De=[function(){var t=this,e=t._self._c;return e("p",[t._v(" codexray stores "),e("a",{attrs:{href:"https://codexray.com/docs/codexray/logs",target:"_blank"}},[t._v("logs")]),t._v(", "),e("a",{attrs:{href:"https://codexray.com/docs/codexray/tracing",target:"_blank"}},[t._v("traces")]),t._v(", and "),e("a",{attrs:{href:"https://codexray.com/docs/codexray/profiling",target:"_blank"}},[t._v("profiles")]),t._v(" in the ClickHouse database. ")])},function(){var t=this,e=t._self._c;return e("p",[t._v(" You can organize your applications into groups by defining "),e("a",{attrs:{href:"https://en.wikipedia.org/wiki/Glob_(programming)",target:"_blank"}},[t._v("glob patterns")]),t._v(" in the "),e("var",[t._v("<namespace>/<application_name>")]),t._v(" format. ")])},function(){var t=this,e=t._self._c;return e("ul",[e("li",[e("b",[t._v("Kubernetes metadata")]),t._v(": Pods are grouped into Deployments, StatefulSets, etc.")]),e("li",[e("b",[t._v("Non-Kubernetes containers")]),t._v(": Containers such as Docker containers or Systemd units are grouped into applications by their names. For example, Systemd services named "),e("var",[t._v("mysql")]),t._v(" on different hosts are grouped into a single application called "),e("var",[t._v("mysql")]),t._v(". ")])])},function(){var t=this,e=t._self._c;return e("p",{staticClass:"my-5"},[t._v(" This default approach works well in most cases. However, since no one knows your system better than you do, codexray allows you to manually adjust application groupings to better fit your specific needs. You can match desired application instances by defining "),e("a",{attrs:{href:"https://en.wikipedia.org/wiki/Glob_(programming)",target:"_blank"}},[t._v("glob patterns")]),t._v(" for "),e("var",[t._v("instance_name")]),t._v(". Note that this is not applicable to Kubernetes applications. ")])}],Re=function(){var t=this,e=t._self._c;return t.form?e(Kt.Z,{ref:"form",staticStyle:{"max-width":"800px"},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e("div",{staticClass:"caption"},[t._v(" Project is a separate infrastructure or environment with a dedicated Prometheus, e.g. "),e("var",[t._v("production")]),t._v(", "),e("var",[t._v("staging")]),t._v(" or "),e("var",[t._v("prod-us-west")]),t._v(". ")]),e(wt.Z,{attrs:{rules:[t.$validators.isSlug],outlined:"",dense:"",required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t.error?e(K.Z,{attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(" "+t._s(t.error)+" ")]):t._e(),t.message?e(K.Z,{attrs:{color:"green",outlined:"",text:""}},[t._v(" "+t._s(t.message)+" ")]):t._e(),e(et.Z,{attrs:{block:"",color:"primary",disabled:!t.valid,loading:t.loading},on:{click:t.save}},[t._v("Save")])],1):t._e()},He=[],Ve={props:{projectId:String},data(){return{form:{name:""},valid:!1,loading:!1,error:"",message:""}},mounted(){this.get()},watch:{projectId(){this.get()}},methods:{get(){this.loading=!0,this.error="",this.$api.getProject(this.projectId,((t,e)=>{this.loading=!1,e?this.error=e:(this.form.name=t.name,this.form&&!this.projectId&&this.$refs.form&&this.$refs.form.resetValidation())}))},save(){this.loading=!0,this.error="",this.message="",this.$api.saveProject(this.projectId,this.form,((t,e)=>{if(this.loading=!1,e)this.error=e;else if(this.$events.emit("projects"),this.message="Settings were successfully updated.",!this.projectId){const e=t.trim();this.$router.replace({name:"project_settings",params:{projectId:e,tab:"prometheus"}}).catch((t=>t))}}))}}},Ue=Ve,Be=(0,_t.Z)(Ue,Re,He,!1,null,"369aecad",null),We=Be.exports,Qe=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"max-width":"800px"}},[t.error?e(K.Z,{attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(" "+t._s(t.error)+" ")]):t._e(),t.status?e("div",[e("div",{staticClass:"text-truncate"},[e("Led",{attrs:{status:t.status.prometheus.status}}),e("span",{staticClass:"font-weight-medium"},[t._v("prometheus")]),t._v(": "),t.status.prometheus.error?e("span",[t._v(" "+t._s(t.status.prometheus.error)+" ")]):e("span",[t._v(" "+t._s(t.status.prometheus.message)+" ")]),"configure"===t.status.prometheus.action?e("router-link",{attrs:{to:{params:{tab:"prometheus"}}}},[t._v("configure")]):t._e()],1),e("div",{staticClass:"d-flex align-center mt-2"},[e("Led",{attrs:{status:t.status.node_agent.status}}),e("span",{staticClass:"font-weight-medium"},[t._v("codexray-node-agent")]),t._v(": "),e("span",{staticClass:"ml-1 mr-2"},["unknown"===t.status.node_agent.status?[t._v(" unknown ")]:[t.status.node_agent.nodes?[t._v(" "+t._s(t.$pluralize("node",t.status.node_agent.nodes,!0))+" found ")]:[t.loading?[t._v("checking...")]:[t._v("no agent installed")]]]],2),e("AgentInstallation",{attrs:{color:"primary",small:""}},[t._v("Install")])],1),t.status.kube_state_metrics?e("div",{staticClass:"d-flex align-center mt-2"},[e("Led",{attrs:{status:t.status.kube_state_metrics.status}}),e("span",{staticClass:"font-weight-medium"},[t._v("kube-state-metrics")]),t._v(": "),"ok"===t.status.kube_state_metrics.status?[t._v(" "+t._s(t.$pluralize("application",t.status.kube_state_metrics.applications,!0))+" found ")]:[t.loading?[t._v("checking...")]:[t._v("no kube-state-metrics installed")]],t._v(" ("),e("a",{attrs:{href:"https://codexray.com/docs/metric-exporters/kube-state-metrics",target:"_blank"}},[t._v("docs")]),t._v(") ")],2):t._e()]):t._e()],1)},Je=[],Ge={props:{projectId:String},components:{Led:Pt,AgentInstallation:pe},data(){return{status:null,error:null,loading:!1}},mounted(){this.get()},watch:{projectId(){this.status=null,this.get()}},methods:{get(){this.projectId&&(this.loading=!0,this.$api.getStatus(((t,e)=>{if(setTimeout((()=>{this.loading=!1}),500),e)return this.error=e,void(this.status=null);this.status=t,this.status.error&&(this.error=this.status.error,this.status=null)})))}}},Ye=Ge,Ke=(0,_t.Z)(Ye,Qe,Je,!1,null,"f992b0f0",null),Xe=Ke.exports,ts=s(125),es=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"max-width":"800px"}},[e("div",{staticClass:"d-block d-md-flex align-center"},[t._m(0),e("div",[e(et.Z,{attrs:{block:"",color:"red",outlined:""},on:{click:function(e){t.dialog=!0}}},[t._v("Delete this project")])],1)]),e(Yt.Z,{attrs:{"max-width":"600"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.loading?e(Gt.Z,{staticClass:"pa-10"},[e(ts.Z,{attrs:{indeterminate:""}})],1):e(Gt.Z,{staticClass:"pa-4"},[e("div",{staticClass:"d-flex align-center font-weight-bold mb-4"},[t._v(" Are you absolutely sure? "),e(ct.Z),e(et.Z,{attrs:{icon:""},on:{click:function(e){t.dialog=!1}}},[e(it.Z,[t._v("mdi-close")])],1)],1),e("p",[t._v(" This action cannot be undone. This will permanently delete the "),e("b",[t._v(t._s(t.name))]),t._v(" project. ")]),e("p",[t._v(" Please type "),e("b",[t._v(t._s(t.name))]),t._v(" to confirm ")]),e(wt.Z,{attrs:{outlined:"",dense:""},model:{value:t.confirmation,callback:function(e){t.confirmation=e},expression:"confirmation"}}),t.error?e(K.Z,{attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(" "+t._s(t.error)+" ")]):t._e(),e(et.Z,{attrs:{block:"",color:"red",outlined:"",disabled:t.confirmation!==t.name},on:{click:t.del}},[t.$vuetify.breakpoint.mdAndUp?[t._v(" I understand the consequences, delete this project ")]:[t._v(" Delete this project ")]],2)],1)],1)],1)},ss=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex-grow-1"},[e("div",[e("b",[t._v("Delete this project")])]),e("div",[t._v("Once you delete a project, there is no going back. Please be certain.")])])}],as={props:{projectId:String},data(){return{name:"",dialog:!1,loading:!1,confirmation:"",error:""}},watch:{dialog(){this.project=null,this.confirmation="",this.dialog&&this.get()}},methods:{get(){this.error="",this.loading=!0,this.$api.getProject(this.projectId,((t,e)=>{this.loading=!1,e?this.error=e:this.name=t.name}))},del(){this.error="",this.$api.delProject(this.projectId,((t,e)=>{e?this.error=e:(this.$events.emit("projects"),this.$router.push({name:"index"}))}))}}},is=as,rs=(0,_t.Z)(is,es,ss,!1,null,"d84d7020",null),os=rs.exports,ns=s(2088),ls=function(){var t=this,e=t._self._c;return e(ns.Z,[e("thead",[e("tr",[e("th",[t._v("Inspection")]),e("th",[t._v("Project-level override")]),e("th",[t._v("Application-level override")])])]),e("tbody",t._l(t.checks,(function(s){return e("tr",[e("td",[t._v(" "+t._s(s.title)+" "),e("div",{staticClass:"grey--text text-no-wrap"},[t._v("Condition: "+t._s(t.formatCondition(s)))])]),e("td",["SLOAvailability"===s.id||"SLOLatency"===s.id?[t._v(" — ")]:e("a",{on:{click:function(e){return t.edit("::",s)}}},[null===s.project_threshold?[e(it.Z,{attrs:{small:""}},[t._v("mdi-file-replace-outline")])]:[t._v(" "+t._s(t.format(s.project_threshold,s.unit))+" ")]],2)],2),e("td",t._l(s.application_overrides,(function(a){return e("div",{staticClass:"text-no-wrap"},[t._v(" "+t._s(t.$utils.appId(a.id).name)+": "),e("a",{on:{click:function(e){return t.edit(a.id,s)}}},[t._v(" "+t._s(t.format(a.threshold,s.unit,a.details))+" ")])])})),0)])})),0),e("CheckForm",{attrs:{appId:t.editing.appId,check:t.editing.check},model:{value:t.editing.active,callback:function(e){t.$set(t.editing,"active",e)},expression:"editing.active"}})],1)},cs=[],ds=s(8368),us=function(){var t=this,e=t._self._c;return t.check?e(Yt.Z,{attrs:{value:t.value,"max-width":"800"},on:{input:t.emitValue}},[e(Gt.Z,{staticClass:"pa-5"},[e("div",{staticClass:"d-flex align-center font-weight-medium mb-4"},["SLOAvailability"===t.check.id||"SLOLatency"===t.check.id?[t._v(' Configure the "'+t._s(t.check.title)+'" inspection '),t.form&&!t.form.default?e(et.Z,{attrs:{small:"",icon:""},on:{click:function(e){t.confirmation=!0}}},[e(it.Z,{attrs:{small:""}},[t._v("mdi-trash-can-outline")])],1):t._e(),e(ds.Z,{attrs:{value:t.confirmation,absolute:"",opacity:"0.8"}},[e("div",[t._v('Are you sure you want to delete your override for the "'+t._s(t.check.title)+'" inspection?')]),e("div",{staticClass:"mt-5 d-flex"},[e(ct.Z),e(et.Z,{attrs:{small:"",color:"info"},on:{click:function(e){t.confirmation=!1}}},[t._v("Cancel")]),e(et.Z,{staticClass:"ml-3",attrs:{loading:t.deleting,color:"error",small:""},on:{click:t.del}},[t._v("Delete")])],1)])]:[t._v(' Adjust the threshold for the "'+t._s(t.check.title)+'" inspection ')],e(ct.Z),e(et.Z,{attrs:{icon:""},on:{click:function(e){return t.emitValue(!1)}}},[e(it.Z,[t._v("mdi-close")])],1)],2),t.form?e(Kt.Z,{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},["SLOAvailability"===t.check.id?e("CheckFormSLOAvailability",{attrs:{form:t.form}}):"SLOLatency"===t.check.id?e("CheckFormSLOLatency",{attrs:{form:t.form}}):e("CheckConfigForm",{attrs:{form:t.form,check:t.check,appId:t.appId}}),t.check.id.startsWith("SLO")?e("div",{staticClass:"my-3"},[t._v(" Alerting: "),e("div",[t.integrations&&Object.keys(t.integrations).length?e("ul",t._l(t.integrations,(function(s,a){return e("li",[e("span",[t._v(t._s(a))]),s?e("span",{staticClass:"grey--text"},[t._v(" ("+t._s(s)+")")]):t._e()])})),0):e("div",{staticClass:"grey--text"},[t._v("No notification integrations configured.")]),e(et.Z,{staticClass:"mt-1",attrs:{color:"primary",small:"",to:{name:"project_settings",params:{tab:"notifications"}}}},[t._v(" Configure integrations ")])],1)]):t._e(),t.error?e(K.Z,{staticClass:"my-3",attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(" "+t._s(t.error)+" ")]):t._e(),t.message?e(K.Z,{staticClass:"my-3",attrs:{color:"green",outlined:"",text:""}},[t._v(" "+t._s(t.message)+" ")]):t._e(),e(et.Z,{staticClass:"mt-5",attrs:{block:"",color:"primary",disabled:!(t.valid&&t.changed),loading:t.saving},on:{click:t.save}},[t._v("Save")])],1):t._e()],1)],1):t._e()},ms=[],hs=s(1487),ps=s(5114),vs=function(){var t=this,e=t._self._c;return e("div",[t._v(" Metrics: "),e(ps.Z,{staticClass:"mb-3",attrs:{items:[{value:!1,text:"inbound requests (built-in)"},{value:!0,text:"custom"}],outlined:"",dense:"","menu-props":{offsetY:!0},"hide-details":""},model:{value:t.config.custom,callback:function(e){t.$set(t.config,"custom",e)},expression:"config.custom"}}),t.config.custom?[t._v(" Total requests query: "),e("MetricSelector",{staticClass:"mb-3",attrs:{rules:t.config.custom?[t.$validators.notEmpty]:[],wrap:"sum( rate( <input> [..]) )"},model:{value:t.config.total_requests_query,callback:function(e){t.$set(t.config,"total_requests_query",e)},expression:"config.total_requests_query"}}),t._v(" Failed requests query: "),e("MetricSelector",{staticClass:"mb-3",attrs:{rules:t.config.custom?[t.$validators.notEmpty]:[],wrap:"sum( rate( <input> [..]) )"},model:{value:t.config.failed_requests_query,callback:function(e){t.$set(t.config,"failed_requests_query",e)},expression:"config.failed_requests_query"}})]:t._e(),t._v(" Objective: "),e("div",{staticClass:"d-flex",staticStyle:{gap:"4px"}},[e(hs.Z,{staticClass:"mt-0 pt-0",attrs:{"hide-details":""},on:{change:t.changeTrackSLO},model:{value:t.trackSLO,callback:function(e){t.trackSLO=e},expression:"trackSLO"}}),e(wt.Z,{staticClass:"input",attrs:{disabled:!t.trackSLO,outlined:"",dense:"",rules:[t.$validators.isFloat],"hide-details":""},scopedSlots:t._u([{key:"append",fn:function(){return[e("span",{staticClass:"grey--text"},[t._v("%")])]},proxy:!0}]),model:{value:t.config.objective_percentage,callback:function(e){t.$set(t.config,"objective_percentage",t._n(e))},expression:"config.objective_percentage"}}),t._v(" of requests should not fail ")],1)],2)},fs=[],_s=s(2998),gs=function(){var t=this,e=t._self._c;return e(_s.Z,{attrs:{value:t.value,rules:t.rules,dense:"","hide-details":""},on:{click:t.focus}},[e("div",{staticClass:"d-flex align-center wrapper"},[t.wrapped&&t.wrapped.prefix?e("div",{staticClass:"grey--text"},[t._v(t._s(t.wrapped.prefix))]):t._e(),e("div",{ref:"cm",staticClass:"overflow-hidden"}),t.wrapped&&t.wrapped.suffix?e("div",{staticClass:"grey--text"},[t._v(t._s(t.wrapped.suffix))]):t._e()])])},ys=[],bs=s(8927),xs=s(5673),ws=s(8120),ks=s(4456),Cs=s(4790);const Zs=[xs.jT,xs.wB,xs.uD,xs.tb,xs.uO,xs.oL,xs.hn];Zs.forEach((t=>{while(t.length>0)t.pop()}));const $s=ks.tk.theme({"&.cm-editor":{"&.cm-focused":{outline:"none",outline_fallback:"none"}},".cm-scroller":{overflow:"hidden",fontFamily:'"Roboto", sans-serif'},".cm-completionIcon":{display:"none"},".cm-completionDetail":{display:"none"},".cm-tooltip.cm-completionInfo":{display:"none"},".cm-completionMatchedText":{textDecoration:"none",fontWeight:"bold"},".cm-line":{padding:"0 4px"}}),Ss=[(0,Cs.vQ)(),(0,Cs.ys)(),ks.$f.of([...Cs.GA,...Cs.B1]),$s];var Is={props:{value:String,rules:Array,wrap:String},view:null,watch:{value(){this.value!==this.view.state.doc.toString()&&this.view.dispatch({changes:{from:0,to:this.view.state.doc.length,insert:this.value}})}},computed:{wrapped(){if(!this.wrap)return null;const t=this.wrap.split("<input>",2);return 0===t.length?null:{prefix:t[0],suffix:t[1]}}},mounted(){const t=(new bs.q9).setComplete(this.$api.getPrometheusCompleteConfiguration());this.view=new ks.tk({state:ws.yy.create({doc:this.value,extensions:[...Ss,t.asExtension(),ks.tk.updateListener.of((t=>{t.docChanged&&this.$emit("input",t.state.doc.toString())}))]}),parent:this.$refs.cm})},beforeDestroy(){this.view&&this.view.destroy()},methods:{focus(){this.view&&this.view.focus()}}},qs=Is,Ps=(0,_t.Z)(qs,gs,ys,!1,null,"c04d60ee",null),As=Ps.exports,Os={components:{MetricSelector:As},props:{form:Object},data(){return{trackSLO:this.form.configs[0].objective_percentage>0}},methods:{changeTrackSLO(){this.config.objective_percentage=this.trackSLO?99:0}},computed:{config(){return this.form.configs[0]}}},Ts=Os,js=(0,_t.Z)(Ts,vs,fs,!1,null,"24f9e9fb",null),Es=js.exports,Ls=function(){var t=this,e=t._self._c;return e("div",[t._v(" Metrics: "),e(ps.Z,{staticClass:"mb-3",attrs:{items:[{value:!1,text:"inbound requests (built-in)"},{value:!0,text:"custom"}],outlined:"",dense:"","menu-props":{offsetY:!0},"hide-details":""},model:{value:t.config.custom,callback:function(e){t.$set(t.config,"custom",e)},expression:"config.custom"}}),t.config.custom?[t._v(" Histogram query: "),e("MetricSelector",{staticClass:"mb-3",attrs:{rules:[t.$validators.notEmpty],wrap:"sum by(le)( rate( <input> [..]) )"},model:{value:t.config.histogram_query,callback:function(e){t.$set(t.config,"histogram_query",e)},expression:"config.histogram_query"}})]:t._e(),t._v(" Objective: "),e("div",{staticClass:"d-flex",staticStyle:{gap:"4px"}},[e(hs.Z,{staticClass:"mt-0 pt-0",attrs:{"hide-details":""},on:{change:t.changeTrackSLO},model:{value:t.trackSLO,callback:function(e){t.trackSLO=e},expression:"trackSLO"}}),e(wt.Z,{staticClass:"input text",attrs:{disabled:!t.trackSLO,outlined:"",dense:"",rules:[t.$validators.isFloat],"hide-details":""},scopedSlots:t._u([{key:"append",fn:function(){return[e("span",{staticClass:"grey--text"},[t._v("%")])]},proxy:!0}]),model:{value:t.config.objective_percentage,callback:function(e){t.$set(t.config,"objective_percentage",t._n(e))},expression:"config.objective_percentage"}}),t._v(" of requests should be served faster than "),e(ps.Z,{staticClass:"input select",attrs:{disabled:!t.trackSLO,items:t.buckets,rules:[t.$validators.notEmpty],outlined:"",dense:"","hide-details":"","menu-props":{offsetY:!0}},model:{value:t.config.objective_bucket,callback:function(e){t.$set(t.config,"objective_bucket",t._n(e))},expression:"config.objective_bucket"}})],1)],2)},Ns=[];const Ms=[{value:.005,text:"5ms"},{value:.01,text:"10ms"},{value:.025,text:"25ms"},{value:.05,text:"50ms"},{value:.1,text:"100ms"},{value:.25,text:"250ms"},{value:.5,text:"500ms"},{value:1,text:"1s"},{value:2.5,text:"2.5s"},{value:5,text:"5s"},{value:10,text:"10s"}];var zs={components:{MetricSelector:As},props:{form:Object},data(){return{trackSLO:this.form.configs[0].objective_percentage>0}},computed:{config(){return this.form.configs[0]},buckets(){return Ms}},methods:{changeTrackSLO(){this.config.objective_percentage=this.trackSLO?99:0}}},Fs=zs,Ds=(0,_t.Z)(Fs,Ls,Ns,!1,null,"27c49b9a",null),Rs=Ds.exports,Hs=function(){var t=this,e=t._self._c;return e(ns.Z,[e("thead",[e("tr",[e("th",[t._v("Level")]),e("th",[t._v("Condition")])])]),t.form?e("tbody",[3===t.form.configs.length?e("tr",[e("td",[t._v(" Override for the "),e("var",[t._v(t._s(t.$utils.appId(this.appId).name))]),t._v(" app ")]),e("td",[null!==t.form.configs[2]?e("div",{staticClass:"d-flex align-center"},[e("div",{staticClass:"flex-grow-1 capfirst py-3"},[t._v(" "+t._s(t.condition.head)+" "),e(wt.Z,{staticClass:"input",attrs:{outlined:"","hide-details":"",rules:[t.$validators.isFloat]},model:{value:t.form.configs[2].threshold,callback:function(e){t.$set(t.form.configs[2],"threshold",t._n(e))},expression:"form.configs[2].threshold"}}),t._v(" "+t._s(t.unit)+" "+t._s(t.condition.tail)+" ")],1),e(et.Z,{attrs:{small:"",icon:""},on:{click:function(e){return t.override(2,!0)}}},[e(it.Z,{attrs:{small:""}},[t._v("mdi-trash-can-outline")])],1)],1):e("div",{staticClass:"grey--text"},[t._v("The project-level override ↓ is used. "),e("a",{on:{click:function(e){return t.override(2)}}},[t._v("Override")])])])]):t._e(),e("tr",[e("td",[t._v("Project-level override")]),e("td",[null!==t.form.configs[1]?e("div",{staticClass:"d-flex align-center"},[e("div",{staticClass:"flex-grow-1 capfirst py-3"},[t._v(" "+t._s(t.condition.head)+" "),e(wt.Z,{staticClass:"input",attrs:{outlined:"","hide-details":"",rules:[t.$validators.isFloat]},model:{value:t.form.configs[1].threshold,callback:function(e){t.$set(t.form.configs[1],"threshold",t._n(e))},expression:"form.configs[1].threshold"}}),t._v(" "+t._s(t.unit)+" "+t._s(t.condition.tail)+" ")],1),e(et.Z,{attrs:{small:"",icon:""},on:{click:function(e){return t.override(1,!0)}}},[e(it.Z,{attrs:{small:""}},[t._v("mdi-trash-can-outline")])],1)],1):e("div",{staticClass:"grey--text"},[t._v("The global default ↓ is used. "),e("a",{on:{click:function(e){return t.override(1)}}},[t._v("Override")])])])]),e("tr",[e("td",[t._v("Global default")]),e("td",[e("div",{staticClass:"cd-flex align-center"},[e("div",{staticClass:"flex-grow-1 capfirst py-3"},[t._v(" "+t._s(t.condition.head)+" "),e(wt.Z,{staticClass:"input",attrs:{outlined:"","hide-details":"",disabled:"",value:t.form.configs[0].threshold}}),t._v(" "+t._s(t.unit)+" "+t._s(t.condition.tail)+" ")],1),e("div",{staticStyle:{"min-width":"28px"}})])])])]):t._e()])},Vs=[],Us={props:{form:Object,check:Object,appId:String},computed:{condition(){const t=this.check.condition_format_template.split("<threshold>",2);return 0===t.length?{head:"",tail:""}:1===t.length?{head:t[0],tail:""}:{head:t[0],tail:t[1]}},unit(){switch(this.check.unit){case"percent":return"%";case"second":return"seconds";case"seconds/second":return"seconds/second"}return""}},methods:{override(t,e){if(e)return void this.$set(this.form.configs,t,null);let s=null;for(let a=t-1;a>=0;a--)this.form.configs[a]&&(s=this.form.configs[a].threshold);null===this.form.configs[t]&&this.$set(this.form.configs,t,{}),this.form.configs[t].threshold=s}}},Bs=Us,Ws=(0,_t.Z)(Bs,Hs,Vs,!1,null,"237ee254",null),Qs=Ws.exports,Js={props:{appId:String,check:Object,value:Boolean},components:{CheckConfigForm:Qs,CheckFormSLOAvailability:Es,CheckFormSLOLatency:Rs},data(){return{loading:!1,error:"",message:"",form:null,integrations:null,saved:"",saving:!1,valid:!1,deleting:!1,confirmation:!1}},watch:{value(){this.value&&(this.form=null,this.get())}},computed:{changed(){return!!this.form&&this.saved!==JSON.stringify(this.form)}},methods:{get(){this.loading=!0,this.$api.getInspectionConfig(this.appId,this.check.id,((t,e)=>{if(this.loading=!1,e)return this.error=e,void(this.form=null);this.form=t.form,this.integrations=t.integrations,this.saved=JSON.stringify(this.form)}))},save(){this.saving=!0,this.error="",this.message="",this.$api.saveInspectionConfig(this.appId,this.check.id,this.form,((t,e)=>{this.saving=!1,e?this.error=e:(this.$events.emit("refresh"),this.message="Settings were successfully updated.",setTimeout((()=>{this.message=""}),1e3),this.get())}))},del(){this.confirmation=!1,this.deleting=!0,this.error="",this.$api.saveInspectionConfig(this.appId,this.check.id,{configs:null},((t,e)=>{this.deleting=!1,e?this.error=e:(this.$events.emit("refresh"),this.emitValue(!1))}))},emitValue(t){this.$emit("input",t)}}},Gs=Js,Ys=(0,_t.Z)(Gs,us,ms,!1,null,"419f6d94",null),Ks=Ys.exports,Xs={components:{CheckForm:Ks},data(){return{checks:[],loading:!1,error:"",message:"",editing:{active:!1}}},mounted(){this.get(),this.$events.watch(this,this.get,"refresh")},methods:{edit(t,e){this.editing={active:!0,appId:t,check:e}},formatCondition(t){return t.condition_format_template.replace("<bucket>","500ms").replace("<threshold>",this.format(t.global_threshold,t.unit))},format(t,e,s){if(null===t)return"—";let a=t;switch(e){case"percent":a=t+"%";break;case"second":a=this.$format.duration(1e3*t,"ms");break}return s&&(a+=" "+s),a},get(){this.loading=!0,this.error="",this.$api.getInspections(((t,e)=>{this.loading=!1,e?this.error=e:this.checks=t.checks}))}}},ta=Xs,ea=(0,_t.Z)(ta,ls,cs,!1,null,"4941f8c8",null),sa=ea.exports,aa=s(4375),ia=function(){var t=this,e=t._self._c;return e("div",[e(ns.Z,[e("thead",[e("tr",[e("th",[t._v("Category")]),e("th",[t._v("Patterns")]),e("th",[t._v("Notify of deployments")]),e("th",[t._v("Actions")])])]),e("tbody",t._l(t.categories,(function(s){return e("tr",[e("td",{staticClass:"text-no-wrap"},[e("div",{staticClass:"text-no-wrap"},[t._v(t._s(s.name))])]),e("td",{staticStyle:{"line-height":"2em"}},[s.default?e("div",{staticClass:"grey--text"},[t._v(" The default category containing applications that don't fit into other categories ")]):t._l((s.builtin_patterns+" "+s.custom_patterns).split(" ").filter((t=>!!t)),(function(s){return[e("span",{staticClass:"pattern"},[t._v(t._s(s))]),t._v("   ")]}))],2),e("td",[t._v(" "+t._s(s.notify_of_deployments?"on":"off")+" ")]),e("td",[e("div",{staticClass:"d-flex"},[e(et.Z,{attrs:{icon:"",small:""},on:{click:function(e){return t.openForm(s)}}},[e(it.Z,{attrs:{small:""}},[t._v("mdi-pencil")])],1),s.builtin?t._e():e(et.Z,{attrs:{icon:"",small:""},on:{click:function(e){return t.openForm(s,!0)}}},[e(it.Z,{attrs:{small:""}},[t._v("mdi-trash-can-outline")])],1)],1)])])})),0)]),e(et.Z,{staticClass:"mt-2",attrs:{color:"primary",small:""},on:{click:function(e){return t.openForm()}}},[t._v("Add a category")]),e(Yt.Z,{attrs:{"max-width":"800"},model:{value:t.form.active,callback:function(e){t.$set(t.form,"active",e)},expression:"form.active"}},[e(Gt.Z,{staticClass:"pa-4"},[e("div",{staticClass:"d-flex align-center font-weight-medium mb-4"},[t.form.new?e("div",[t._v("Add a new application category")]):t.form.del?e("div",[t._v('Delete the "'+t._s(t.form.name)+'" application category')]):e("div",[t._v('Edit the "'+t._s(t.form.name)+'" application category')]),e(ct.Z),e(et.Z,{attrs:{icon:""},on:{click:function(e){t.form.active=!1}}},[e(it.Z,[t._v("mdi-close")])],1)],1),e(Kt.Z,{ref:"form",model:{value:t.form.valid,callback:function(e){t.$set(t.form,"valid",e)},expression:"form.valid"}},[e("div",{staticClass:"subtitle-1"},[t._v("Name")]),e(wt.Z,{attrs:{outlined:"",dense:"",disabled:t.form.builtin||t.form.del,rules:[t.$validators.isSlug]},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t.form.default?t._e():[t.form.builtin?[e("div",{staticClass:"subtitle-1"},[t._v("Built-in patterns")]),e(aa.Z,{attrs:{outlined:"",dense:"",rows:"1","auto-grow":"",disabled:""},model:{value:t.form.builtin_patterns,callback:function(e){t.$set(t.form,"builtin_patterns",e)},expression:"form.builtin_patterns"}})]:t._e(),e("div",{staticClass:"subtitle-1"},[t._v("Custom patterns")]),e("div",{staticClass:"caption"},[t._v(" space-delimited list of "),e("a",{attrs:{href:"https://en.wikipedia.org/wiki/Glob_(programming)",target:"_blank"}},[t._v("glob patterns")]),t._v(" in the "),e("var",[t._v("<namespace>/<application_name>")]),t._v(" format, e.g.: "),e("var",[t._v("staging/* test-*/*")])]),e(aa.Z,{attrs:{outlined:"",dense:"",rows:"1","auto-grow":"",disabled:t.form.del,"hide-details":""},model:{value:t.form.custom_patterns,callback:function(e){t.$set(t.form,"custom_patterns",e)},expression:"form.custom_patterns"}})],e(hs.Z,{staticClass:"my-2",attrs:{disabled:t.form.del,label:"Get notified of deployments","hide-details":""},model:{value:t.form.notify_of_deployments,callback:function(e){t.$set(t.form,"notify_of_deployments",e)},expression:"form.notify_of_deployments"}}),t.form.notify_of_deployments?e("div",{staticClass:"my-2"},[t.integrations&&Object.keys(t.integrations).length?e("ul",t._l(t.integrations,(function(s,a){return e("li",[e("span",[t._v(t._s(a))]),s?e("span",{staticClass:"grey--text"},[t._v(" ("+t._s(s)+")")]):t._e()])})),0):e("div",{staticClass:"grey--text"},[t._v("No notification integrations configured.")]),e(et.Z,{staticClass:"mt-1",attrs:{color:"primary",small:"",to:{name:"project_settings",params:{tab:"notifications"}}},on:{click:function(e){t.form.active=!1}}},[t._v(" Configure integrations ")])],1):t._e(),t.error?e(K.Z,{attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(" "+t._s(t.error)+" ")]):t._e(),t.message?e(K.Z,{attrs:{color:"green",outlined:"",text:""}},[t._v(" "+t._s(t.message)+" ")]):t._e(),e("div",{staticClass:"d-flex align-center"},[e(ct.Z),t.form.del?e(et.Z,{attrs:{color:"error",loading:t.saving},on:{click:t.save}},[t._v("Delete")]):e(et.Z,{attrs:{color:"primary",disabled:!t.form.valid,loading:t.saving},on:{click:t.save}},[t._v("Save")])],1)],2)],1)],1)],1)},ra=[],oa={props:{projectId:String},data(){return{categories:[],integrations:[],loading:!1,error:"",message:"",form:{builtin:!1,default:!1,active:!1,new:!1,del:!1,oldName:"",name:"",builtin_patterns:"",custom_patterns:"",notify_of_deployments:!1,valid:!0},saving:!1}},mounted(){this.get()},watch:{projectId(){this.get()}},methods:{get(){this.loading=!0,this.error="",this.$api.getApplicationCategories(((t,e)=>{if(this.loading=!1,e)return void(this.error=e);this.categories=t.categories,this.integrations=t.integrations;const s=this.categories&&this.categories.find((t=>t.name===this.$route.query.category))||{},a=this.$route.query.app_pattern;(s.name||a)&&(a&&(s.custom_patterns?s.custom_patterns+=" "+a:s.custom_patterns=a),this.openForm(s),this.$router.replace({query:{...this.$route.query,category:void 0,app_pattern:void 0},hash:this.$route.hash}))}))},openForm(t,e){this.error="",this.form.builtin=t&&t.builtin,this.form.default=t&&t.default,this.form.active=!0,this.form.new=!t||!t.name,this.form.del=e,this.form.oldName=t?t.name:"",this.form.name=t?t.name:"",this.form.builtin_patterns=t?t.builtin_patterns:"",this.form.custom_patterns=t?t.custom_patterns:"",this.form.notify_of_deployments=t&&t.notify_of_deployments,this.$refs.form&&this.$refs.form.resetValidation()},save(){this.saving=!0,this.error="",this.message="";const t=this.form.del?"":this.form.custom_patterns,e={name:this.form.oldName,new_name:this.form.name,custom_patterns:t,notify_of_deployments:this.form.notify_of_deployments};this.$api.saveApplicationCategory(e,((t,e)=>{this.saving=!1,e?this.error=e:(this.message="Settings were successfully updated.",setTimeout((()=>{this.message="",this.form.active=!1}),1e3),this.get())}))}}},na=oa,la=(0,_t.Z)(na,ia,ra,!1,null,"7a00e5be",null),ca=la.exports,da=function(){var t=this,e=t._self._c;return e("div",[t.error?e(K.Z,{attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(" "+t._s(t.error)+" ")]):t._e(),t.message?e(K.Z,{attrs:{color:"green",outlined:"",text:""}},[t._v(" "+t._s(t.message)+" ")]):t._e(),e(Kt.Z,[e("div",{staticClass:"subtitle-1"},[t._v("Base url")]),e("div",{staticClass:"caption"},[t._v("This URL is used for things like creating links in alerts.")]),e("div",{staticClass:"d-flex"},[e(wt.Z,{attrs:{rules:[t.$validators.isUrl],outlined:"",dense:""},model:{value:t.form.base_url,callback:function(e){t.$set(t.form,"base_url",e)},expression:"form.base_url"}}),e(et.Z,{staticClass:"ml-2",attrs:{color:"primary",loading:t.saving,height:"38"},on:{click:t.save}},[t._v("Save")])],1)]),e(ns.Z,[e("thead",[e("tr",[e("th",[t._v("Type")]),e("th",[t._v("Notify of incidents")]),e("th",[t._v("Notify of deployments")]),e("th",[t._v("Actions")])])]),e("tbody",t._l(t.integrations,(function(s){return e("tr",[e("td",[t._v(" "+t._s(s.title)+" "),e("div",{staticClass:"caption"},[t._v(t._s(s.details))])]),e("td",[s.configured?e(it.Z,{attrs:{small:"",color:s.incidents?"green":""}},[t._v(" "+t._s(s.incidents?"mdi-check":"mdi-minus")+" ")]):t._e()],1),e("td",[s.configured?e(it.Z,{attrs:{small:"",color:s.deployments?"green":""}},[t._v(" "+t._s(s.deployments?"mdi-check":"mdi-minus")+" ")]):t._e()],1),e("td",[s.configured?e("div",{staticClass:"d-flex"},[e(et.Z,{attrs:{icon:"",small:""},on:{click:function(e){return t.open(s,"edit")}}},[e(it.Z,{attrs:{small:""}},[t._v("mdi-pencil")])],1),e(et.Z,{attrs:{icon:"",small:""},on:{click:function(e){return t.open(s,"del")}}},[e(it.Z,{attrs:{small:""}},[t._v("mdi-trash-can-outline")])],1)],1):e(et.Z,{attrs:{small:"",color:"primary"},on:{click:function(e){return t.open(s,"new")}}},[t._v("Configure")])],1)])})),0)]),t.action?e("IntegrationForm",{attrs:{type:t.integration.type,title:t.integration.title},model:{value:t.action,callback:function(e){t.action=e},expression:"action"}}):t._e()],1)},ua=[],ma=s(6600),ha=function(){var t=this,e=t._self._c;return e(Yt.Z,{attrs:{"max-width":"800"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(Gt.Z,{staticClass:"pa-5"},[e("div",{staticClass:"d-flex align-center font-weight-medium mb-4"},[e("div",[t._v(" Configure "+t._s(t.title)+" integration "),e("a",{attrs:{href:`https://codexray.com/docs/codexray/alerting/${t.type}`,target:"_blank"}},[e(it.Z,[t._v("mdi-information-outline")])],1),t.loading?e(ma.Z,{attrs:{indeterminate:"",color:"green",size:"30"}}):t._e()],1),e(ct.Z),e(et.Z,{attrs:{icon:""},on:{click:function(e){t.dialog=!1}}},[e(it.Z,[t._v("mdi-close")])],1)],1),e(Kt.Z,{ref:"form",attrs:{disabled:"del"===t.value},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},["slack"===t.type?e("IntegrationFormSlack",{attrs:{form:t.form}}):t._e(),"teams"===t.type?e("IntegrationFormTeams",{attrs:{form:t.form}}):t._e(),"pagerduty"===t.type?e("IntegrationFormPagerduty",{attrs:{form:t.form}}):t._e(),"opsgenie"===t.type?e("IntegrationFormOpsgenie",{attrs:{form:t.form}}):t._e(),"webhook"===t.type?e("IntegrationFormWebhook",{attrs:{form:t.form}}):t._e(),t.error?e(K.Z,{staticClass:"my-4",attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(" "+t._s(t.error)+" ")]):t._e(),t.message?e(K.Z,{staticClass:"my-4",attrs:{color:"green",outlined:"",text:""}},[t._v(" "+t._s(t.message)+" ")]):t._e(),e("div",{staticClass:"d-flex align-center"},[e(ct.Z),"del"===t.value?e(et.Z,{attrs:{color:"red",loading:t.saving},on:{click:t.del}},[t._v("Delete")]):[e(et.Z,{staticClass:"mr-4",attrs:{color:"accent",disabled:!t.valid,loading:t.testing},on:{click:t.test}},[t._v("Send test alert")]),e(et.Z,{attrs:{color:"primary",disabled:!t.valid,loading:t.saving},on:{click:t.save}},[t._v("Save")])]],2)],1)],1)],1)},pa=[],va=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"subtitle-1"},[t._v("Slack app")]),t._m(0),e(et.Z,{staticClass:"mt-3 mb-5",attrs:{href:t.href,target:"_blank",color:"primary"}},[t._v(" Create Slack app "),e(it.Z,{staticClass:"ml-1",attrs:{small:""}},[t._v("mdi-open-in-new")])],1),e("div",{staticClass:"subtitle-1"},[t._v("Slack app icon")]),t._m(1),e("div",{staticClass:"subtitle-1"},[t._v("Slack Bot User OAuth Token")]),t._m(2),e(wt.Z,{attrs:{outlined:"",dense:"",rules:[t.$validators.notEmpty]},model:{value:t.form.token,callback:function(e){t.$set(t.form,"token",e)},expression:"form.token"}}),e("div",{staticClass:"subtitle-1"},[t._v("Slack channel name")]),e("div",{staticClass:"caption"},[t._v("Open Slack, create a public channel and enter its name below.")]),e(wt.Z,{attrs:{outlined:"",dense:"",rules:[t.$validators.notEmpty]},scopedSlots:t._u([{key:"prepend-inner",fn:function(){return[e("span",{staticClass:"grey--text mt-1"},[t._v("#")])]},proxy:!0}]),model:{value:t.form.default_channel,callback:function(e){t.$set(t.form,"default_channel",e)},expression:"form.default_channel"}}),e("div",{staticClass:"subtitle-1"},[t._v("Notify of")]),e(hs.Z,{attrs:{label:"Incidents",dense:"","hide-details":""},model:{value:t.form.incidents,callback:function(e){t.$set(t.form,"incidents",e)},expression:"form.incidents"}}),e(hs.Z,{attrs:{label:"Deployments",dense:"","hide-details":""},model:{value:t.form.deployments,callback:function(e){t.$set(t.form,"deployments",e)},expression:"form.deployments"}})],1)},fa=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"caption"},[t._v(" Click the button below to create your Slack App using the codexray configuration. "),e("br"),t._v(" Once created, click "),e("b",[t._v("Install to workspace")]),t._v(" to authorize it. ")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"caption mb-4"},[t._v(" Customize the image (you can use the "),e("a",{attrs:{href:"https://codexray.com/static/img/codexray_512.png",target:"_blank"}},[t._v("codexray logo")]),t._v(") ")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"caption"},[t._v("Click on "),e("b",[t._v("OAuth and Permissions")]),t._v(" in the sidebar, copy the "),e("b",[t._v("Bot User OAuth Token")]),t._v(" and paste it here.")])}];const _a="\ndisplay_information:\n\n  name: codexray\n  description: Track SLOs of your services\nfeatures:\n  bot_user:\n    display_name: codexray\noauth_config:\n  scopes:\n    bot:\n      - channels:read\n      - chat:write\n      - chat:write.public\n";var ga={props:{form:Object},computed:{href(){return"https://api.slack.com/apps?new_app=1&manifest_yaml="+encodeURIComponent(_a)}}},ya=ga,ba=(0,_t.Z)(ya,va,fa,!1,null,"ef0c2f88",null),xa=ba.exports,wa=function(){var t=this,e=t._self._c;return e("div",[t._m(0),e("ol",{staticClass:"mb-4 caption"},[t._m(1),e("li",[t._v("Choose a channel (or create a new one)")]),e("li",[t._v("Select "),e(it.Z,{attrs:{color:"black"}},[t._v("mdi-dots-horizontal")]),t._v(" from the top navigation menu and choose "),e("b",[t._v("Connectors")])],1),t._m(2),t._m(3),e("li",[t._v("Copy the webhook URL and paste it below")])]),e("div",{staticClass:"subtitle-1"},[t._v("Webhook URL")]),e(wt.Z,{attrs:{outlined:"",dense:"",rules:[t.$validators.notEmpty]},model:{value:t.form.webhook_url,callback:function(e){t.$set(t.form,"webhook_url",e)},expression:"form.webhook_url"}}),e("div",{staticClass:"subtitle-1"},[t._v("Notify of")]),e(hs.Z,{attrs:{label:"Incidents",dense:"","hide-details":""},model:{value:t.form.incidents,callback:function(e){t.$set(t.form,"incidents",e)},expression:"form.incidents"}}),e(hs.Z,{attrs:{label:"Deployments",dense:"","hide-details":""},model:{value:t.form.deployments,callback:function(e){t.$set(t.form,"deployments",e)},expression:"form.deployments"}})],1)},ka=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"subtitle-1"},[t._v("To configure an "),e("b",[t._v("Incoming webhook connector")]),t._v(" in your Microsoft Teams:")])},function(){var t=this,e=t._self._c;return e("li",[t._v("Navigate to "),e("b",[t._v("Teams")])])},function(){var t=this,e=t._self._c;return e("li",[t._v("Search for "),e("b",[t._v("Incoming Webhook")]),t._v(" and press the "),e("b",[t._v("Configure")]),t._v(" button")])},function(){var t=this,e=t._self._c;return e("li",[t._v(" Provide a name for the webhook (e.g. "),e("i",[t._v("codexray")]),t._v("), customize the image (you can use the "),e("a",{attrs:{href:"https://codexray.com/static/img/codexray.png",target:"_blank"}},[t._v("codexray logo")]),t._v("), and click "),e("b",[t._v("Create")])])}],Ca={props:{form:Object}},Za=Ca,$a=(0,_t.Z)(Za,wa,ka,!1,null,"1c06591e",null),Sa=$a.exports,Ia=function(){var t=this,e=t._self._c;return e("div",[t._m(0),t._m(1),e("div",{staticClass:"subtitle-1"},[t._v("Integration Key")]),e(wt.Z,{attrs:{outlined:"",dense:"",rules:[t.$validators.notEmpty]},model:{value:t.form.integration_key,callback:function(e){t.$set(t.form,"integration_key",e)},expression:"form.integration_key"}}),e("div",{staticClass:"subtitle-1"},[t._v("Notify of")]),e(hs.Z,{attrs:{label:"Incidents",dense:"","hide-details":""},model:{value:t.form.incidents,callback:function(e){t.$set(t.form,"incidents",e)},expression:"form.incidents"}}),e(hs.Z,{attrs:{value:!1,disabled:"",label:"Deployments (unavailable for Pagerduty integrations)",dense:"","hide-details":""}})],1)},qa=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"subtitle-1"},[t._v("To configure an "),e("b",[t._v("Events API V2")]),t._v(" integration in your Pagerduty account:")])},function(){var t=this,e=t._self._c;return e("ol",{staticClass:"mb-4 caption"},[e("li",[t._v("Navigate to "),e("b",[t._v("Services")]),t._v(" → "),e("b",[t._v("Service Directory")])]),e("li",[t._v("Choose a target service (or create a new one)")]),e("li",[t._v("Go to "),e("b",[t._v("Integrations")]),t._v(" → "),e("b",[t._v("+ Add another integration")]),t._v(" and create the "),e("b",[t._v("Events API V2")]),t._v(" integration")]),e("li",[t._v("Change the "),e("b",[t._v("Integration Name")]),t._v(", if necessary (e.g. "),e("i",[t._v("codexray")]),t._v(")")]),e("li",[t._v("Copy the "),e("b",[t._v("Integration Key")]),t._v(" and paste it below")])])}],Pa={props:{form:Object}},Aa=Pa,Oa=(0,_t.Z)(Aa,Ia,qa,!1,null,"244e39af",null),Ta=Oa.exports,ja=function(){var t=this,e=t._self._c;return e("div",[t._m(0),t._m(1),e("div",{staticClass:"subtitle-1"},[t._v("API Key")]),e("div",{staticClass:"d-flex"},[e(wt.Z,{attrs:{outlined:"",dense:"",rules:[t.$validators.notEmpty]},model:{value:t.form.api_key,callback:function(e){t.$set(t.form,"api_key",e)},expression:"form.api_key"}}),e(hs.Z,{staticClass:"ml-3",attrs:{label:"EU instance of Opsgenie",dense:"","hide-details":""},model:{value:t.form.eu_instance,callback:function(e){t.$set(t.form,"eu_instance",e)},expression:"form.eu_instance"}})],1),e("div",{staticClass:"subtitle-1"},[t._v("Notify of")]),e(hs.Z,{attrs:{label:"Incidents",dense:"","hide-details":""},model:{value:t.form.incidents,callback:function(e){t.$set(t.form,"incidents",e)},expression:"form.incidents"}}),e(hs.Z,{attrs:{value:!1,disabled:"",label:"Deployments (unavailable for Opsgenie integrations)",dense:"","hide-details":""}})],1)},Ea=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"subtitle-1"},[t._v("To configure an "),e("b",[t._v("Rest HTTP API")]),t._v(" integration in your Opsgenie account:")])},function(){var t=this,e=t._self._c;return e("ol",{staticClass:"mb-4 caption"},[e("li",[t._v("Navigate to the "),e("b",[t._v("Teams")]),t._v(" page")]),e("li",[t._v("Choose a team (or create a new one)")]),e("li",[t._v("Go to "),e("b",[t._v("Integrations")]),t._v(" → "),e("b",[t._v("Add integration")]),t._v(" and create an "),e("b",[t._v("API")]),t._v(" integration")]),e("li",[t._v("Change the "),e("b",[t._v("Name")]),t._v(", if necessary (e.g. "),e("i",[t._v("codexray")]),t._v(")")]),e("li",[t._v("Adjust permissions (codexray requires only "),e("b",[t._v("Create and Update Access")]),t._v(")")]),e("li",[t._v("Press "),e("b",[t._v("Save Integration")])]),e("li",[t._v("Copy the "),e("b",[t._v("API Key")]),t._v(" and paste it below")])])}],La={props:{form:Object}},Na=La,Ma=(0,_t.Z)(Na,ja,Ea,!1,null,"66623419",null),za=Ma.exports,Fa=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"subtitle-1"},[t._v("Webhook URL")]),e(wt.Z,{attrs:{outlined:"",dense:"",rules:[t.$validators.notEmpty],"hide-details":""},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}}),e(hs.Z,{attrs:{disabled:!(t.form.url||"").startsWith("https"),label:"Skip TLS verify","hide-details":""},model:{value:t.form.tls_skip_verify,callback:function(e){t.$set(t.form,"tls_skip_verify",e)},expression:"form.tls_skip_verify"}}),e(hs.Z,{staticClass:"my-2",attrs:{label:"HTTP basic auth","hide-details":""},model:{value:t.basic_auth,callback:function(e){t.basic_auth=e},expression:"basic_auth"}}),t.basic_auth?e("div",{staticClass:"d-flex gap"},[e(wt.Z,{attrs:{outlined:"",dense:"",label:"username","hide-details":"","single-line":""},model:{value:t.form.basic_auth.user,callback:function(e){t.$set(t.form.basic_auth,"user",e)},expression:"form.basic_auth.user"}}),e(wt.Z,{attrs:{label:"password",type:"password",outlined:"",dense:"","hide-details":"","single-line":""},model:{value:t.form.basic_auth.password,callback:function(e){t.$set(t.form.basic_auth,"password",e)},expression:"form.basic_auth.password"}})],1):t._e(),e(hs.Z,{staticClass:"my-2",attrs:{label:"Custom HTTP headers","hide-details":""},model:{value:t.custom_headers,callback:function(e){t.custom_headers=e},expression:"custom_headers"}}),t.custom_headers?[t._l(t.form.custom_headers,(function(s,a){return e("div",{key:a,staticClass:"d-flex mb-2 align-center",staticStyle:{gap:"8px"}},[e(wt.Z,{attrs:{outlined:"",dense:"",label:"header","hide-details":"","single-line":""},model:{value:s.key,callback:function(e){t.$set(s,"key",e)},expression:"h.key"}}),e(wt.Z,{attrs:{outlined:"",dense:"",label:"value","hide-details":"","single-line":""},model:{value:s.value,callback:function(e){t.$set(s,"value",e)},expression:"h.value"}}),e(et.Z,{attrs:{icon:"",small:""},on:{click:function(e){return t.form.custom_headers.splice(a,1)}}},[e(it.Z,{attrs:{small:""}},[t._v("mdi-trash-can-outline")])],1)],1)})),e(et.Z,{attrs:{color:"primary",small:""},on:{click:function(e){return t.form.custom_headers.push({key:"",value:""})}}},[t._v("Add header")])]:t._e(),e("div",{staticClass:"subtitle-1 mt-5"},[t._v("Notify of")]),e(hs.Z,{attrs:{label:"Incidents",dense:"","hide-details":""},model:{value:t.form.incidents,callback:function(e){t.$set(t.form,"incidents",e)},expression:"form.incidents"}}),e(hs.Z,{attrs:{label:"Deployments",dense:""},model:{value:t.form.deployments,callback:function(e){t.$set(t.form,"deployments",e)},expression:"form.deployments"}}),e("div",{staticClass:"subtitle-1"},[t._v("Incident template")]),e(aa.Z,{attrs:{outlined:"",dense:"",rules:t.form.incidents?[t.$validators.notEmpty]:[]},model:{value:t.form.incident_template,callback:function(e){t.$set(t.form,"incident_template",e)},expression:"form.incident_template"}}),e("div",{staticClass:"subtitle-1"},[t._v("Deployment template")]),e(aa.Z,{attrs:{outlined:"",dense:"",rules:t.form.deployments?[t.$validators.notEmpty]:[]},model:{value:t.form.deployment_template,callback:function(e){t.$set(t.form,"deployment_template",e)},expression:"form.deployment_template"}})],2)},Da=[],Ra={props:{form:Object},data(){return{basic_auth:!!this.form.basic_auth,custom_headers:!!this.form.custom_headers}},watch:{form(){this.form.basic_auth||(this.form.basic_auth={user:"",password:""}),this.form.custom_headers||(this.form.custom_headers=[])}}},Ha=Ra,Va=(0,_t.Z)(Ha,Fa,Da,!1,null,"7440ad11",null),Ua=Va.exports,Ba={props:{value:String,type:String,title:String},components:{IntegrationFormSlack:xa,IntegrationFormTeams:Sa,IntegrationFormPagerduty:Ta,IntegrationFormOpsgenie:za,IntegrationFormWebhook:Ua},data(){return{dialog:!!this.value,loading:!1,error:"",message:"",saving:!1,testing:!1,valid:!1,form:{}}},watch:{dialog(t){this.$emit("input",t?this.value:"")}},mounted(){this.get()},methods:{get(){this.loading=!0,this.error="",this.$api.getIntegrations(this.type,((t,e)=>{this.loading=!1,e?this.error=e:("new"===this.value&&this.$refs.form&&this.$refs.form.resetValidation(),this.form=t)}))},save(){this.saving=!0,this.error="",this.message="",this.$api.saveIntegrations(this.type,"save",this.form,((t,e)=>{this.saving=!1,e?this.error=e:(this.$events.emit("refresh"),this.message="Settings were successfully updated.",setTimeout((()=>{this.message=""}),1e3))}))},del(){this.saving=!0,this.error="",this.message="",this.$api.saveIntegrations(this.type,"del",null,((t,e)=>{this.saving=!1,e?this.error=e:(this.$events.emit("refresh"),this.dialog=!1)}))},test(){this.testing=!0,this.error="",this.message="",this.$api.saveIntegrations(this.type,"test",this.form,((t,e)=>{this.testing=!1,e?this.error=e:(this.message="A test alert has been successfully sent.",setTimeout((()=>{this.message=""}),3e3))}))}}},Wa=Ba,Qa=(0,_t.Z)(Wa,ha,pa,!1,null,"32dd5443",null),Ja=Qa.exports,Ga={props:{projectId:String},components:{IntegrationForm:Ja},data(){return{loading:!1,error:"",message:"",saving:!1,form:{base_url:""},integrations:[],integration:{},action:""}},mounted(){this.get(),this.$events.watch(this,this.get,"refresh")},watch:{projectId(){this.get()}},methods:{open(t,e){this.integration=t,this.action=e},get(){this.loading=!0,this.error="",this.$api.getIntegrations("",((t,e)=>{this.loading=!1,e?this.error=e:(this.form.base_url=t.base_url,this.form.base_url||(this.form.base_url=location.origin+this.$codexray.base_path,this.$api.saveIntegrations("","save",this.form,(()=>{}))),this.integrations=t.integrations)}))},save(){this.saving=!0,this.error="",this.message="",this.$api.saveIntegrations("","save",this.form,((t,e)=>{this.saving=!1,e?this.error=e:(this.message="Settings were successfully updated.",setTimeout((()=>{this.message=""}),1e3),this.get())}))}}},Ya=Ga,Ka=(0,_t.Z)(Ya,da,ua,!1,null,"6600f5a2",null),Xa=Ka.exports,ti=function(){var t=this,e=t._self._c;return e(Kt.Z,{ref:"form",staticStyle:{"max-width":"800px"},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[t.form.global?e(K.Z,{attrs:{color:"primary",outlined:"",text:""}},[t._v("This project uses a global Prometheus configuration that can't be changed through the UI")]):t._e(),e("div",{staticClass:"subtitle-1"},[t._v("Prometheus URL")]),e("div",{staticClass:"caption"},[t._v("codexray works on top of the telemetry data stored in your Prometheus server.")]),e(wt.Z,{staticClass:"flex-grow-1",attrs:{outlined:"",dense:"",rules:[t.$validators.notEmpty,t.$validators.isUrl],placeholder:"https://prom.example.com:9090","hide-details":"auto","single-line":"",disabled:t.form.global},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}}),e(hs.Z,{staticClass:"my-2",attrs:{disabled:!t.form.url.startsWith("https")||t.form.global,label:"Skip TLS verify","hide-details":""},model:{value:t.form.tls_skip_verify,callback:function(e){t.$set(t.form,"tls_skip_verify",e)},expression:"form.tls_skip_verify"}}),e(hs.Z,{staticClass:"my-2",attrs:{label:"HTTP basic auth","hide-details":"",disabled:t.form.global},model:{value:t.basic_auth,callback:function(e){t.basic_auth=e},expression:"basic_auth"}}),t.basic_auth?e("div",{staticClass:"d-flex gap"},[e(wt.Z,{attrs:{outlined:"",dense:"",label:"username","hide-details":"","single-line":"",disabled:t.form.global},model:{value:t.form.basic_auth.user,callback:function(e){t.$set(t.form.basic_auth,"user",e)},expression:"form.basic_auth.user"}}),e(wt.Z,{attrs:{label:"password",type:"password",outlined:"",dense:"","hide-details":"","single-line":"",disabled:t.form.global},model:{value:t.form.basic_auth.password,callback:function(e){t.$set(t.form.basic_auth,"password",e)},expression:"form.basic_auth.password"}})],1):t._e(),e(hs.Z,{staticClass:"my-2",attrs:{label:"Custom HTTP headers","hide-details":"",disabled:t.form.global},model:{value:t.custom_headers,callback:function(e){t.custom_headers=e},expression:"custom_headers"}}),t.custom_headers?[t._l(t.form.custom_headers,(function(s,a){return e("div",{key:a,staticClass:"d-flex gap mb-2 align-center"},[e(wt.Z,{attrs:{outlined:"",dense:"",label:"header","hide-details":"","single-line":"",disabled:t.form.global},model:{value:s.key,callback:function(e){t.$set(s,"key",e)},expression:"h.key"}}),e(wt.Z,{attrs:{outlined:"",dense:"",type:"password",label:"value","hide-details":"","single-line":"",disabled:t.form.global},model:{value:s.value,callback:function(e){t.$set(s,"value",e)},expression:"h.value"}}),e(et.Z,{attrs:{icon:"",small:"",disabled:t.form.global},on:{click:function(e){return t.form.custom_headers.splice(a,1)}}},[e(it.Z,{attrs:{small:""}},[t._v("mdi-trash-can-outline")])],1)],1)})),e(et.Z,{attrs:{color:"primary",disabled:t.form.global},on:{click:function(e){return t.form.custom_headers.push({key:"",value:""})}}},[t._v("Add header")])]:t._e(),e("div",{staticClass:"subtitle-1 mt-3"},[t._v("Refresh interval")]),e("div",{staticClass:"caption"},[t._v(" How often codexray retrieves telemetry data from a Prometheus. The value must be greater than the "),e("a",{attrs:{href:"https://prometheus.io/docs/prometheus/latest/configuration/configuration/",target:"_blank",rel:"noopener noreferrer"}},[e("var",[t._v("scrape_interval")])]),t._v(" of the Prometheus server. ")]),e(ps.Z,{attrs:{items:t.refreshIntervals,outlined:"",dense:"","menu-props":{offsetY:!0},disabled:t.form.global},model:{value:t.form.refresh_interval,callback:function(e){t.$set(t.form,"refresh_interval",e)},expression:"form.refresh_interval"}}),e("div",{staticClass:"subtitle-1"},[t._v("Extra selector")]),e("div",{staticClass:"caption"},[t._v("An additional metric selector that will be added to every Prometheus query (e.g. "),e("var",[t._v('{cluster="us-west-1"}')]),t._v(")")]),e(wt.Z,{attrs:{outlined:"",dense:"",rules:[t.$validators.isPrometheusSelector],"single-line":"",disabled:t.form.global},model:{value:t.form.extra_selector,callback:function(e){t.$set(t.form,"extra_selector",e)},expression:"form.extra_selector"}}),t.error?e(K.Z,{attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(" "+t._s(t.error)+" ")]):t._e(),t.message?e(K.Z,{attrs:{color:"green",outlined:"",text:""}},[t._v(" "+t._s(t.message)+" ")]):t._e(),e(et.Z,{attrs:{block:"",color:"primary",disabled:!t.valid||t.form.global,loading:t.loading},on:{click:t.save}},[t._v("Save")])],2)},ei=[];const si=[{value:5e3,text:"5 seconds"},{value:1e4,text:"10 seconds"},{value:15e3,text:"15 seconds"},{value:3e4,text:"30 seconds"},{value:6e4,text:"60 seconds"}];var ai={data(){return{form:{url:"",tls_skip_verify:!1,basic_auth:null,custom_headers:[],refresh_interval:0,extra_selector:""},basic_auth:!1,custom_headers:!0,valid:!1,loading:!1,error:"",message:""}},mounted(){this.get()},watch:{custom_headers(t){t&&!this.form.custom_headers.length&&this.form.custom_headers.push({key:"",value:""})}},computed:{refreshIntervals(){return si}},methods:{get(){this.loading=!0,this.error="",this.$api.getIntegrations("prometheus",((t,e)=>{this.loading=!1,e?this.error=e:(this.form=Object.assign({},this.form,t),this.form.basic_auth?this.basic_auth=!0:(this.form.basic_auth={user:"",password:""},this.basic_auth=!1),this.form.custom_headers||(this.form.custom_headers=[]),this.custom_headers=!!this.form.custom_headers.length)}))},save(){this.loading=!0,this.error="";const t=JSON.parse(JSON.stringify(this.form));this.basic_auth||(t.basic_auth=null),this.custom_headers||(t.custom_headers=[]),this.message="",this.$api.saveIntegrations("prometheus","save",t,((t,e)=>{this.loading=!1,e?this.error=e:(this.$events.emit("refresh"),this.message="Settings were successfully updated. The changes will take effect in a minute or two.",setTimeout((()=>{this.message=""}),3e3),this.get())}))}}},ii=ai,ri=(0,_t.Z)(ii,ti,ei,!1,null,"5c54dcb6",null),oi=ri.exports,ni=s(1260),li=s(9865),ci=function(){var t=this,e=t._self._c;return t.form?e(Kt.Z,{ref:"form",staticStyle:{"max-width":"800px"},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[t.form.global?e(K.Z,{attrs:{color:"primary",outlined:"",text:""}},[t._v("This project uses a global ClickHouse configuration that can't be changed through the UI")]):t._e(),e("div",{staticClass:"subtitle-1"},[t._v("Protocol")]),e(li.Z,{staticClass:"mt-0",attrs:{row:"",dense:"",disabled:t.form.global},model:{value:t.form.protocol,callback:function(e){t.$set(t.form,"protocol",e)},expression:"form.protocol"}},[e(ni.Z,{attrs:{label:"Native",value:"native"}}),e(ni.Z,{attrs:{label:"HTTP",value:"http"}})],1),e("div",{staticClass:"subtitle-1"},[t._v("Clickhouse address")]),e("div",{staticClass:"caption"}),e(wt.Z,{staticClass:"flex-grow-1",attrs:{outlined:"",dense:"",rules:[t.$validators.isAddr],placeholder:"clickhouse:9000","hide-details":"auto",clearable:"","single-line":"",disabled:t.form.global},model:{value:t.form.addr,callback:function(e){t.$set(t.form,"addr",e)},expression:"form.addr"}}),e("div",{staticClass:"subtitle-1 mt-3"},[t._v("Credentials")]),e("div",{staticClass:"d-flex gap"},[e(wt.Z,{attrs:{rules:[t.$validators.notEmpty],label:"username",outlined:"",dense:"","hide-details":"","single-line":"",disabled:t.form.global},model:{value:t.form.auth.user,callback:function(e){t.$set(t.form.auth,"user",e)},expression:"form.auth.user"}}),e(wt.Z,{attrs:{label:"password",type:"password",outlined:"",dense:"","hide-details":"","single-line":"",disabled:t.form.global},model:{value:t.form.auth.password,callback:function(e){t.$set(t.form.auth,"password",e)},expression:"form.auth.password"}})],1),e("div",{staticClass:"subtitle-1 mt-3"},[t._v("Database")]),e(wt.Z,{attrs:{rules:[t.$validators.notEmpty],outlined:"",dense:"","hide-details":"","single-line":"",disabled:t.form.global},model:{value:t.form.database,callback:function(e){t.$set(t.form,"database",e)},expression:"form.database"}}),e(hs.Z,{staticClass:"my-3",attrs:{label:"Enable TLS","hide-details":"",disabled:t.form.global},model:{value:t.form.tls_enable,callback:function(e){t.$set(t.form,"tls_enable",e)},expression:"form.tls_enable"}}),e(hs.Z,{staticClass:"my-2",attrs:{disabled:!t.form.tls_enable||t.form.global,label:"Skip TLS verify","hide-details":""},model:{value:t.form.tls_skip_verify,callback:function(e){t.$set(t.form,"tls_skip_verify",e)},expression:"form.tls_skip_verify"}}),t.error?e(K.Z,{attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(" "+t._s(t.error)+" ")]):t._e(),t.message?e(K.Z,{attrs:{color:"green",outlined:"",text:""}},[t._v(" "+t._s(t.message)+" ")]):t._e(),e("div",{staticClass:"mt-3"},[t.saved.addr&&!t.form.addr?e(et.Z,{attrs:{block:"",color:"error",loading:t.loading},on:{click:t.del}},[t._v("Delete")]):e(et.Z,{attrs:{block:"",color:"primary",disabled:!t.form.addr||!t.valid||t.form.global,loading:t.loading},on:{click:t.save}},[t._v("Test & Save")])],1)],1):t._e()},di=[],ui={data(){return{form:null,valid:!1,loading:!1,error:"",message:"",saved:null}},mounted(){this.get()},computed:{changed(){return JSON.stringify(this.form)!==JSON.stringify(this.saved)}},methods:{get(){this.loading=!0,this.error="",this.$api.getIntegrations("clickhouse",((t,e)=>{this.loading=!1,e?this.error=e:(this.form=t,this.saved=JSON.parse(JSON.stringify(this.form)))}))},save(){this.loading=!0,this.error="",this.message="";const t=JSON.parse(JSON.stringify(this.form));this.$api.saveIntegrations("clickhouse","save",t,((t,e)=>{this.loading=!1,e?this.error=e:(this.$events.emit("refresh"),this.message="Settings were successfully updated.",setTimeout((()=>{this.message=""}),1e3),this.get())}))},del(){this.saving=!0,this.error="",this.message="",this.$api.saveIntegrations("clickhouse","del",null,((t,e)=>{this.saving=!1,e?this.error=e:this.get()}))}}},mi=ui,hi=(0,_t.Z)(mi,ci,di,!1,null,"a5cee88c",null),pi=hi.exports,vi=s(4399),fi=function(){var t=this,e=t._self._c;return e("div",[e("p",[t._v(" This integration enables codexray to discover RDS and ElastiCache instances and collect their telemetry data. It requires permissions to describe RDS and ElastiCache instances, read their logs and read Enhanced Monitoring data from CloudWatch. ")]),e("p",[e("b",[t._v("Step #1")]),t._v(": create an "),e("a",{attrs:{href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_create-console.html#access_policies_create-json-editor",target:"_blank"}},[t._v(" IAM policy ")]),t._v(" with the "),e("a",{on:{click:function(e){t.policyDialog=!0}}},[t._v("following permissions")]),t._v(". ")]),e(Yt.Z,{attrs:{"max-width":"800"},model:{value:t.policyDialog,callback:function(e){t.policyDialog=e},expression:"policyDialog"}},[e(Gt.Z,{staticClass:"pa-5"},[e("div",{staticClass:"text-h6 d-flex mb-5"},[t._v(" MonitoringReadOnlyAccess role "),e(ct.Z),e(et.Z,{attrs:{icon:""},on:{click:function(e){t.policyDialog=!1}}},[e(it.Z,[t._v("mdi-close")])],1)],1),e("Code",[e("pre",[t._v('{\n    "Version": "2012-10-17",\n    "Statement": [\n        {\n            "Effect": "Allow",\n            "Action": [\n                "rds:DescribeDBInstances",\n                "rds:DescribeDBLogFiles",\n                "rds:DownloadDBLogFilePortion",\n                "rds:ListTagsForResource",\n                "elasticache:DescribeCacheClusters",\n                "elasticache:ListTagsForResource"\n            ],\n            "Resource": [\n                "*"\n            ]\n        },\n        {\n            "Effect": "Allow",\n            "Action": [\n                "logs:GetLogEvents"\n            ],\n            "Resource": [\n                "arn:aws:logs:*:*:log-group:RDSOSMetrics:log-stream:*"\n            ]\n        }\n    ]\n}\n                    ')])])],1)],1),t._m(0),t.form?e(Kt.Z,{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e("div",{staticClass:"subtitle-1 mt-3"},[t._v("Region")]),e("div",{staticClass:"caption"},[t._v("codexray only discovers RDS and ElastiCache instances within the specified region, e.g. "),e("var",[t._v("us-west-1")])]),e(wt.Z,{attrs:{rules:[t.$validators.notEmpty],outlined:"",dense:"","hide-details":"","single-line":"",clearable:""},model:{value:t.form.region,callback:function(e){t.$set(t.form,"region",e)},expression:"form.region"}}),e("div",{staticClass:"subtitle-1 mt-3"},[t._v("Access Key ID")]),e(wt.Z,{attrs:{rules:[t.$validators.notEmpty],outlined:"",dense:"","hide-details":"","single-line":""},model:{value:t.form.access_key_id,callback:function(e){t.$set(t.form,"access_key_id",e)},expression:"form.access_key_id"}}),e("div",{staticClass:"subtitle-1 mt-3"},[t._v("Secret Access Key")]),e(wt.Z,{attrs:{rules:[t.$validators.notEmpty],outlined:"",dense:"","hide-details":"","single-line":"",type:"password"},model:{value:t.form.secret_access_key,callback:function(e){t.$set(t.form,"secret_access_key",e)},expression:"form.secret_access_key"}}),e("div",{staticClass:"subtitle-1 mt-3"},[t._v("RDS tag filters")]),e("div",{staticClass:"caption"},[t._v(" You can limit the discovery of RDS instances by filtering them based on their tags. "),e("br"),t._v(" Specify tag_name=tag_value pairs, "),e("a",{attrs:{href:"https://en.wikipedia.org/wiki/Glob_(programming)",target:"_blank"}},[t._v("glob patterns")]),t._v(" are supported for the value part, e.g. "),e("var",[t._v("team=qa,env=staging*")]),t._v(". ")]),e(wt.Z,{attrs:{outlined:"",dense:"","hide-details":"","single-line":""},model:{value:t.rds_tag_filters,callback:function(e){t.rds_tag_filters=e},expression:"rds_tag_filters"}}),e("div",{staticClass:"subtitle-1 mt-3"},[t._v("ElastiCache tag filters")]),e("div",{staticClass:"caption"},[t._v(" You can limit the discovery of ElastiCache instances by filtering them based on their tags. "),e("br"),t._v(" Specify tag_name=tag_value pairs, "),e("a",{attrs:{href:"https://en.wikipedia.org/wiki/Glob_(programming)",target:"_blank"}},[t._v("glob patterns")]),t._v(" are supported for the value part, e.g. "),e("var",[t._v("team=qa,env=staging*")]),t._v(". ")]),e(wt.Z,{attrs:{outlined:"",dense:"","hide-details":"","single-line":""},model:{value:t.elasticache_tag_filters,callback:function(e){t.elasticache_tag_filters=e},expression:"elasticache_tag_filters"}}),t.error?e(K.Z,{staticClass:"mt-3",attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(" "+t._s(t.error)+" ")]):t._e(),t.message?e(K.Z,{staticClass:"mt-3",attrs:{color:"green",outlined:"",text:""}},[t._v(" "+t._s(t.message)+" ")]):t._e(),e("div",{staticClass:"mt-3"},[t.saved.region&&!t.form.region?e(et.Z,{attrs:{block:"",color:"error",loading:t.loading},on:{click:t.del}},[t._v("Delete")]):e(et.Z,{attrs:{block:"",color:"primary",disabled:!t.valid,loading:t.loading},on:{click:t.save}},[t._v("Save")])],1)],1):t._e(),e("h2",{staticClass:"text-h6 mt-10 mb-3"},[t._v("Discovery status")]),t.form&&!t.form.region?e(K.Z,{attrs:{color:"primary",outlined:"",text:""}},[t._v(" Not configured ")]):t.errors.length?e(K.Z,{staticClass:"pb-2",attrs:{color:"error",outlined:"",text:""}},t._l(t.errors,(function(s){return e("div",{staticClass:"mb-2"},[t._v("• "+t._s(s))])})),0):e(K.Z,{attrs:{color:"success",outlined:"",text:""}},[t._v(" OK ")]),e("h2",{staticClass:"text-h6 mt-10 mb-3"},[t._v("Discovered instances")]),e(vi.Z,{staticClass:"instances",attrs:{items:t.instances,"sort-by":"application_id","must-sort":"",dense:"","mobile-breakpoint":"0","items-per-page":20,"no-data-text":"No instances found",headers:[{value:"application_id",text:"Application",align:"start"},{value:"name",text:"Instance",align:"start"},{value:"status",text:"Status",align:"start"},{value:"engine",text:"Engine",align:"start"},{value:"engine_version",text:"Version",align:"start"},{value:"instance_type",text:"Instance type",align:"start"},{value:"availability_zone",text:"AZ",align:"start"}],"footer-props":{itemsPerPageOptions:[10,20,50,100,-1]}},scopedSlots:t._u([{key:"item.application_id",fn:function({item:s}){return[e("router-link",{staticClass:"text-no-wrap",attrs:{to:{name:"application",params:{id:s.application_id}}}},[t._v(" "+t._s(t.$utils.appId(s.application_id).name)+" ")])]}}])})],1)},_i=[function(){var t=this,e=t._self._c;return e("p",[e("b",[t._v("Step #2")]),t._v(": create an "),e("a",{attrs:{href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_users_create.html#id_users_create_console",target:"_blank"}},[t._v("IAM user")]),t._v(" with programmatic access, attach the policy to it and use AccessKeyID/SecretAccessKey in the form below. ")])}];function gi(t){return Object.entries(t||{}).map((([t,e])=>`${t}=${e}`)).join(", ")}function yi(t){const e={};return t.split(",").forEach((t=>{const[s,a]=t.split("=");s&&a&&s.trim()&&a.trim()&&(e[s.trim()]=a.trim())})),e}var bi={components:{Code:de},data(){return{form:null,valid:!1,loading:!1,error:"",message:"",rds_tag_filters:"",elasticache_tag_filters:"",saved:null,policyDialog:!1,errors:[],instances:[]}},mounted(){this.get()},methods:{get(){this.loading=!0,this.error="",this.$api.getIntegrations("aws",((t,e)=>{this.loading=!1,e?this.error=e:(this.form=t.form,this.rds_tag_filters=gi(this.form.rds_tag_filters),this.elasticache_tag_filters=gi(this.form.elasticache_tag_filters),this.saved=JSON.parse(JSON.stringify(this.form)),this.errors=t.view.errors||[],this.instances=t.view.instances||[])}))},save(){this.loading=!0,this.error="",this.message="",this.form.rds_tag_filters=yi(this.rds_tag_filters),this.form.elasticache_tag_filters=yi(this.elasticache_tag_filters);const t=JSON.parse(JSON.stringify(this.form));this.$api.saveIntegrations("aws","save",t,((t,e)=>{this.loading=!1,e?this.error=e:(this.message="Settings were successfully updated. The changes will take effect in a minute or two.",setTimeout((()=>{this.message=""}),3e3),this.get())}))},del(){this.loading=!0,this.error="",this.message="",this.$api.saveIntegrations("aws","del",null,((t,e)=>{this.loading=!1,e?this.error=e:this.get()}))}}},xi=bi,wi=(0,_t.Z)(xi,fi,_i,!1,null,"a6095132",null),ki=wi.exports,Ci=function(){var t=this,e=t._self._c;return e("div",[e(ns.Z,[e("thead",[e("tr",[e("th",[t._v("Application name")]),e("th",[t._v("Instance patterns")]),e("th",[t._v("Actions")])])]),e("tbody",t._l(t.applications,(function(s){return e("tr",[e("td",{staticClass:"text-no-wrap"},[e("div",{staticClass:"text-no-wrap"},[t._v(t._s(s.name))])]),e("td",{staticStyle:{"line-height":"2em"}},[t._l(s.instance_patterns.split(" ").filter((t=>!!t)),(function(s){return[e("span",{staticClass:"pattern"},[t._v(t._s(s))]),t._v("   ")]}))],2),e("td",[e("div",{staticClass:"d-flex"},[e(et.Z,{attrs:{icon:"",small:""},on:{click:function(e){return t.openForm(s)}}},[e(it.Z,{attrs:{small:""}},[t._v("mdi-pencil")])],1),e(et.Z,{attrs:{icon:"",small:""},on:{click:function(e){return t.openForm(s,!0)}}},[e(it.Z,{attrs:{small:""}},[t._v("mdi-trash-can-outline")])],1)],1)])])})),0)]),e(et.Z,{staticClass:"mt-3",attrs:{color:"primary",small:""},on:{click:function(e){return t.openForm()}}},[t._v("Add an application")]),e(Yt.Z,{attrs:{"max-width":"800"},model:{value:t.form.active,callback:function(e){t.$set(t.form,"active",e)},expression:"form.active"}},[e(Gt.Z,{staticClass:"pa-4"},[e("div",{staticClass:"d-flex align-center font-weight-medium mb-4"},[t.form.new?e("div",[t._v("Add a new custom application")]):t.form.del?e("div",[t._v('Delete the "'+t._s(t.form.name)+'" application')]):e("div",[t._v('Edit the "'+t._s(t.form.name)+'" application')]),e(ct.Z),e(et.Z,{attrs:{icon:""},on:{click:function(e){t.form.active=!1}}},[e(it.Z,[t._v("mdi-close")])],1)],1),e(Kt.Z,{ref:"form",model:{value:t.form.valid,callback:function(e){t.$set(t.form,"valid",e)},expression:"form.valid"}},[e("div",{staticClass:"subtitle-1"},[t._v("Name")]),e(wt.Z,{attrs:{outlined:"",dense:"",disabled:t.form.del,rules:[t.$validators.isSlug]},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),[e("div",{staticClass:"subtitle-1"},[t._v("Instance patterns")]),e("div",{staticClass:"caption"},[t._v(" space-delimited list of "),e("a",{attrs:{href:"https://en.wikipedia.org/wiki/Glob_(programming)",target:"_blank"}},[t._v("glob patterns")]),t._v(" for "),e("var",[t._v("instance_name")]),t._v(", e.g.: "),e("var",[t._v("mysql@node1 cassandra@cass-node*")])]),e(aa.Z,{attrs:{outlined:"",dense:"",rows:"1","auto-grow":"",disabled:t.form.del},model:{value:t.form.instance_patterns,callback:function(e){t.$set(t.form,"instance_patterns",e)},expression:"form.instance_patterns"}})],t.error?e(K.Z,{attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(" "+t._s(t.error)+" ")]):t._e(),t.message?e(K.Z,{attrs:{color:"green",outlined:"",text:""}},[t._v(" "+t._s(t.message)+" ")]):t._e(),e("div",{staticClass:"d-flex align-center"},[e(ct.Z),t.form.del?e(et.Z,{attrs:{color:"error",loading:t.saving},on:{click:t.save}},[t._v("Delete")]):e(et.Z,{attrs:{color:"primary",disabled:!t.form.valid,loading:t.saving},on:{click:t.save}},[t._v("Save")])],1)],2)],1)],1)],1)},Zi=[],$i={props:{projectId:String},data(){return{applications:[],loading:!1,error:"",message:"",form:{active:!1,new:!1,del:!1,oldName:"",name:"",instance_patterns:"",valid:!0},saving:!1}},mounted(){this.get()},watch:{projectId(){this.get()}},methods:{get(){this.loading=!0,this.error="",this.$api.getCustomApplications(((t,e)=>{if(this.loading=!1,e)return void(this.error=e);this.applications=t.custom_applications;const s=this.applications&&this.applications.find((t=>t.name===this.$route.query.custom_app))||{},a=this.$route.query.instance_pattern;(s.name||a)&&(a&&(s.instance_patterns?s.instance_patterns+=" "+a:s.instance_patterns=a),this.openForm(s),this.$router.replace({query:{...this.$route.query,custom_app:void 0,instance_pattern:void 0},hash:this.$route.hash}))}))},openForm(t,e){this.error="",this.form.active=!0,this.form.new=!t||!t.name,this.form.del=e,this.form.oldName=t?t.name:"",this.form.name=t?t.name:"",this.form.instance_patterns=t?t.instance_patterns:"",this.$refs.form&&this.$refs.form.resetValidation()},save(){this.saving=!0,this.error="",this.message="";const t=this.form.del?"":this.form.instance_patterns,e={name:this.form.oldName,new_name:this.form.name,instance_patterns:t};this.$api.saveCustomApplication(e,((t,e)=>{this.saving=!1,e?this.error=e:(this.message="Settings were successfully updated.",setTimeout((()=>{this.message="",this.form.active=!1}),1e3),this.get())}))}}},Si=$i,Ii=(0,_t.Z)(Si,Ci,Zi,!1,null,"065f36a0",null),qi=Ii.exports,Pi=function(){var t=this,e=t._self._c;return e("div",[t.error?e(K.Z,{attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(" "+t._s(t.error)+" ")]):t._e(),t.error?t._e():e(ns.Z,{attrs:{dense:""}},[e("thead",[e("tr",[e("th",[t._v("Email (Login)")]),e("th",[t._v("Name")]),e("th",[t._v("Role")]),e("th")])]),e("tbody",t._l(t.users,(function(s){return e("tr",[e("td",[t._v(t._s(s.email))]),e("td",[t._v(t._s(s.name))]),e("td",[t._v(t._s(s.role))]),e("td",[s.readonly?t._e():[e(et.Z,{attrs:{small:"",icon:""},on:{click:function(e){return t.update(s)}}},[e(it.Z,{attrs:{small:""}},[t._v("mdi-pencil")])],1),e(et.Z,{attrs:{small:"",icon:""},on:{click:function(e){return t.del(s)}}},[e(it.Z,{attrs:{small:""}},[t._v("mdi-trash-can-outline")])],1)]],2)])})),0),e("tfoot",[e(et.Z,{staticClass:"mt-3",attrs:{color:"primary",small:""},on:{click:function(e){return t.create(!1)}}},[t._v("Add user")])],1)]),e(Yt.Z,{attrs:{"max-width":"600"},model:{value:t.form.active,callback:function(e){t.$set(t.form,"active",e)},expression:"form.active"}},[e(Gt.Z,{staticClass:"pa-4"},[e("div",{staticClass:"d-flex align-center font-weight-medium mb-4"},[t._v(" "+t._s(t.form.title)+" "),e(ct.Z),e(et.Z,{attrs:{icon:""},on:{click:function(e){t.form.active=!1}}},[e(it.Z,[t._v("mdi-close")])],1)],1),e(Kt.Z,{ref:"form",model:{value:t.form.valid,callback:function(e){t.$set(t.form,"valid",e)},expression:"form.valid"}},[e("div",{staticClass:"font-weight-medium"},[t._v("Email (Login)")]),e(wt.Z,{attrs:{outlined:"",dense:"",type:"email",name:"email",disabled:t.form.readonly,rules:[t.$validators.isEmail]},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),e("div",{staticClass:"font-weight-medium"},[t._v("Name")]),e(wt.Z,{attrs:{outlined:"",dense:"",name:"name",disabled:t.form.readonly,rules:[t.$validators.notEmpty]},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),e("div",{staticClass:"font-weight-medium"},[t._v("Role")]),e(ps.Z,{attrs:{items:t.roles,name:"role",disabled:t.form.readonly,outlined:"",dense:"","menu-props":{offsetY:!0},rules:[t.$validators.notEmpty]},model:{value:t.form.role,callback:function(e){t.$set(t.form,"role",e)},expression:"form.role"}}),e("div",{staticClass:"font-weight-medium"},[t._v("Password")]),e(wt.Z,{attrs:{outlined:"",dense:"",type:"password",name:"password",disabled:t.form.readonly,rules:"create"===t.form.action?[t.$validators.notEmpty]:[]},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),t.form.error?e(K.Z,{attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(t._s(t.form.error))]):t._e(),t.form.message?e(K.Z,{attrs:{color:"green",outlined:"",text:""}},[t._v(t._s(t.form.message))]):t._e(),e("div",{staticClass:"d-flex align-center"},[e(ct.Z),e(et.Z,{attrs:{color:t.form.button.color,disabled:!t.form.valid,loading:t.form.loading},on:{click:t.post}},[t._v(t._s(t.form.button.text))])],1)],1)],1)],1)],1)},Ai=[],Oi={data(){return{users:[],roles:[],loading:!1,error:"",message:"",form:{active:!1,loading:!1,valid:!0,readonly:!1,error:"",message:"",title:"",button:{text:"",color:"primary"},action:"",id:0,name:"",email:"",role:"",password:""}}},mounted(){this.$events.watch(this,this.get,"roles"),this.get()},methods:{get(){this.loading=!0,this.error="",this.$api.users(null,((t,e)=>{this.loading=!1,e?this.error=e:(this.users=t.users||[],this.roles=t.roles||[])}))},post(){this.form.loading=!0;const{id:t,action:e,name:s,email:a,role:i,password:r}=this.form;this.$api.users({id:t,action:e,name:s,email:a,role:i,password:r},((t,e)=>{this.form.loading=!1,e?this.form.error=e:(this.form.active=!1,this.get())}))},create(){this.form.message="",this.form.error="",this.form.active=!0,this.form.readonly=!1,this.form.title="New user",this.form.button.text="Create",this.form.button.color="primary",this.form.action="create",this.form.name="",this.form.email="",this.form.role="",this.form.password="",this.$refs.form&&this.$refs.form.resetValidation()},update(t){this.form.message="",this.form.error="",this.form.active=!0,this.form.readonly=!1,this.form.title="Edit user",this.form.button.text="Save",this.form.button.color="primary",this.form.action="update",this.form.id=t.id,this.form.name=t.name,this.form.email=t.email,this.form.role=t.role,this.form.password="",this.$refs.form&&this.$refs.form.resetValidation()},del(t){this.form.message="",this.form.error="",this.form.active=!0,this.form.readonly=!0,this.form.title="Delete user",this.form.button.text="Delete",this.form.button.color="error",this.form.action="delete",this.form.id=t.id,this.form.name=t.name,this.form.email=t.email,this.form.role=t.role,this.form.password="",this.$refs.form&&this.$refs.form.resetValidation()}}},Ti=Oi,ji=(0,_t.Z)(Ti,Pi,Ai,!1,null,"0eb98238",null),Ei=ji.exports,Li=s(9850),Ni=function(){var t=this,e=t._self._c;return e("div",[t.disabled?e(K.Z,{attrs:{color:"info",outlined:"",text:""}},[t._v(" codexray Community Edition includes three predefined roles: Admin, Editor, and Viewer. "),e("br"),t._v(" For more granular Role-Based Access Control (RBAC), upgrade to codexray Enterprise (from $1 per CPU core/month). "),e("a",{staticClass:"font-weight-bold",attrs:{href:"https://codexray.com/account",target:"_blank"}},[t._v("Start")]),t._v(" your free trial today. ")]):t._e(),e(ns.Z,{staticClass:"mt-5",attrs:{dense:""}},[e("thead",[e("tr",[e("th",[t._v("Action")]),t._l(t.roles,(function(s){return e("th",{staticClass:"text-no-wrap"},[e("span",[t._v(t._s(s.name))]),t.disabled&&s.custom?e("span",[t._v("*")]):t._e(),s.custom?e(et.Z,{attrs:{small:"",icon:""},on:{click:function(e){return t.edit(s)}}},[e(it.Z,{attrs:{"x-small":""}},[t._v("mdi-pencil")])],1):t._e()],1)}))],2)]),e("tbody",t._l(t.actions,(function(s){return e("tr",[e("td",[t._v(t._s(s.name))]),t._l(s.roles,(function(s){return e("td",[s.objects?s.objects.length?e(Li.Z,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:s}){return[e(it.Z,t._g({attrs:{small:"",color:"green"}},s),[t._v("mdi-list-status")])]}}],null,!0)},[e(Gt.Z,{staticClass:"pa-2"},t._l(s.objects,(function(s){return e("div",[t._v(t._s(s))])})),0)],1):e(it.Z,{attrs:{small:"",color:"green"}},[t._v("mdi-check-bold")]):e(it.Z,{attrs:{small:"",color:"red"}},[t._v("mdi-close-thick")])],1)}))],2)})),0)]),e(et.Z,{staticClass:"mt-3",attrs:{color:"primary",small:"",disabled:t.disabled},on:{click:function(e){return t.add()}}},[t._v("Add role")]),t.disabled?e("div",{staticClass:"mt-2 grey--text"},[t._v("* - examples of fine-grained custom roles")]):t._e(),e(Yt.Z,{attrs:{"max-width":"800"},model:{value:t.form.active,callback:function(e){t.$set(t.form,"active",e)},expression:"form.active"}},[e(Gt.Z,{staticClass:"pa-4"},[e("div",{staticClass:"d-flex align-center font-weight-medium mb-4"},[t._v(" "+t._s(t.form.title)+" "),"edit"===t.form.action?e(et.Z,{attrs:{disabled:t.disabled,icon:"",small:""},on:{click:function(e){t.form.action="delete"}}},[e(it.Z,{attrs:{small:""}},[t._v("mdi-trash-can-outline")])],1):t._e(),e(ct.Z),e(et.Z,{attrs:{icon:""},on:{click:function(e){t.form.active=!1}}},[e(it.Z,[t._v("mdi-close")])],1)],1),e(Kt.Z,{ref:"form",staticClass:"form",attrs:{disabled:t.disabled},model:{value:t.form.valid,callback:function(e){t.$set(t.form,"valid",e)},expression:"form.valid"}},[e("div",{staticClass:"font-weight-medium"},[t._v("Name")]),e(wt.Z,{attrs:{outlined:"",dense:"",rules:[t.$validators.notEmpty]},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),e("div",{staticClass:"font-weight-medium"},[t._v("Permission policies")]),e(ns.Z,{staticClass:"mb-4 mt-2",attrs:{dense:""}},[e("thead",[e("tr",[e("th",{staticStyle:{width:"40%"}},[t._v("Scope")]),e("th",{staticStyle:{width:"15%"}},[t._v("Action")]),e("th",[t._v("Object")]),e("th",{staticStyle:{width:"5%"}})])]),e("tbody",t._l(t.form.permissions,(function(s,a){return e("tr",[e("td",[e(ps.Z,{attrs:{items:t.scopes.map((t=>t.name)),outlined:"",dense:"","hide-details":"","menu-props":{offsetY:!0},rules:[t.$validators.notEmpty]},model:{value:s.scope,callback:function(e){t.$set(s,"scope",e)},expression:"p.scope"}})],1),e("td",[e(ps.Z,{attrs:{items:(t.scopes.find((t=>t.name===s.scope))||{}).actions,outlined:"",dense:"","hide-details":"","menu-props":{offsetY:!0},rules:[t.$validators.notEmpty]},model:{value:s.action,callback:function(e){t.$set(s,"action",e)},expression:"p.action"}})],1),e("td",[e(wt.Z,{attrs:{outlined:"",dense:"","hide-details":""},model:{value:s.object,callback:function(e){t.$set(s,"object",e)},expression:"p.object"}})],1),e("td",[e(et.Z,{attrs:{small:"",icon:"",disabled:t.disabled},on:{click:function(e){return t.form.permissions.splice(a,1)}}},[e(it.Z,{attrs:{small:""}},[t._v("mdi-trash-can-outline")])],1)],1)])})),0),e("tfoot",[e(et.Z,{staticClass:"ml-1 mt-2",attrs:{color:"primary",small:"",disabled:t.disabled},on:{click:function(e){return t.form.permissions.push({scope:"",action:"",object:""})}}},[t._v(" Add policy ")])],1)]),t.disabled?e("div",{staticClass:"mb-2 caption grey--text"},[t._v(" This form is disabled because adjusting role permissions is not supported in the codexray Community Edition. ")]):t._e(),t.form.error?e(K.Z,{attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(t._s(t.form.error))]):t._e(),t.form.message?e(K.Z,{attrs:{color:"green",outlined:"",text:""}},[t._v(t._s(t.form.message))]):t._e(),e("div",{staticClass:"d-flex align-center"},[e(ct.Z),"delete"===t.form.action?[e("div",[t._v("Are you sure you want to delete the role?")]),e(et.Z,{staticClass:"ml-2",attrs:{color:"error",disabled:t.disabled,loading:t.form.loading,small:""},on:{click:t.post}},[t._v("Delete")]),e(et.Z,{staticClass:"ml-2",attrs:{color:"info",small:""},on:{click:function(e){t.form.action="edit"}}},[t._v("Cancel")])]:[e(et.Z,{attrs:{color:"primary",disabled:t.disabled||!t.form.valid,loading:t.form.loading},on:{click:t.post}},[t._v("Save")])]],2)],1)],1)],1)],1)},Mi=[],zi={data(){return{loading:!1,error:"",disabled:!0,roles:[],actions:[],scopes:[],form:{active:!1,valid:!0,loading:!1,error:"",message:"",title:"",action:"",id:"",name:"",permissions:[]}}},mounted(){this.get()},methods:{get(){this.loading=!0,this.error="",this.$api.roles(null,((t,e)=>{this.loading=!1,e?this.error=e:(this.disabled=!t.configurable,this.roles=t.roles||[],this.actions=t.actions||[],this.scopes=t.scopes||[])}))},post(){const{action:t,id:e,name:s,permissions:a}=this.form;this.form.loading=!0;const i={action:t,id:e,name:s,permissions:a};this.$api.roles(i,((t,e)=>{this.form.loading=!1,e?this.form.error=e:(this.$events.emit("roles"),this.form.active=!1,this.get())}))},add(){this.form.message="",this.form.error="",this.form.active=!0,this.form.title="Add role",this.form.action="add",this.form.name="",this.form.permissions=[{scope:"",action:"",object:""}],this.$refs.form&&this.$refs.form.resetValidation()},edit(t){this.form.message="",this.form.error="",this.form.active=!0,this.form.title="Edit role",this.form.action="edit",this.form.id=t.name,this.form.name=t.name,this.form.permissions=(t.permissions||[]).map((({scope:t,action:e,object:s})=>({scope:t,action:e,object:s?JSON.stringify(s):"*"}))),this.$refs.form&&this.$refs.form.resetValidation()}}},Fi=zi,Di=(0,_t.Z)(Fi,Ni,Mi,!1,null,"34db0416",null),Ri=Di.exports,Hi=function(){var t=this,e=t._self._c;return e("div",[t.disabled?e(K.Z,{attrs:{color:"info",outlined:"",text:""}},[t._v(" Single Sign-On through SAML is available only in codexray Enterprise (from $1 per CPU core/month). "),e("a",{staticClass:"font-weight-bold",attrs:{href:"https://codexray.com/account",target:"_blank"}},[t._v("Start")]),t._v(" your free trial today. ")]):t._e(),e(ns.Z,{staticClass:"params",attrs:{dense:""}},[e("tbody",[e("tr",[e("td",{staticClass:"font-weight-medium text-no-wrap"},[t._v("Status")]),e("td",[t.active?e("div",[t.active?e(it.Z,{staticClass:"mr-1",attrs:{color:"success",size:"20"}},[t._v("mdi-check-circle")]):t._e(),t._v(" Enabled ")],1):e("div",[t._v("Disabled")])])]),e("tr",[e("td",{staticClass:"font-weight-medium text-no-wrap"},[t._v("Identity Provider:")]),e("td",[t.provider?e("span",{staticStyle:{"vertical-align":"middle"}},[t._v(t._s(t.provider))]):t._e(),e("input",{ref:"file",staticClass:"d-none",attrs:{type:"file",accept:".xml"},on:{change:t.upload}}),t.provider?e(et.Z,{attrs:{disabled:t.disabled||t.loading,small:"",icon:""},on:{click:function(e){return t.$refs.file.click()}}},[e(it.Z,{attrs:{small:""}},[t._v("mdi-pencil")])],1):e(et.Z,{attrs:{color:"primary",small:"",disabled:t.disabled||t.loading},on:{click:function(e){return t.$refs.file.click()}}},[t._v(" Upload Identity Provider Metadata XML ")])],1)]),e("tr",[e("td",{staticClass:"font-weight-medium text-no-wrap"},[t._v("Service Provider Issuer / Identity ID:")]),e("td",[t._v(t._s(t.asc_url)+" "),e("CopyButton",{attrs:{text:t.asc_url,disabled:t.disabled}})],1)]),e("tr",[e("td",{staticClass:"font-weight-medium text-no-wrap"},[t._v("Service Provider ACS URL / Single Sign On URL:")]),e("td",[t._v(t._s(t.asc_url)+" "),e("CopyButton",{attrs:{text:t.asc_url,disabled:t.disabled}})],1)]),e("tr",[e("td",{staticClass:"font-weight-medium text-no-wrap"},[t._v("Attribute mapping:")]),e("td",[t._v(" codexray expects to receive the "),e("b",[t._v("Email")]),t._v(", "),e("b",[t._v("FirstName")]),t._v(", and "),e("b",[t._v("LastName")]),t._v(" attributes. "),e("br"),t._v(" Please configure Attribute Mapping on your Identity Provider's side. ")])]),e("tr",[e("td",{staticClass:"font-weight-medium text-no-wrap"},[t._v("Default role:")]),e("td",[e(ps.Z,{staticClass:"roles",attrs:{items:t.roles,disabled:t.disabled,outlined:"",dense:"","menu-props":{offsetY:!0},rules:[t.$validators.notEmpty],"hide-details":""},model:{value:t.default_role,callback:function(e){t.default_role=e},expression:"default_role"}})],1)])])]),t.error?e(K.Z,{staticClass:"mt-2",attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(" "+t._s(t.error)+" ")]):t._e(),e("div",{staticClass:"d-flex mt-2",staticStyle:{gap:"8px"}},[e(et.Z,{attrs:{color:"primary",small:"",disabled:t.disabled||t.loading||!t.provider},on:{click:t.save}},[t._v(" Save "),t.active?t._e():[t._v("and Enable")]],2),t.active?e(et.Z,{attrs:{color:"error",small:"",disabled:t.disabled||t.loading},on:{click:t.disable}},[t._v("Disable")]):t._e()],1)],1)},Vi=[],Ui=function(){var t=this,e=t._self._c;return e(et.Z,{attrs:{icon:"",small:"",disabled:t.disabled},on:{click:t.copy}},[e(it.Z,{attrs:{small:""}},[t._v(t._s(t.icon))])],1)},Bi=[],Wi={props:{text:String,disabled:Boolean},data(){return{copied:!1}},computed:{icon(){return this.copied?"mdi-check":"mdi-content-copy"}},methods:{copy(){const t=document.createElement("textarea");this.$el.appendChild(t),t.value=this.text,t.focus(),t.select();try{document.execCommand("copy"),this.copied=!0,setTimeout((()=>{this.copied=!1}),3e3)}finally{this.$el.removeChild(t)}}}},Qi=Wi,Ji=(0,_t.Z)(Qi,Ui,Bi,!1,null,null,null),Gi=Ji.exports,Yi={components:{CopyButton:Gi},computed:{asc_url(){return location.origin+this.$codexray.base_path+"sso/saml"}},data(){return{disabled:!0,loading:!1,error:"",active:!1,default_role:"",provider:"",sso_url:"",roles:[]}},mounted(){this.$events.watch(this,this.get,"roles"),this.get()},methods:{get(){this.loading=!0,this.error="",this.$api.sso(null,((t,e)=>{this.loading=!1,e?this.error=e:(this.disabled=!t.configurable,this.available=t.available,this.active=t.active,this.default_role=t.default_role,this.provider=t.provider,this.sso_url=t.sso_url,this.roles=t.roles||[])}))},post(t,e){this.loading=!0,this.alert={msg:"",color:""};const s={action:t,default_role:this.default_role,saml:e?{metadata:e}:void 0};this.$api.sso(s,((t,e)=>{this.loading=!1,console.log(e),e?this.error=e:this.get()}))},save(){this.post("save")},disable(){this.post("disable")},upload(t){const e=t.target.files[0];t.target.value="",e&&e.text().then((t=>{this.post("upload",t)}))},copy(t){const e=document.createElement("textarea");e.value=t,e.focus(),e.select();try{document.execCommand("copy"),this.copied=!0,setTimeout((()=>{this.copied=!1}),3e3)}finally{}}}},Ki=Yi,Xi=(0,_t.Z)(Ki,Hi,Vi,!1,null,"209d5a4e",null),tr=Xi.exports,er={props:{projectId:String,tab:String},components:{CustomApplications:qi,IntegrationPrometheus:oi,IntegrationClickhouse:pi,IntegrationAWS:ki,Inspections:sa,ProjectSettings:We,ProjectStatus:Xe,ProjectDelete:os,ApplicationCategories:ca,Integrations:Xa,Users:Ei,RBAC:Ri,SSO:tr},mounted(){this.tabs.find((t=>t.id===this.tab))||this.$router.replace({params:{tab:void 0}})},computed:{tabs(){const t=!this.projectId;return[{id:void 0,name:"General"},{id:"prometheus",name:"Prometheus",disabled:t},{id:"clickhouse",name:"Clickhouse",disabled:t},{id:"aws",name:"AWS",disabled:t},{id:"inspections",name:"Inspections",disabled:t},{id:"applications",name:"Applications",disabled:t},{id:"notifications",name:"Notifications",disabled:t},{id:"organization",name:"Organization"}]}}},sr=er,ar=(0,_t.Z)(sr,Fe,De,!1,null,"7efb793a",null),ir=ar.exports,rr=function(){var t=this,e=t._self._c;return e("div",["applications"===t.view?[t.id?e("Application",{attrs:{id:t.id,report:t.report}}):e("Applications")]:t._e(),"incidents"===t.view?[t.$route.query.incident?e("Incident"):e("Incidents")]:t._e(),"map"===t.view?[e("ServiceMap")]:t._e(),"nodes"===t.view?[t.id?e("Node",{attrs:{name:t.id}}):e("Nodes")]:t._e(),"EUM"===t.view?[e("NoData")]:t._e(),"traces"===t.view?[e("Traces")]:t._e(),"anomalies"===t.view?[t.id?e("RCA",{attrs:{appId:t.id}}):e("Anomalies")]:t._e()],2)},or=[],nr=s(7881),lr=function(){var t=this,e=t._self._c;return e("div",[t.loading?e(ts.Z,{attrs:{indeterminate:"",color:"green"}}):t._e(),t.error?e(K.Z,{attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(" "+t._s(t.error)+" ")]):t._e(),e("ApplicationFilter",{staticClass:"my-4",attrs:{applications:t.applications},on:{filter:t.setFilter}}),e("div",{staticClass:"cards"},t._l(t.statuses,(function(t){return e("Card",{key:t.name,attrs:{name:t.name,count:t.count,background:t.background,icon:t.color}})})),1),e("CustomTable",{staticClass:"table",attrs:{items:t.items,headers:t.headers},scopedSlots:t._u([{key:"item.application",fn:function({item:{id:s,name:a,ns:i,color:r}}){return[e("div",{staticClass:"application"},[e("div",{staticClass:"status",style:{backgroundColor:r}}),e("div",{staticClass:"name"},[e("router-link",{attrs:{to:t.link(s,void 0)}},[t._v(t._s(a))]),i?e("span",{staticClass:"caption grey--text"},[t._v(" (ns:"+t._s(i)+")")]):t._e()],1)])]}},{key:"item.type",fn:function({item:{id:s,type:a}}){return[a?e("div",{staticClass:"d-flex align-center"},[a.icon?e("img",{staticClass:"icon",attrs:{src:`${t.$codexray.base_path}static/img/tech-icons/${a.icon}.svg`,onerror:"this.style.display='none'",height:"16",width:"16"}}):t._e(),a.report?e("router-link",{staticClass:"type",class:a.status,attrs:{to:t.link(s,a.report)}},[t._v(" "+t._s(a.name)+" ")]):e("div",{staticClass:"type"},[t._v(" "+t._s(a.name)+" ")])],1):t._e()]}},{key:"item.errors",fn:function({item:{id:s,errors:a}}){return[e("router-link",{staticClass:"value",class:a.status,attrs:{to:t.link(s,"SLO")}},[t._v(t._s(a.value||"–"))])]}},{key:"item.latency",fn:function({item:{id:s,latency:a}}){return[e("router-link",{staticClass:"value",class:a.status,attrs:{to:t.link(s,"SLO")}},[t._v(t._s(a.value||"–"))])]}},{key:"item.upstreams",fn:function({item:{id:s,upstreams:a}}){return[e("router-link",{staticClass:"value",class:a.status,attrs:{to:t.link(s,"SLO")}},[t._v(t._s(a.value||"–"))])]}},{key:"item.instances",fn:function({item:{id:s,instances:a}}){return[e("router-link",{staticClass:"value",class:a.status,attrs:{to:t.link(s,"Instances")}},[t._v(t._s(a.value||"–"))])]}},{key:"item.restarts",fn:function({item:{id:s,restarts:a}}){return[e("router-link",{staticClass:"value",class:a.status,attrs:{to:t.link(s,"Instances")}},[t._v(t._s(a.value||"–"))])]}},{key:"item.cpu",fn:function({item:{id:s,cpu:a}}){return[e("router-link",{staticClass:"value",class:a.status,attrs:{to:t.link(s,"CPU")}},[t._v(t._s(a.value||"–"))])]}},{key:"item.memory",fn:function({item:{id:s,memory:a}}){return[e("router-link",{staticClass:"value",class:a.status,attrs:{to:t.link(s,"Memory")}},[t._v(t._s(a.value||"–"))])]}},{key:"item.disk_io_load",fn:function({item:{id:s,disk_io_load:a}}){return[e("router-link",{staticClass:"value",class:a.status,attrs:{to:t.link(s,"Storage")}},[t._v(t._s(a.value||"–"))])]}},{key:"item.disk_usage",fn:function({item:{id:s,disk_usage:a}}){return[e("router-link",{staticClass:"value",class:a.status,attrs:{to:t.link(s,"Storage")}},[t._v(t._s(a.value||"–"))])]}},{key:"item.network",fn:function({item:{id:s,network:a}}){return[e("router-link",{staticClass:"value",class:a.status,attrs:{to:t.link(s,"Net")}},[t._v(t._s(a.value||"–"))])]}},{key:"item.dns",fn:function({item:{id:s,dns:a}}){return[e("router-link",{staticClass:"value",class:a.status,attrs:{to:t.link(s,"DNS")}},[t._v(t._s(a.value||"–"))])]}},{key:"item.logs",fn:function({item:{id:s,logs:a}}){return[e("router-link",{staticClass:"logs",attrs:{to:t.link(s,"Logs",{query:JSON.stringify({source:"agent",view:"patterns"})})}},[e("div",{staticClass:"value"},[t._v(t._s(a.value||"–"))]),a.chart?e(nr.Z,{attrs:{value:a.chart.map((t=>null===t?0:t)),fill:"",smooth:"",padding:"4",color:"blue "+(t.$vuetify.theme.dark?"":"lighten-4"),height:"30",width:"120"}}):t._e()],1)]}}])})],1)},cr=[],dr=function(){var t=this,e=t._self._c;return e(vi.Z,{staticClass:"table",attrs:{dense:"","mobile-breakpoint":"0","hide-default-footer":"","hide-default-header":"","items-per-page":t.itemsPerPage,items:t.paginatedItems,headers:t.headers,options:t.options},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"header",fn:function(){return[e("tr",t._l(t.headers,(function(s){return e("th",{key:s.value},[e("div",{staticClass:"header-content"},[e("span",[t._v(t._s(s.text))]),s.sortable?e("div",{staticClass:"sort-buttons"},[e("button",{class:t.getSortIconClass(s,!1),on:{click:function(e){return t.sort(s,!1)}}},[t._v("▲")]),e("button",{class:t.getSortIconClass(s,!0),staticStyle:{"margin-top":"-3px"},on:{click:function(e){return t.sort(s,!0)}}},[t._v("▼")])]):t._e()])])})),0)]},proxy:!0},t._l(t.$scopedSlots,(function(e,s){return{key:s,fn:function(e){return[t._t(s,null,null,e)]}}})),{key:"footer",fn:function(){return[e("div",{staticClass:"customize-footer"},[e("div",{staticClass:"customize-index"},[t._v(t._s(t.currentPageFirstIndex)+" - "+t._s(t.currentPageLastIndex)+" of "+t._s(t.itemsLength)+" items")]),e("button",{staticClass:"prev-page",attrs:{disabled:t.isFirstPage},on:{click:t.prevPage}},[e(it.Z,[t._v("mdi-chevron-left")])],1),e("div",{staticClass:"customize-buttons"},t._l(t.maxPaginationNumber,(function(s){return e("span",{key:s,staticClass:"customize-button",class:{active:s===t.currentPaginationNumber},on:{click:function(e){return t.updatePage(s)}}},[t._v(" "+t._s(s)+" ")])})),0),e("button",{staticClass:"next-page",attrs:{disabled:t.isLastPage},on:{click:t.nextPage}},[e(it.Z,[t._v("mdi-chevron-right")])],1),e("div",{staticClass:"item-per-page-container"},[e(lt.Z,{attrs:{"close-on-content-click":"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function({on:s}){return[e("div",t._g({},s),[e("div",{staticClass:"page-dropdown-button"},[e("div",[t._v(t._s(t.itemsPerPage)+"/pages")]),e(it.Z,{attrs:{small:""}},[t._v("mdi-chevron-down")])],1)])]}}])},[e(rt.Z,{staticClass:"page-dropdown-list"},t._l(t.itemsPerPageOptions,(function(s){return e(ot.Z,{key:s,on:{click:function(e){return t.updateItemsPerPage(s)}}},[t._v(" "+t._s(s)+" ")])})),1)],1)],1)])]},proxy:!0}],null,!0)},[e("template",{slot:"no-data"},[e("div",{staticClass:"empty-table"},[t._v("No data found")])])],2)},ur=[],mr={props:{items:Array,headers:Array},data(){return{itemsPerPage:50,currentPage:1,options:{page:1,itemsPerPage:50,sortBy:this.headers.length>0?this.headers[0].value:null,sortDesc:!1},itemsPerPageOptions:[2,10,20,30,40,50]}},computed:{paginatedItems(){const t=(this.options.page-1)*this.options.itemsPerPage,e=t+this.options.itemsPerPage;return this.sortedItems.slice(t,e)},sortedItems(){const t=[...this.items],e=this.options.sortBy,s=this.options.sortDesc;return e&&t.sort(((t,a)=>t[e]<a[e]?s?1:-1:t[e]>a[e]?s?-1:1:0)),t},itemsLength(){return this.items.length},currentPageFirstIndex(){return(this.options.page-1)*this.options.itemsPerPage+1},currentPageLastIndex(){return Math.min(this.options.page*this.options.itemsPerPage,this.itemsLength)},maxPaginationNumber(){return Math.ceil(this.itemsLength/this.options.itemsPerPage)},currentPaginationNumber(){return this.options.page},isFirstPage(){return 1===this.options.page},isLastPage(){return this.options.page===this.maxPaginationNumber}},watch:{itemsPerPage(t){this.options.itemsPerPage=t,this.options.page=1}},methods:{sort(t,e){t.sortable&&(this.options.sortBy===t.value||(this.options.sortBy=t.value),this.options.sortDesc=e)},getSortIconClass(t,e){return this.options.sortBy!==t.value?"sort-icon":this.options.sortDesc===e?"sort-icon-active":"sort-icon"},updatePage(t){this.options.page=t},prevPage(){this.options.page>1&&this.options.page--},nextPage(){this.options.page<this.maxPaginationNumber&&this.options.page++},updateItemsPerPage(t){this.itemsPerPage=t}}},hr=mr,pr=(0,_t.Z)(hr,dr,ur,!1,null,"ebf2617e",null),vr=pr.exports,fr=s(9044),_r=s(6402),gr=function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex flex-column flex-sm-row flex-wrap flex-md-nowrap",staticStyle:{gap:"12px"}},[e("div",{staticClass:"search-bar d-flex"},[e("label",{attrs:{for:"search"}},[t._v("Search:")]),e(wt.Z,{staticClass:"search-input",attrs:{label:"Please enter",clearable:"",dense:"","hide-details":"",outlined:"",color:"success"},model:{value:t.searchString,callback:function(e){t.searchString=e},expression:"searchString"}})],1),e("div",[e(fr.Z,{staticClass:"namespaces",class:{empty:!t.selectedNamespaces.length},attrs:{items:t.namespaces,label:"Namespaces",disabled:t.namespacesDisabled,color:"success",multiple:"",outlined:"",dense:"",chips:"","small-chips":"","deletable-chips":"","hide-details":""},scopedSlots:t._u([{key:"selection",fn:function({item:s}){return[e(_r.Z,{staticClass:"namespace",attrs:{small:"",label:"",disabled:t.namespacesDisabled,close:"","close-icon":"mdi-close",color:"primary"},on:{"click:close":function(e){return t.removeNamespace(s.value)}}},[e("span",{attrs:{title:s.text}},[t._v(t._s(s.name))])])]}}]),model:{value:t.selectedNamespaces,callback:function(e){t.selectedNamespaces=e},expression:"selectedNamespaces"}})],1),e("div",{staticClass:"d-none d-sm-block flex-grow-1"}),e("div",{staticClass:"d-flex flex-wrap align-center categories"},[e(lt.Z,{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(et.Z,t._g(t._b({staticClass:"category-select",attrs:{outlined:""}},"v-btn",a,!1),s),[t._v(" Select application "),e(it.Z,[t._v("mdi-chevron-down")])],1)]}}])},[e(rt.Z,{staticClass:"category-list"},t._l(t.categories,(function(s){return e(ot.Z,{key:s,staticClass:"category-item"},[e(hs.Z,{staticClass:"category-checkbox",attrs:{value:s,label:s,disabled:t.categoriesDisabled,color:"success","hide-details":""},model:{value:t.selectedCategories,callback:function(e){t.selectedCategories=e},expression:"selectedCategories"}})],1)})),1)],1),e(Li.Z,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:s}){return[e(et.Z,t._g({staticClass:"button success",attrs:{to:{name:"project_settings",params:{tab:"applications"}}}},s),[e(it.Z,[t._v("mdi-plus")]),t._v(" Add New ")],1)]}}])})],1)])},yr=[];const br="application-filter";function xr(t,e){let s=t.find((t=>"default"===t.value));if(s&&s.apps<=e)return s.value;let a="",i=0;return t.forEach((t=>{t.value&&t.apps>i&&t.apps<=e&&(a=t.value,i=t.apps)})),a||t[0].value}var wr={props:{applications:Array,autoSelectNamespaceThreshold:Number},data(){const t=this.load();return{selectedCategories:t.categories,selectedNamespaces:t.namespaces,searchString:"",autoSelectNamespace:!!this.autoSelectNamespaceThreshold&&!t.namespaces.length}},computed:{search(){return(this.searchString||"").trim()},categories(){const t=new Set(this.selectedCategories);(this.applications||[]).forEach((e=>{t.add(e.category)}));const e=Array.from(t);return e.sort(((t,e)=>t.localeCompare(e))),e},categoriesDisabled(){return!!this.search||!!this.selectedNamespaces.length},namespaces(){const t={};this.selectedNamespaces.forEach((e=>{t[e]=0})),(this.applications||[]).forEach((e=>{const s=this.$utils.appId(e.id);t[s.ns]||(t[s.ns]=0),t[s.ns]++}));const e=Object.keys(t).map((e=>{const s=e||"~empty",a=t[e];return{value:e,name:s,apps:a,text:`${s} (${a})`}}));return e.sort(((t,e)=>t.value.localeCompare(e.value))),e},namespacesDisabled(){return!!this.search},filter(){const t=new Set(this.selectedCategories),e=new Set(this.selectedNamespaces),s=this.search,a=this.applications.filter((a=>s?a.id.includes(s)||a.type&&a.type.name.includes(s):e.size?e.has(this.$utils.appId(a.id).ns):t.has(a.category)));return new Set(a.map((t=>t.id)))}},watch:{filter:{handler(){return!this.selectedCategories.length&&this.categories.length?(this.selectedCategories.push(this.categories[0]),void this.save()):this.autoSelectNamespace&&this.filter.size>this.autoSelectNamespaceThreshold&&!this.selectedNamespaces.length&&this.namespaces?(this.selectedNamespaces.push(xr(this.namespaces,this.autoSelectNamespaceThreshold)),this.autoSelectNamespace=!1,void this.save()):void this.$emit("filter",this.filter)},immediate:!0},selectedCategories(){this.save()},selectedNamespaces(){this.save()}},methods:{removeNamespace(t){const e=this.selectedNamespaces.indexOf(t);e>=0&&this.selectedNamespaces.splice(e,1)},load(){const t=this.$route.params.projectId;let e=this.$storage.local(br)||{};return e=e[t]||{},e.categories=e.categories||[],e.namespaces=e.namespaces||[],e},save(){const t=this.$storage.local(br)||{},e=this.$route.params.projectId;t[e]||(t[e]={}),t[e].categories=this.selectedCategories,t[e].namespaces=this.selectedNamespaces,this.$storage.local(br,t)}}},kr=wr,Cr=(0,_t.Z)(kr,gr,yr,!1,null,"7037970b",null),Zr=Cr.exports,$r=s(5770),Sr=function(){var t=this,e=t._self._c;return e(Gt.Z,{staticClass:"card-body"},[e($r.EB,[e("div",{staticClass:"card-name"},[t._v(t._s(t.name))]),e($r.ZB,{staticClass:"card-count"},[t._v(t._s(t.count))])],1),e("BaseIcon",{class:["card-icon",t.background],staticStyle:{"border-radius":"30%"},attrs:{name:"alert",iconColor:t.icon}})],1)},Ir=[],qr={components:{BaseIcon:Ae},props:{name:String,count:Number,background:String,icon:String}},Pr=qr,Ar=(0,_t.Z)(Pr,Sr,Ir,!1,null,"4b95ecb8",null),Or=Ar.exports;const Tr={critical:{name:"SLO violation",background:"red lighten-4",color:"#EF5350"},warning:{name:"Warning",background:"orange lighten-4",color:"#FFA726"},info:{name:"Errors in logs",background:"blue lighten-4",color:"#42A5F5"},unknown:{name:"Integration",background:"purple lighten-4",color:"#AB47BC"},ok:{name:"OK",background:"green lighten-4",color:"#66BB6A"}};var jr={components:{ApplicationFilter:Zr,CustomTable:vr,Card:Or},data(){return{applications:[],filter:new Set,loading:!1,error:"",headers:[{value:"application",text:"Application",sortable:!1},{value:"type",text:"Type",sortable:!1},{value:"errors",text:"Errors",sortable:!1,align:"end"},{value:"latency",text:"Latency",sortable:!1,align:"end"},{value:"upstreams",text:"Upstreams",sortable:!1,align:"end"},{value:"instances",text:"Instances",sortable:!1,align:"end"},{value:"restarts",text:"Restarts",sortable:!1,align:"end"},{value:"cpu",text:"CPU",sortable:!1,align:"end"},{value:"memory",text:"Mem",sortable:!1,align:"end"},{value:"disk_io_load",text:"I/O load",sortable:!1,align:"end"},{value:"disk_usage",text:"Disk",sortable:!1,align:"end"},{value:"network",text:"Net",sortable:!1,align:"end"},{value:"dns",text:"DNS",sortable:!1,align:"end"},{value:"logs",text:"Logs",sortable:!1,align:"center"}]}},mounted(){this.get(),this.$events.watch(this,this.get,"refresh")},computed:{categories(){return Array.from(new Set((this.applications||[]).map((t=>t.category))).values())},statuses(){return Object.keys(Tr).map((t=>({...Tr[t],count:this.items.filter((e=>e.status===t)).length})))},items(){if(!this.applications)return[];const t=this.applications.filter((t=>this.filter.has(t.id))).map((t=>({...t})));console.log("applications",t);const e={};return t.forEach((t=>{const s=this.$utils.appId(t.id);t.name=s.name,t.ns=s.ns,e[s.name]?e[s.name]++:e[s.name]=1})),t.map((t=>({...t,ns:e[t.name]>1?t.ns:"",color:Tr[t.status].color})))}},methods:{get(){this.loading=!0,this.error="",this.$api.getOverview("applications","",((t,e)=>{this.loading=!1,e?this.error=e:this.applications=t.applications}))},setFilter(t){this.filter=t},link(t,e,s){return{name:"overview",params:{view:"applications",id:t,report:e},query:{...s,...this.$utils.contextQuery()}}}}},Er=jr,Lr=(0,_t.Z)(Er,lr,cr,!1,null,"7f924e73",null),Nr=Lr.exports,Mr=function(){var t=this,e=t._self._c;return e("div",[t.error?e(K.Z,{attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(" "+t._s(t.error)+" ")]):t._e(),t.app?e("div",[t.app.app_map?e("AppMap",{staticClass:"my-5",attrs:{map:t.app.app_map}}):t._e(),t.app.reports&&t.app.reports.length?e(ee.Z,{attrs:{"show-arrows":"","slider-size":"2","slider-color":"success"}},t._l(t.app.reports,(function(s){return e(Xt.Z,{key:s.name,attrs:{to:{params:{report:s.name},query:t.$utils.contextQuery()},"exact-path":""}},[s&&(s.checks||s.instrumentation)?e("Led",{staticClass:"mr-2",attrs:{status:s.status}}):t._e(),t._v(" "+t._s(s.name)+" ")],1)})),1):t._e(),t.r&&!t.r.custom&&(t.r.checks||t.r.instrumentation)?e(Gt.Z,{staticClass:"my-4 pa-4 pb-2",attrs:{outlined:""}},[t.r.instrumentation?e("ApplicationInstrumentation",{attrs:{appId:t.id,type:t.r.instrumentation,active:"unknown"!==t.r.status}}):t._e(),t._l(t.r.checks,(function(s){return e("Check",{key:s.id,staticClass:"mb-2",attrs:{appId:t.id,check:s}})}))],2):t._e(),t.r?e("Dashboard",{attrs:{name:t.r.name,widgets:t.r.widgets}}):t._e()],1):t.loading||t.error?t._e():e("NoData")],1)},zr=[],Fr=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"on-resize",rawName:"v-on-resize",value:t.calcArrows,expression:"calcArrows"}],staticClass:"map"},[e("div",{staticClass:"column",style:{rowGap:t.columnRowGap(t.clients)}},[t._l(t.clients,(function(s){return e("div",{ref:s.id,refInFor:!0,staticClass:"client",class:{hi:t.highlighted.clients.has(s.id)},style:t.getStatusStyle(s.status),on:{mouseenter:function(e){return t.focus("client",s.id)},mouseleave:t.unfocus}},[e("div",[e("router-link",{staticClass:"name",attrs:{to:{name:"overview",params:{view:"applications",id:s.id},query:t.$utils.contextQuery()}}},[e("AppHealth",{attrs:{app:s}})],1),t.hideLabels(t.clients)?t._e():e("Labels",{staticClass:"d-none d-sm-block label",attrs:{labels:s.labels}})],1)])})),t.map.clients?e("div",[t.clientsExpanded?e(et.Z,{staticClass:"d-block mx-auto caption",attrs:{"x-small":"",elevation:"0",color:"primary"},on:{click:function(e){t.clientsExpanded=!1}}},[t._v(" collapse "),e(it.Z,{attrs:{"x-small":""}},[t._v("mdi-arrow-up")])],1):t.map.clients.length>t.clients.length?e(et.Z,{staticClass:"d-block mx-auto caption",attrs:{"x-small":"",elevation:"0",color:"primary"},on:{click:function(e){t.clientsExpanded=!0}}},[t._v(" expand (+"+t._s(t.map.clients.length-t.clients.length)+" apps) ")]):t._e()],1):t._e()],2),e("div",{staticClass:"column"},[t.map.application?e("div",{ref:t.map.application.id,staticClass:"app",style:t.getStatusStyle(t.map.application.status)},[e("div",[e("span",{staticClass:"name"},[e("AppHealth",{attrs:{app:t.map.application}}),e("AppPreferences",{attrs:{app:t.map.application,categories:t.map.categories}})],1),e("Labels",{staticClass:"d-none d-sm-block label",attrs:{labels:t.map.application.labels}})],1),t.instances&&t.instances.length?e("div",{staticClass:"instances"},t._l(t.instances,(function(s){return e("div",{ref:"instance:"+s.id,refInFor:!0,staticClass:"instance",class:{hi:t.highlighted.instances.has(s.id)},style:[t.getInstanceStatusStyle(t.map.application.status),{opacity:t.highlighted.instances.has(s.id)?1:.8}],on:{mouseenter:function(e){return t.focus("instance",s.id)},mouseleave:t.unfocus}},[e("div",{staticClass:"d-flex align-center",staticStyle:{gap:"2px"}},[e("div",{staticClass:"name flex-grow-1",attrs:{title:s.id}},[t._v(t._s(s.id))]),e("div",[s.labels&&"primary"===s.labels["role"]?e(it.Z,{staticStyle:{"margin-bottom":"2px"},attrs:{small:"",color:"rgba(0,0,0,0.87)"}},[t._v("mdi-database-edit-outline")]):t._e(),s.labels&&"replica"===s.labels["role"]?e(it.Z,{staticStyle:{"margin-bottom":"2px"},attrs:{small:"",color:"grey"}},[t._v("mdi-database-import-outline")]):t._e(),s.labels&&"arbiter"===s.labels["role"]?e(it.Z,{staticStyle:{"margin-bottom":"2px"},attrs:{small:"",color:"grey"}},[t._v("mdi-database-eye-outline")]):t._e(),s.labels&&s.labels["proxy"]?e(it.Z,{staticStyle:{"margin-bottom":"2px"},attrs:{small:"",color:"grey"}},[t._v("mdi-swap-horizontal")]):t._e(),!t.map.application.custom&&["Unknown","ExternalService"].includes(t.$utils.appId(t.map.application.id).kind)?[e(lt.Z,{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function({attrs:s,on:a}){return[e(et.Z,t._g(t._b({staticClass:"ml-1",attrs:{icon:"","x-small":""}},"v-btn",s,!1),a),[e(it.Z,{attrs:{small:""}},[t._v("mdi-dots-vertical")])],1)]}}],null,!0)},[e(rt.Z,{attrs:{dense:""}},[e(ot.Z,{staticClass:"grey--text"},[t._v("Move the instance to another application")]),e(ot.Z,{attrs:{link:"",to:{name:"project_settings",params:{tab:"applications"},hash:"#custom-applications",query:{custom_app:"",instance_pattern:s.id}}}},[e(bt.V9,[e(it.Z,{staticClass:"mr-2",attrs:{small:""}},[t._v("mdi-plus")]),t._v("a new application")],1)],1),t.map.custom_applications?t._l(t.map.custom_applications,(function(a){return e(ot.Z,{attrs:{link:"",to:{name:"project_settings",params:{tab:"applications"},hash:"#custom-applications",query:{custom_app:a,instance_pattern:s.id}}}},[e(it.Z,{staticClass:"mr-2",attrs:{small:""}},[t._v("mdi-arrow-right-thin")]),e(bt.V9,[t._v(t._s(a))])],1)})):t._e()],2)],1)]:t._e()],2)]),e("Labels",{staticClass:"d-none d-sm-block",attrs:{labels:s.labels}})],1)})),0):t._e(),t.map.instances?e("div",[t.instancesExpanded?e(et.Z,{staticClass:"d-block mx-auto caption",attrs:{"x-small":"",elevation:"0",color:"primary"},on:{click:function(e){t.instancesExpanded=!1}}},[t._v(" collapse "),e(it.Z,{attrs:{"x-small":""}},[t._v("mdi-arrow-up")])],1):t.map.instances.length>t.instances.length?e(et.Z,{staticClass:"d-block mx-auto caption",attrs:{"x-small":"",elevation:"0",color:"primary"},on:{click:function(e){t.instancesExpanded=!0}}},[t._v(" expand (+"+t._s(t.map.instances.length-t.instances.length)+" instances) ")]):t._e()],1):t._e()]):t._e()]),e("div",{staticClass:"column",style:{rowGap:t.columnRowGap(t.dependencies)}},[t._l(t.dependencies,(function(s){return e("div",{ref:s.id,refInFor:!0,staticClass:"dependency",class:{hi:t.highlighted.dependencies.has(s.id)},style:t.getStatusStyle(s.status),on:{mouseenter:function(e){return t.focus("dependency",s.id)},mouseleave:t.unfocus}},[e("div",[e("router-link",{staticClass:"name",attrs:{to:{name:"overview",params:{view:"applications",id:s.id},query:t.$utils.contextQuery()}}},[e("AppHealth",{attrs:{app:s}})],1),t.hideLabels(t.dependencies)?t._e():e("Labels",{staticClass:"d-none d-sm-block label",attrs:{labels:s.labels}})],1)])})),t.map.dependencies?e("div",[t.dependenciesExpanded?e(et.Z,{staticClass:"d-block mx-auto caption",attrs:{"x-small":"",elevation:"0",color:"primary"},on:{click:function(e){t.dependenciesExpanded=!1}}},[t._v(" collapse "),e(it.Z,{attrs:{"x-small":""}},[t._v("mdi-arrow-up")])],1):t.map.dependencies.length>t.dependencies.length?e(et.Z,{staticClass:"d-block mx-auto caption",attrs:{"x-small":"",elevation:"0",color:"primary"},on:{click:function(e){t.dependenciesExpanded=!0}}},[t._v(" expand (+"+t._s(t.map.dependencies.length-t.dependencies.length)+" apps) ")]):t._e()],1):t._e()],2),e("svg",[e("defs",[t._l(["unknown","ok","warning","critical"],(function(s){return[t._l(["","hi","lo"],(function(t){return[e("marker",{staticClass:"marker",class:`${s} ${t}`,attrs:{id:`marker-${s}-${t}`,viewBox:"0 0 10 10",refX:"10",refY:"5",markerWidth:"10",markerHeight:"10",markerUnits:"userSpaceOnUse",orient:"auto-start-reverse"}},[e("path",{attrs:{d:"M 0 3 L 10 5 L 0 7 z"}})])]}))]}))],2),t._l(t.arrows,(function(s){return[s.dd&&"hi"===s.hi(t.focused)&&s.w(t.arrows,t.focused)?e("path",{staticClass:"arrow",class:s.status,attrs:{d:s.dd(t.arrows,t.focused),stroke:"none"}}):t._e(),e("path",{staticClass:"arrow",class:[s.status,s.hi(t.focused)],attrs:{d:s.d,"fill-opacity":"0","marker-start":s.markerStart?`url(#marker-${s.status}-${s.hi(t.focused)})`:"","marker-end":s.markerEnd?`url(#marker-${s.status}-${s.hi(t.focused)})`:""}})]}))],2),t._l(t.arrows,(function(s){return[s.stats&&"hi"===s.hi(t.focused)?e("div",{staticClass:"stats",style:{top:s.stats.y+"px",left:s.stats.x+"px"}},t._l(s.stats.items,(function(s){return e("div",[t._v(t._s(s))])})),0):t._e()]}))],2)},Dr=[],Rr=function(){var t=this,e=t._self._c;return e("span",{staticClass:"labels"},t._l(t.keys,(function(s){return e("span",{staticClass:"label"},["db"===s?[e(it.Z,{attrs:{"x-small":""}},[t._v("mdi-database")]),t._v(t._s(t.labels[s]))]:"queue"===s?[e(it.Z,{attrs:{"x-small":""}},[t._v("mdi-tray-full")]),t._v(t._s(t.labels[s]))]:[t._v(t._s(s)+":"+t._s(t.labels[s]))]],2)})),0)},Hr=[],Vr={props:{labels:Object},computed:{keys(){if(!this.labels)return[];const t=Object.keys(this.labels);return t.sort(((t,e)=>t.localeCompare(e))),t}}},Ur=Vr,Br=(0,_t.Z)(Ur,Rr,Hr,!1,null,"07039eb3",null),Wr=Br.exports,Qr=function(){var t=this,e=t._self._c;return t.app.indicators?e(Li.Z,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:s}){return[e("span",t._g({},s),[e("span",{staticClass:"name",class:`status-${t.app.status}`},[t._v(t._s(t.$utils.appId(t.app.id).name))])])]}}],null,!1,3950779462)},[e(Gt.Z,{staticClass:"pa-2"},t._l(t.app.indicators,(function(s){return e("div",[e("Led",{attrs:{status:s.status}}),e("span",[t._v(t._s(s.message))])],1)})),0)],1):e("span",[e("span",{class:`status-${t.app.status}`},[t._v(t._s(t.$utils.appId(t.app.id).name))])])},Jr=[],Gr={props:{app:Object},components:{Led:Pt}},Yr=Gr,Kr=(0,_t.Z)(Yr,Qr,Jr,!1,null,"1cff5195",null),Xr=Kr.exports,to=function(){var t=this,e=t._self._c;return e(lt.Z,{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function({attrs:s,on:a}){return[e(et.Z,t._g(t._b({staticClass:"ml-1",attrs:{icon:"","x-small":""}},"v-btn",s,!1),a),[e(it.Z,{attrs:{small:""}},[t._v("mdi-dots-vertical")])],1)]}}])},[e(rt.Z,{attrs:{dense:""}},[t.app.category&&"application"!=t.app.category?[e(ot.Z,{attrs:{link:"",to:{name:"project_settings",params:{tab:"applications"},hash:"#categories",query:{category:t.app.category}}}},[e(bt.V9,[t._v('Edit the "'+t._s(t.app.category)+'" category')])],1)]:t._e(),e(ot.Z,{staticClass:"grey--text"},[t._v("Move the app to a category")]),e(ot.Z,{attrs:{link:"",to:{name:"project_settings",params:{tab:"applications"},hash:"#categories",query:{app_pattern:t.appPattern()}}}},[e(bt.V9,[e(it.Z,{staticClass:"mr-2",attrs:{small:""}},[t._v("mdi-plus")]),t._v("a new category")],1)],1),t.categories?t._l(t.categories,(function(s){return e(ot.Z,{attrs:{link:"",to:{name:"project_settings",params:{tab:"applications"},hash:"#categories",query:{category:s,app_pattern:t.appPattern()}}}},[e(it.Z,{staticClass:"mr-2",attrs:{small:""}},[t._v("mdi-arrow-right-thin")]),e(bt.V9,[t._v(t._s(s))])],1)})):t._e(),t.app.custom?e(ot.Z,{attrs:{link:"",to:{name:"project_settings",params:{tab:"applications"},hash:"#custom-applications",query:{custom_app:t.$utils.appId(t.app.id).name}}}},[e(bt.V9,[t._v("Edit custom application")])],1):t._e()],2)],1)},eo=[],so={props:{app:Object,categories:[]},methods:{appPattern(){const t=this.$utils.appId(this.app.id),e=t.ns?t.ns:"_";return e+"/"+t.name}}},ao=so,io=(0,_t.Z)(ao,to,eo,!1,null,"8af4d9e8",null),ro=io.exports;const oo=10;var no={props:{map:Object},components:{AppPreferences:ro,Labels:Wr,AppHealth:Xr},data(){return{arrows:[],focused:{},clientsExpanded:!1,dependenciesExpanded:!1,instancesExpanded:!1}},mounted(){requestAnimationFrame(this.calcArrows)},watch:{map(){requestAnimationFrame(this.calcArrows),this.unfocus()},clientsExpanded(){requestAnimationFrame(this.calcArrows)},dependenciesExpanded(){requestAnimationFrame(this.calcArrows)},instancesExpanded(){requestAnimationFrame(this.calcArrows)}},computed:{clients(){return this.map.clients?this.clientsExpanded?this.map.clients||[]:this.map.clients.slice(0,oo):[]},dependencies(){return this.map.dependencies?this.dependenciesExpanded?this.map.dependencies||[]:this.map.dependencies.slice(0,oo):[]},instances(){return this.map.instances?this.instancesExpanded?this.map.instances||[]:this.map.instances.slice(0,oo):[]},highlighted(){const t={clients:new Set,dependencies:new Set,instances:new Set},e=this.map.instances||[];if(this.focused.instance){t.instances.add(this.focused.instance);const s=e.find((t=>t.id===this.focused.instance));if(!s)return t;(s.clients||[]).forEach((e=>{t.clients.add(e.id)})),(s.dependencies||[]).forEach((e=>{t.dependencies.add(e.id)})),(s.internal_links||[]).forEach((e=>{t.instances.add(e.id)})),e.forEach((e=>{e.internal_links&&e.internal_links.find((t=>t.id===this.focused.instance))&&t.instances.add(e.id)}))}return this.focused.client&&(t.clients.add(this.focused.client),e.forEach((e=>{e.clients&&e.clients.find((t=>t.id===this.focused.client))&&t.instances.add(e.id)}))),this.focused.dependency&&(t.dependencies.add(this.focused.dependency),e.forEach((e=>{e.dependencies&&e.dependencies.find((t=>t.id===this.focused.dependency))&&t.instances.add(e.id)}))),t},links(){const t=[];return(this.map.instances||[]).forEach((e=>{const s=t=>t.instance&&t.instance===e.id,a=t=>Object.keys(t).length?"lo":"";(e.clients||[]).forEach((i=>{if(!this.clients.find((t=>t.id===i.id))||!this.instances.find((t=>t.id===e.id)))return;const r=i.id,o="instance:"+e.id,n=t=>s(t)||t.client&&t.client===r?"hi":a(t);t.push({from:r,to:o,status:i.status,stats:i.stats,weight:i.weight,direction:i.direction,hi:n})})),(e.dependencies||[]).forEach((i=>{if(!this.dependencies.find((t=>t.id===i.id))||!this.instances.find((t=>t.id===e.id)))return;const r="instance:"+e.id,o=i.id,n=t=>s(t)||t.dependency&&t.dependency===o?"hi":a(t);t.push({from:r,to:o,status:i.status,stats:i.stats,weight:i.weight,direction:i.direction,hi:n})})),(e.internal_links||[]).forEach((i=>{if(!this.instances.find((t=>t.id===e.id))||!this.instances.find((t=>t.id===i.id)))return;const r="instance:"+e.id,o="instance:"+i.id,n=t=>s(t)||t.instance&&t.instance===i.id?"hi":a(t);t.push({from:r,to:o,status:i.status,direction:i.direction,hi:n,internal:!0})}))})),t}},methods:{hideLabels(t){return t&&t.length>oo},columnRowGap(t){return(t&&t.length>oo?4:16)+"px"},focus(t,e){this.focused={},this.map.instances&&(this.focused[t]=e)},unfocus(){this.focused={}},getRect(t){const e=this.$refs[t]&&(this.$refs[t][0]||this.$refs[t]);return e?{top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}:null},calcArrows(){const t=[];this.links.forEach((e=>{const s=this.getRect(e.from),a=this.getRect(e.to);if(!s||!a)return;const i={hi:e.hi,status:e.status,_w:e.weight||0,markerStart:"from"===e.direction||"both"===e.direction,markerEnd:"to"===e.direction||"both"===e.direction};if(t.push(i),e.internal){const t=s.left+s.width,e=s.top+s.height/2,r=a.left+a.width,o=a.top+a.height/2,n=Math.abs(o-e),l=n,c=n,d=o>e?1:0;i.d=`M${t},${e} A${l},${c} 0,0,${d} ${r},${o}`}else{const t=s.left+s.width,r=s.top+s.height/2,o=a.left,n=a.top+a.height/2;i.d=`M${t},${r} L${o},${n}`,i.w=(t,e)=>3*i._w/Math.max(...t.filter((t=>"hi"===t.hi(e))).map((t=>t._w))),i.r=(e,s)=>i.w(e,s)/2+((n-r)**2+(o-t)**2)/(8*i.w(e,s)),i.dd=(e,s)=>`M${t},${r} A${i.r(e,s)},${i.r(e,s)} 0,0,0 ${o},${n} A${i.r(e,s)},${i.r(e,s)} 0,0,0 ${t},${r}`,e.stats&&e.stats.length&&(i.stats={x:(o+t)/2-20,y:(n+r)/2-12*e.stats.length/2,items:e.stats})}})),this.arrows=t},getStatusStyle(t){const e={critical:{background:"#FFCDD2",color:"#EF5350"},warning:{background:"#FFE0B2",color:"#FFA726"},unknown:{background:"#F5F5F5",color:"#757575"},ok:{background:"#e7f8ef",color:"#1DBF73"}},s=e[t]||{};return{backgroundColor:s.background,borderLeft:`4px solid ${s.color}`}},getInstanceStatusStyle(t){const e={critical:{background:"#EF5350"},warning:{background:"#FFA726"},unknown:{background:"#757575"},ok:{background:"#1DBF73"}};return e[t]||{}}}},lo=no,co=(0,_t.Z)(lo,Fr,Dr,!1,null,"481a69e7",null),uo=co.exports,mo=function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex flex-wrap"},t._l(t.widgets,(function(s,a){return e("Widget",{key:t.name+":"+a,staticClass:"my-5",style:{width:t.$vuetify.breakpoint.mdAndUp?s.width||"50%":"100%"},attrs:{w:s}})})),1)},ho=[],po=function(){var t=this,e=t._self._c;return e("div",[t.w.chart?e("Chart",{attrs:{chart:t.w.chart,selection:{},doc:t.doc_link},on:{select:t.chartZoom}}):t._e(),t.w.chart_group?e("ChartGroup",{attrs:{title:t.w.chart_group.title,charts:t.w.chart_group.charts,selection:{},doc:t.doc_link},on:{select:t.chartZoom}}):t._e(),t.w.dependency_map?e("DependencyMap",{attrs:{nodes:t.w.dependency_map.nodes,links:t.w.dependency_map.links}}):t._e(),t.w.table?e("Table",{attrs:{header:t.w.table.header,rows:t.w.table.rows}}):t._e(),t.w.heatmap?e("Heatmap",{attrs:{heatmap:t.w.heatmap,selection:t.heatmapSelection},on:{select:t.heatmapDrillDown}}):t._e(),t.w.logs?e("Logs",{attrs:{appId:t.w.logs.application_id,check:t.w.logs.check}}):t._e(),t.w.profiling?e("Profiling",{attrs:{appId:t.w.profiling.application_id}}):t._e(),t.w.tracing?e("Tracing",{attrs:{appId:t.w.tracing.application_id}}):t._e()],1)},vo=[],fo=s(8649),_o=function(){var t=this,e=t._self._c;return e("div",{ref:"container",staticClass:"chart"},[e("div",{staticClass:"title"},[t._t("title",(function(){return[e("span",{domProps:{innerHTML:t._s(t.config.title)}})]})),t.doc?e("a",{staticClass:"ml-1",attrs:{href:t.doc,target:"_blank"}},[e(it.Z,{attrs:{small:""}},[t._v("mdi-information-outline")])],1):t._e(),t.link?e(et.Z,{staticClass:"ml-3",attrs:{to:t.link,"x-small":"",color:"success"}},[t._v(" "+t._s(t.link.title.charAt(0).toUpperCase()+t.link.title.slice(1))+" ")]):t._e()],2),e("div",{directives:[{name:"on-resize",rawName:"v-on-resize",value:t.redraw,expression:"redraw"}],ref:"uplot",staticClass:"chart",class:{loading:t.loading}},[t.selection?e("div",{ref:"selection",staticClass:"selection"},[e("div",{ref:"selection-control",staticClass:"selection-control"},[t.selection.to>t.selection.from?e(fo.Z,{attrs:{value:t.selection.mode},on:{change:t.setSelectionMode}},[e(et.Z,{attrs:{small:"",value:"diff"}},[e(it.Z,{staticClass:"mdi-flip-h",attrs:{small:""}},[t._v("mdi-select-compare")])],1),e(et.Z,{attrs:{small:"",value:"single"}},[e(it.Z,{attrs:{small:""}},[t._v("mdi-magnify")])],1),e(et.Z,{attrs:{small:"",value:""}},[e(it.Z,{attrs:{small:""}},[t._v("mdi-close")])],1)],1):t._e()],1),e("div",{ref:"selection-left",staticClass:"selection-left"},["diff"===t.selection.mode?e("span",{staticClass:"selection-title"},[t._v("baseline")]):t._e()]),e("div",{ref:"selection-current",staticClass:"selection-current"},["diff"===t.selection.mode?e("span",{staticClass:"selection-title"},[t._v("comparison")]):t._e()])]):t._e(),t.selection&&t.selection.to>t.selection.from&&t.selection.mode?t._e():[e("ChartAnnotations",{attrs:{ctx:t.config.ctx,bbox:t.bbox,annotations:t.annotations}})],e("ChartIncidents",{attrs:{ctx:t.config.ctx,bbox:t.bbox,incidents:t.incidents}})],2),e("ChartTooltip",{ref:"tooltip",staticClass:"tooltip",attrs:{ctx:t.config.ctx,incidents:t.incidents},model:{value:t.idx,callback:function(e){t.idx=e},expression:"idx"}},t._l(t.tooltip,(function(s){return e("div",{staticClass:"item"},[e("span",{staticClass:"marker",style:{backgroundColor:s.color}}),e("span",{staticClass:"label"},[t._v(t._s(s.label)+":")]),e("span",{staticClass:"value"},[t._v(t._s(s.value))])])})),0),t.legend?e("div",{staticClass:"legend"},t._l(t.legend,(function(s){return e("div",{staticClass:"item",style:{opacity:s.hidden?"0.5":"1"},on:{click:function(e){return t.toggleSeries(s.label)},mouseover:function(e){return t.highlightSeries(s.label)},mouseleave:function(e){return t.highlightSeries(null)}}},[e("span",{staticClass:"marker",style:{backgroundColor:s.color}}),e("span",{staticClass:"label"},[t._v(t._s(s.label))])])})),0):t._e()],1)},go=[],yo=s(5368);const bo=["rgb(183, 219, 171)","rgb(244, 213, 152)","rgb(78, 146, 249)","rgb(249, 186, 143)","rgb(242, 145, 145)","rgb(130, 181, 216)","rgb(229, 168, 226)","rgb(174, 162, 224)","rgb(154, 196, 138)","rgb(242, 201, 109)","rgb(101, 197, 219)","rgb(249, 147, 78)","rgb(234, 100, 96)","rgb(81, 149, 206)","rgb(214, 131, 206)","rgb(128, 110, 183)"];function xo(t){return t.split("").reduce(((t,e)=>(t<<5)-t+e.charCodeAt(0)),0)>>>0}class wo{constructor(){(0,_.Z)(this,"byName",new Map),(0,_.Z)(this,"byIndex",[]),(0,_.Z)(this,"byIndex2",[]);const t=Object.keys(yo.Z).filter((t=>"shades"!==t)),e=new Map(Object.entries(yo.Z));t.forEach((t=>{Object.entries(e.get(t)).forEach((e=>{const s=e[1];this.byName.set(t+"-"+e[0],s),"base"===e[0]&&this.byName.set(t,s)}))})),this.byName.set("black",yo.Z.shades.black),this.byName.set("white",yo.Z.shades.white),this.byIndex=[yo.Z.cyan,yo.Z.orange,yo.Z.purple,yo.Z.lime,yo.Z.blueGrey].map((t=>t.darken1)),this.byIndex2=t.filter((t=>"grey"!==t)).map((t=>e.get(t).lighten1))}get(t,e){let s=this.byName.get(t);return void 0===s&&(s=this.byIndex[e%this.byIndex.length]),s}hash(t){const e=this.byIndex2.length-1;return this.byIndex2[xo(t)%e]}hash2(t){return bo[xo(t)%bo.length]}}const ko=new wo;var Co=s(2085),Zo=s.n(Co),$o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"annotations"},t._l(t.items,(function(s){return e("div",{staticClass:"annotation",style:s.style},[e(Li.Z,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(it.Z,t._g({attrs:{small:""}},a),[t._v(t._s(s.icon))])]}}],null,!0)},[e(Gt.Z,{staticClass:"pa-2 text-center",domProps:{innerHTML:t._s(s.msg)}})],1),e("div",{staticClass:"line"})],1)})),0)},So=[],Io={props:{ctx:Object,bbox:Object,annotations:Array},computed:{items(){if(!this.annotations.length||!this.bbox)return[];const t=this.ctx,e=this.bbox,s=e=>(e-t.from)/(t.to-t.from);return this.annotations.map((t=>({msg:t.msg,icon:t.icon||"mdi-alert-circle-outline",style:{left:e.left+e.width*s(t.x)+"px",height:e.top+e.height+"px"}})))}}},qo=Io,Po=(0,_t.Z)(qo,$o,So,!1,null,"4b029386",null),Ao=Po.exports,Oo=function(){var t=this,e=t._self._c;return e("div",{staticClass:"incidents",style:t.style},t._l(t.items,(function(t){return e("div",{staticClass:"item",style:t.style})})),0)},To=[],jo={props:{ctx:Object,bbox:Object,incidents:Array},computed:{style(){if(!this.incidents.length||!this.bbox)return{display:"none"};const t=3,e=this.bbox;return{display:"block",height:t+"px",top:e.top+e.height+t+"px",left:e.left+"px",width:e.width+"px"}},items(){if(!this.incidents.length||!this.bbox)return[];const t=this.ctx,e=this.bbox,s=e=>(e-t.from)/(t.to-t.from);return this.incidents.map((a=>{const i=Math.max(0,e.width*s(a.x1-t.step/2)),r=Math.min(e.width,e.width*s(a.x2+t.step/2));return{style:{left:i+"px",width:r-i+"px"}}}))}}},Eo=jo,Lo=(0,_t.Z)(Eo,Oo,To,!1,null,"bef9d946",null),No=Lo.exports,Mo=function(){var t=this,e=t._self._c;return e("div",{ref:"tooltip",staticClass:"tooltip"},[e("div",{staticClass:"time"},[t._v(t._s(t.time))]),t._t("default"),t.incident?e("div",{staticClass:"incident"},[e("span",{staticClass:"label"},[t._v("incident")]),t._v(": "+t._s(t.incident.from)+" - "+t._s(t.incident.to||"in progress")+" ("+t._s(t.incident.dur)+") ")]):t._e()],2)},zo=[];const Fo="{MMM} {DD}, {HH}:{mm}:{ss}",Do="{MMM} {DD}, {HH}:{mm}";var Ro={props:{ctx:Object,incidents:Array},data(){return{idx:null,mousedown:!1}},computed:{ts(){return this.ctx.data[this.idx]},time(){return this.$format.date(this.ts,Fo)},incident(){const t=(this.incidents||[]).find((t=>t.x1<=this.ts&&this.ts<=t.x2));if(!t)return null;const e=t.x2-t.x1>36e5,s=e?Do:Fo,a=e?"m":"s";return{from:this.$format.date(t.x1,s),to:t.x2<this.ctx.to&&this.$format.date(t.x2,s),dur:this.$format.duration(t.x2-t.x1+this.ctx.step,a)}}},methods:{plugin(){const t=t=>{const e=this.$refs.tooltip;t.over.appendChild(e),t.over.addEventListener("mouseleave",(()=>{e.style.display="none",this.mousedown=!1})),t.over.addEventListener("mousedown",(()=>{e.style.display="none",this.mousedown=!0})),t.over.addEventListener("mouseup",(()=>{this.mousedown=!1}))},e=t=>{const{left:e,top:s,idx:a}=t.cursor;if(null===a)return;this.idx=a,this.$emit("input",a);const i=this.$refs.tooltip,r=e-(e>=t.over.clientWidth/2?i.clientWidth+5:-5);i.style.transform="translate("+r+"px, "+s+"px)",this.mousedown||(i.style.display="block")};return{hooks:{init:t,setCursor:e}}}}},Ho=Ro,Vo=(0,_t.Z)(Ho,Mo,zo,!1,null,"82e75f56",null),Uo=Vo.exports;const Bo="12px Roboto, sans-serif",Wo=["","K","M","G","T","P","E","Z","Y"],Qo=["","m","µ","n","p","f","a","z","y"],Jo=(t,e,s)=>{const a=t?Math.floor(Math.log(t)/Math.log(1e3)):0,i=a>0?Wo[a]:Qo[-a];return t=>{if(null===t||isNaN(t))return"-";let r=a<0?t*Math.pow(1e3,-a):t/Math.pow(1e3,a);return void 0!==s&&(r=r.toFixed(s)),r+i+(e||"")}};var Go={props:{chart:Object,selection:Object,loading:Boolean,doc:String},components:{ChartTooltip:Uo,ChartAnnotations:Ao,ChartIncidents:No},data(){return{ch:null,bbox:null,idx:null,hiddenSeries:(this.chart.series||[]).filter((t=>t.hidden)).map((t=>t.name)),highlightedSeries:null}},mounted(){this.$nextTick(this.redraw)},beforeDestroy(){this.ch&&this.ch.destroy()},watch:{config(){this.$nextTick(this.redraw)},selection:{handler(t){this.drawSelection(this.ch,t)},deep:!0},theme(){this.redraw()}},computed:{theme(){const t=this.$vuetify.theme.dark;return{dark:t,text:t?"rgba(255, 255, 255, 0.4)":"rgba(0,0,0,0.87)",grid:t?"rgba(255, 255, 255, 0.3)":"rgba(0,0,0,0.07)"}},config(){const t=JSON.parse(JSON.stringify(this.chart));t.series=(t.series||[]).filter((t=>null!=t.data)),t.sorted||t.series.sort(((t,e)=>t.name.localeCompare(e.name))),delete t.sorted,t.threshold&&(t.threshold.stacked=!1,t.series.push(t.threshold),delete t.threshold),t.ctx.data=Array.from({length:(t.ctx.to-t.ctx.from)/t.ctx.step+1},((e,s)=>t.ctx.from+s*t.ctx.step));const e={};return t.series.filter((t=>t.color)).forEach(((t,s)=>{e[t.color]||(e[t.color]=[]),e[t.color].push(s)})),t.series.forEach(((s,a)=>{if(s.stacked=void 0!==s.stacked?s.stacked:t.stacked,"black"===s.color&&this.theme.dark&&(s.color="white"),e[s.color]&&e[s.color].length>1){const t=ko.get(s.color,0),i=Zo().hex.hsl(t),r=e[s.color].findIndex((t=>t===a));i[2]=70-Math.trunc(30*r/e[s.color].length),s.color="#"+Zo().hsl.hex(i)}else s.color=ko.get(s.color,a+(t.color_shift||0));s.fill=s.stacked||s.fill})),delete t.stacked,t},link(){const t=this.config.drill_down_link;if(!t)return;const e={...this.$route.query,...t.query};return{...t,query:e}},annotations(){return(this.config.annotations||[]).filter((t=>"incident"!==t.name)).map((t=>({msg:t.name,x:t.x1,icon:t.icon})))},incidents(){return(this.config.annotations||[]).filter((t=>"incident"===t.name)).map((t=>({x1:t.x1,x2:t.x2})))},tooltip(){const t=this.config;if(!t||null===this.idx)return[];const e=t.series.filter(this.isActive),s=e.reduce(((t,e)=>Math.max(t,...e.data)),null),a=Jo(s,t.unit,2);return e.map((t=>({label:t.name,value:a(t.data[this.idx]),color:t.color})))},legend(){const t=this.config;return t.hide_legend?null:t.series.map((t=>({label:t.name,color:t.color,hidden:!this.isActive(t)})))}},methods:{redraw(){const t=this.config,e=t.series.filter(this.isActive),s=e=>({label:e.name,stroke:!e.stacked&&e.color,width:t.column?0:2,fill:e.fill&&e.color+(e.stacked?"ff":"44"),points:{show:!1},paths:t.column&&L.Z.paths.bars()}),a=[],i=[],r=Array(t.ctx.data.length).fill(0);e.forEach(((t,o)=>{const n=e[e.length-1-o];n.stacked&&(a.unshift(s(n)),i.unshift(n.data.map(((t,e)=>r[e]+=t))))})),e.filter((t=>!t.stacked)).forEach((t=>{t.fill?(a.unshift(s(t)),i.unshift(t.data)):(a.push(s(t)),i.push(t.data))})),t.yzoom||(a.push({}),i.push([0]));const o={height:150,padding:[10,20,-10,0],width:this.$refs.uplot.clientWidth,ms:1,axes:[{space:80,font:Bo,stroke:this.theme.text,grid:{stroke:this.theme.grid},ticks:{stroke:this.theme.grid},values:[[6e4,"{HH}:{mm}",null,null,"{MMM} {DD}",null,null,null,0],[1e3,"{HH}:{mm}:{ss}",null,null,"{MMM} {DD}",null,null,null,0]]},{space:20,font:Bo,size:60,stroke:this.theme.text,grid:{stroke:this.theme.grid},ticks:{stroke:this.theme.grid},values:(e,s)=>s.map((e=>Jo(Math.max(...s),t.unit)(e)))}],series:[{},...a],cursor:{points:{show:!1},y:!1,drag:{setScale:!1,click:()=>{}}},legend:{show:!1},plugins:[this.selectionPlugin(),this.$refs.tooltip.plugin()]};this.ch&&this.ch.destroy(),this.ch=new L.Z(o,[t.ctx.data,...i],this.$refs.uplot),this.ch.root.style.font=Bo,this.bbox=Object.entries(this.ch.bbox).reduce(((t,e)=>(t[e[0]]=e[1]/devicePixelRatio,t)),{})},drawSelection(t,e){if(!t||!e)return;const s={left:0,width:0,height:0};e.to>e.from&&(s.left=t.valToPos(e.from,"x"),s.width=t.valToPos(e.to,"x")-s.left,s.height=t.bbox.height/devicePixelRatio),t.setSelect(s,!1),this.setSelection(t,s)},setSelection(t,e){const s=0===e.width;if(this.$refs["selection"].style.display=s||!this.selection.mode?"none":"block",s)return;const a="diff"===this.selection.mode,i=this.$refs["selection-current"];i.style.width=e.width+"px",i.style.left=e.left+"px";const r=this.$refs["selection-left"];r.style.display=a?"block":"none";const o=Math.min(e.width,e.left);r.style.width=o+"px",r.style.left=e.left-o+"px";const n=this.$refs["selection-control"],l=n.getBoundingClientRect().width,c=a?e.left-l/2:e.left+(e.width-l)/2;n.style.left=c+"px"},setSelectionMode(t){let{from:e,to:s}=this.selection;t||(e=0,s=0),this.emitSelection({mode:t,from:e,to:s})},emitSelection(t){const e={...this.selection,...t},s={from:this.config.ctx.from,to:this.config.ctx.to};this.$emit("select",{selection:e,ctx:s})},selectionPlugin(){if(!this.selection)return{};const t=t=>{t.over.appendChild(this.$refs.selection)},e=t=>{this.drawSelection(t,this.selection)},s=t=>{0!==t.select.width&&this.setSelection(t,t.select)},a=t=>{if(0===t.select.width)return;const e=t.select.left,s=t.select.width,a=Math.trunc(t.posToVal(e,"x")),i=Math.trunc(t.posToVal(e+s,"x"));this.selection.from!==a&&this.selection.to!==i&&this.emitSelection({from:a,to:i})};return{hooks:{init:t,ready:e,setCursor:s,setSelect:a}}},toggleSeries(t){const e=this.hiddenSeries.indexOf(t);e>-1?this.hiddenSeries.splice(e,1):this.hiddenSeries.push(t),this.highlightedSeries=null,this.redraw()},highlightSeries(t){this.highlightedSeries=t,this.redraw()},isActive(t){return this.highlightedSeries?t.name===this.highlightedSeries:this.hiddenSeries.indexOf(t.name)<0}}},Yo=Go,Ko=(0,_t.Z)(Yo,_o,go,!1,null,"38a2ae36",null),Xo=Ko.exports,tn=function(){var t=this,e=t._self._c;return e("Chart",{attrs:{chart:t.chart,selection:t.selection},on:{select:t.select},scopedSlots:t._u([{key:"title",fn:function(){return[e("span",[t._v(t._s(t.splitTitle.head))]),e(lt.Z,{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(et.Z,t._g(t._b({staticClass:"selector",attrs:{text:"",outlined:"","x-small":""}},"v-btn",a,!1),s),[e("span",{staticStyle:{"max-width":"90%",overflow:"hidden","text-overflow":"ellipsis"}},[t._v(t._s(t.selected))]),e(it.Z,{staticClass:"ml-1",attrs:{small:""}},[t._v("mdi-menu-down")])],1)]}}])},[e(rt.Z,{staticClass:"pa-0",attrs:{dense:""}},[e(Ht.Z,{attrs:{value:t.selected}},t._l(t.sorted,(function(s){return e(ot.Z,{key:s.title,staticClass:"py-1 px-2",staticStyle:{"min-height":"0"},on:{click:function(e){t.selected=s.title}}},[e(bt.V9,{staticClass:"item"},[t._v(t._s(s.title))])],1)})),1)],1)],1),e("span",[t._v(t._s(t.splitTitle.tail))]),t.doc?e("a",{staticClass:"ml-1",attrs:{href:t.doc,target:"_blank"}},[e(it.Z,{attrs:{small:""}},[t._v("mdi-information-outline")])],1):t._e()]},proxy:!0}])})},en=[],sn={props:{title:String,charts:Array,selection:Object,doc:String},components:{Chart:Xo},data(){const t=this.sort(),e=t.findIndex((t=>t.featured));return{selected:t[e<0?0:e].title}},computed:{chart(){let t=this.sorted.find((t=>t.title===this.selected));return t||(t=this.sorted.find((t=>t.featured)),t||this.sorted[0])},sorted(){return this.sort()},splitTitle(){const t=this.title.split("<selector>",2);return 0===t.length?{head:"",tail:""}:1===t.length?{head:t[0],tail:""}:{head:t[0],tail:t[1]}}},methods:{sort(){const t=Array.from(this.charts);return t.sort(((t,e)=>t.title.localeCompare(e.title))),t},select(t){this.$emit("select",t)}}},an=sn,rn=(0,_t.Z)(an,tn,en,!1,null,"469efe47",null),on=rn.exports,nn=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"on-resize",rawName:"v-on-resize",value:t.calc,expression:"calc"}],staticClass:"wrapper"},[e("div",{staticClass:"map"},t._l(t.azs,(function(s){return e("div",{staticClass:"az"},[e("div",{staticClass:"az-title",attrs:{title:"availability zone"}},[t._v(t._s(s.name))]),e("div",{staticClass:"az-body"},t._l(s.nodes,(function(s){return e("div",{staticClass:"node",class:s.status,attrs:{title:"node"}},[e("div",{staticClass:"node-title"},[t._v(t._s(s.name))]),e("div",{staticClass:"node-body"},[e("div",{staticClass:"src"},t._l(s.src_instances,(function(s){return e("div",{staticClass:"instance",class:{obsolete:s.obsolete},attrs:{"data-id":"src-"+s.id,title:"instance"+(s.obsolete?" (obsolete)":"")}},[t._v(" "+t._s(s.name)+" ")])})),0),e("div",{staticClass:"dst"},t._l(s.dst_instances,(function(s){return e("div",{staticClass:"instance",class:{obsolete:s.obsolete},attrs:{"data-id":"dst-"+s.id,title:"instance"+(s.obsolete?" (obsolete)":"")}},[t._v(" "+t._s(s.name)+" ")])})),0)])])})),0)])})),0),e("svg",t._l(t.lines,(function(t){return e("line",{class:t.status,attrs:{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}})})),0)])},ln=[],cn={props:{nodes:Array,links:Array},data(){return{azs:[],lines:[]}},mounted(){this.$nextTick(this.calc)},watch:{links(){this.$nextTick(this.calc)}},methods:{calc(){const t=this.nodes||[];let e=new Map;t.forEach((t=>{const s=`${t.provider}:${t.pegion}:${t.az}`;e.has(s)||e.set(s,{name:(t.provider?t.provider+":":"")+t.az,nodes:new Map}),e.get(s).nodes.set(t.name,t)})),e=Array.from(e.values());const s=(t,e)=>t.name.localeCompare(e.name);e.sort(s),e.forEach((t=>{t.nodes=Array.from(t.nodes.values()),t.nodes.sort(s)})),this.azs=e;const a=new Map;if(Array.from(this.$el.getElementsByClassName("instance")).forEach((t=>{a.set(t.dataset.id,{top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight})})),0===a.size)return;const i=this.links||[];this.lines=i.map((t=>{const e=a.get("src-"+t.src_instance),s=a.get("dst-"+t.dst_instance),i=e.left+e.width,r=e.top+e.height/2,o=s.left,n=s.top+s.height/2,l=t.status;return{x1:i,y1:r,x2:o,y2:n,status:l}}))}}},dn=cn,un=(0,_t.Z)(dn,nn,ln,!1,null,"555bf1e8",null),mn=un.exports,hn=function(){var t=this,e=t._self._c;return e(ns.Z,{attrs:{dense:""}},[e("thead",[e("tr",t._l(t.header,(function(s){return e("th",{staticClass:"text-left"},[t._v(t._s(s))])})),0)]),e("tbody",t._l(t.rows,(function(s){return e("tr",{class:{hi:s.id&&t.$route.hash&&t.$route.hash==="#"+s.id},attrs:{id:s.id}},t._l(s.cells,(function(s){return e("td",{staticClass:"py-2"},[s.progress?e("div",{staticClass:"d-flex align-items-center"},[e(ts.Z,{staticStyle:{"min-width":"64px","flex-grow":"1"},attrs:{"background-color":s.progress.color+" lighten-3",height:"16",color:s.progress.color+" lighten-1",value:s.progress.percent}}),e("span",{staticStyle:{"font-size":"14px","margin-left":"8px",color:"gray"}},[t._v(t._s(s.progress.percent)+"%")])],1):s.bandwidth?e("div",[e("span",{staticClass:"text-no-wrap"},[e(it.Z,{attrs:{small:"",color:"green"}},[t._v("mdi-arrow-down-thick")]),t._v(t._s(s.bandwidth.Rx)+" ")],1),e("span",{staticClass:"text-no-wrap"},[e(it.Z,{attrs:{small:"",color:"blue"}},[t._v("mdi-arrow-up-thick")]),t._v(t._s(s.bandwidth.Tx)+" ")],1)]):s.chart?e(nr.Z,{staticStyle:{"min-width":"100px"},attrs:{value:s.chart.map((t=>null===t?0:t)),fill:"",smooth:"",padding:"4",color:"green lighten-2",height:"32"}}):s.values?[s.values.length>1?e(lt.Z,{attrs:{"offset-y":"",tile:""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e("span",t._g({staticClass:"text-no-wrap"},a),[t._v(" "+t._s(s.values[0])+", ...")])]}}],null,!0)},[e(rt.Z,{attrs:{dense:""}},t._l(s.values,(function(s){return e(ot.Z,{staticStyle:{"font-size":"14px","min-height":"32px"}},[e(bt.V9,[t._v(t._s(s))])],1)})),1)],1):e("span",[t._v(t._s(s.values[0]))])]:s.deployment_summaries?t._l(s.deployment_summaries,(function(s){return e("div",{staticClass:"d-flex"},[e("span",{staticClass:"text-no-wrap"},[t._v(t._s(s.ok?"🎉":"💔")+" "+t._s(s.message))]),e("router-link",{staticClass:"d-flex",attrs:{to:{name:"application",params:{report:s.report},query:{from:s.time-18e5,to:s.time+18e5}}}},[e(it.Z,{attrs:{small:""}},[t._v("mdi-chart-box-outline")])],1)],1)})):e("div",[e("div",{staticClass:"d-flex"},[s.icon?e(it.Z,{staticClass:"mr-1",attrs:{color:s.icon.color,small:""}},[t._v(t._s(s.icon.name))]):t._e(),s.status&&s.value?e("Led",{attrs:{status:s.status}}):t._e(),s.value&&s.link?e("router-link",{class:{truncated:!!s.max_width},style:{"max-width":s.max_width?s.max_width+"ch":void 0},attrs:{to:{query:t.$route.query,...s.link},title:s.value}},[t._v(t._s(s.value))]):e("span",{class:{"grey--text":s.is_stub,truncated:!!s.max_width},style:{"max-width":s.max_width?s.max_width+"ch":void 0},attrs:{title:s.value}},[t._v(t._s((t.smallScreen&&s.short_value?s.short_value:s.value)||"—"))]),s.unit&&s.value?e("span",{staticClass:"caption grey--text ml-1"},[t._v(t._s(s.unit))]):t._e()],1),s.tags&&!t.smallScreen?e("div",t._l(s.tags,(function(s){return e("span",{staticClass:"tag"},[t._v(t._s(s))])})),0):t._e()])],2)})),0)})),0)])},pn=[],vn={props:{header:Array,rows:Array},components:{Led:Pt},computed:{smallScreen(){return this.$vuetify.breakpoint.xsOnly}}},fn=vn,_n=(0,_t.Z)(fn,hn,pn,!1,null,"7c2770d0",null),gn=_n.exports,yn=function(){var t=this,e=t._self._c;return e("div",{staticClass:"heatmap"},[e("div",{staticClass:"title",domProps:{innerHTML:t._s(t.config.title)}}),e("div",[e("div",{staticClass:"legend"},t._l(t.legend,(function(s){return e("div",{staticClass:"item",class:s.type},[t._v(" "+t._s(s.value)+" ")])})),0)]),e("div",{directives:[{name:"on-resize",rawName:"v-on-resize",value:t.redraw,expression:"redraw"}],ref:"uplot",staticClass:"chart",class:{loading:t.loading}},[e("div",{staticClass:"threshold",staticStyle:{"z-index":"1"},style:t.threshold.style},[e(Li.Z,{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function({on:s}){return[e(it.Z,t._g({staticClass:"icon",attrs:{small:""}},s),[t._v("mdi-target")])]}}])},[e(Gt.Z,{staticClass:"pa-2 text-center",domProps:{innerHTML:t._s(t.threshold.content)}})],1)],1),e("ChartAnnotations",{attrs:{ctx:t.config.ctx,bbox:t.bbox,annotations:t.annotations}}),e("ChartIncidents",{attrs:{ctx:t.config.ctx,bbox:t.bbox,incidents:t.incidents}})],1),e("ChartTooltip",{ref:"tooltip",staticClass:"tooltip",attrs:{ctx:t.config.ctx,incidents:t.incidents},model:{value:t.idx,callback:function(e){t.idx=e},expression:"idx"}},t._l(t.tooltip,(function(s){return e("div",{staticClass:"item",class:{threshold:!!s.threshold}},[s.threshold?e("span",{staticClass:"details"},[e("span",{staticClass:"above"},[t._v(t._s(s.threshold.above))]),e("br"),e("span",{staticClass:"below"},[t._v(t._s(s.threshold.below))])]):t._e(),e("div",{staticClass:"label",style:{width:s.width+"ch"}},[t._v(t._s(s.label))]),e("div",{staticClass:"value"},[e("div",{staticClass:"bar",class:{error:s.error},style:{width:s.bar+"%"}},[t._v(t._s(s.value))])])])})),0)],1)},bn=[];const xn="12px Roboto, sans-serif";function wn(...t){const e=Math.min(...t.filter((t=>!!t))),s=Math.floor(Math.log(e)/Math.log(10));return s>=0?0:-s}function kn(t,e,s){return t?(void 0===s&&(s=wn(t)),t.toFixed(s)+e):"-"}var Cn={props:{heatmap:Object,selection:Object,loading:Boolean},components:{ChartTooltip:Uo,ChartAnnotations:Ao,ChartIncidents:No},data(){return{ch:null,bbox:null,idx:null,select:{}}},mounted(){this.$nextTick(this.redraw)},beforeDestroy(){this.ch&&this.ch.destroy()},watch:{config(){this.$nextTick(this.redraw)},theme(){this.redraw()}},computed:{theme(){const t=this.$vuetify.theme.dark;return{text:t?"rgba(255, 255, 255, 0.4)":"rgba(0,0,0,0.87)",grid:t?"rgba(255, 255, 255, 0.3)":"rgba(0,0,0,0.07)"}},config(){const t=JSON.parse(JSON.stringify(this.heatmap));return t.series=(t.series||[]).filter((t=>null!=t.data)),t.ctx.data=Array.from({length:(t.ctx.to-t.ctx.from)/t.ctx.step+1},((e,s)=>t.ctx.from+s*t.ctx.step)),t.ctx.min=Math.min(...t.series.map((t=>Math.min(...t.data.filter((t=>!!t)))))),t.ctx.max=Math.max(...t.series.map((t=>Math.max(...t.data)))),t},legend(){const t=this.config;if(!t)return[];const{min:e,max:s}=t.ctx;if(e===1/0)return[];const a=(e+s)/2;return[{type:"min",value:kn(e,"/s")},{type:"avg",value:kn(a,"/s")},{type:"max",value:kn(s,"/s")}]},threshold(){const t={style:{display:"none"}},e=this.config;if(!this.ch||!e)return t;const s=e.series.findIndex((t=>!!t.threshold));if(-1===s)return t;const a=this.bbox,i=a.height/e.series.length;return{content:e.series[s].threshold,style:{display:"block",top:a.top+a.height-i*(s+1)-1+"px",left:a.left+"px",width:a.width+5+"px"}}},annotations(){return(this.config.annotations||[]).filter((t=>"incident"!==t.name)).map((t=>({msg:t.name,x:t.x1,icon:t.icon})))},incidents(){return(this.config.annotations||[]).filter((t=>"incident"===t.name)).map((t=>({x1:t.x1,x2:t.x2})))},tooltip(){const t=this.config;if(!t||null===this.idx)return[];const e=this.idx,s=Math.max(...t.series.map((t=>t.data[e])));let a=null;const i=t.series.findIndex((t=>!!t.threshold));if(i>-1){let s=t.series.filter(((t,e)=>e<=i)).reduce(((t,s)=>t+s.data[e]),0),r=t.series.filter(((t,e)=>e>i)).reduce(((t,s)=>t+s.data[e]),0);const o=s+r;s=100*s/o,r=100*r/o;const n=wn(s,r);a={below:kn(s,"%",n),above:kn(r,"%",n)}}const r=Math.max(...t.series.map((t=>t.title.length)));return t.series.map(((t,o)=>({label:t.title,error:"err"===t.value,value:kn(t.data[e],"/s"),bar:t.data[e]?Math.trunc(100*t.data[e]/s):0,threshold:o===i&&a,width:r}))).reverse()}},methods:{redraw(){const t=this.config,e=this.heatmapPaths(),s={height:250,width:this.$refs.uplot.clientWidth,padding:[20,20,0,0],ms:1,scales:{y:{min:0,max:t.series.length}},axes:[{space:80,font:xn,stroke:this.theme.text,grid:{stroke:this.theme.grid},ticks:{stroke:this.theme.grid},values:[[6e4,"{HH}:{mm}",null,null,"{MMM} {DD}",null,null,null,0],[1e3,"{HH}:{mm}:{ss}",null,null,"{MMM} {DD}",null,null,null,0]]},{scale:"y",font:xn,gap:0,size:60,stroke:this.theme.text,grid:{stroke:this.theme.grid},ticks:{stroke:this.theme.grid},splits:[0,...t.series.map(((t,e)=>e+1))],values:["0",...t.series.map((t=>t.name))]}],series:[{},...t.series.map((()=>({paths:e,alpha:0})))],cursor:{points:{show:!1},y:!!this.selection,drag:{setScale:!1,x:!!this.selection,y:!!this.selection},bind:{dblclick:()=>()=>null},lock:!0},legend:{show:!1},plugins:[this.$refs.tooltip.plugin(),this.selectionPlugin()]};this.ch&&this.ch.destroy(),this.ch=new L.Z(s,[t.ctx.data,...t.series.map((t=>t.data))],this.$refs.uplot),this.ch.root.style.font=xn,this.bbox=Object.entries(this.ch.bbox).reduce(((t,e)=>(t[e[0]]=e[1]/devicePixelRatio,t)),{})},heatmapPaths(){const t=this.config,e=t.ctx.max-t.ctx.min,s=1;return(a,i)=>{const r=a.data[0],o=a.data[i],n=a.bbox.height/t.series.length,l=a.bbox.width/r.length,c=a.bbox.height+a.bbox.top-i*n,d=a.bbox.left-l/2+s/2,u="err"===t.series[i-1].value?"0":"200";L.Z.orient(a,i,((t,i,m,h,p,v,f,_,g,y,b,x,w,k)=>{a.ctx.save(),r.forEach(((t,i)=>{if(!o[i])return;const r=new Path2D;k(r,d+i*l+l/2,c,l-s,n-s);const m=e?o[i]/e:1;a.ctx.fillStyle="hsl("+u+" 100% "+(75-Math.trunc(50*m))+"%)",a.ctx.fill(r)})),a.ctx.restore()}))}},selectionPlugin(){if(!this.selection)return{};const t=t=>{this.$emit("select",t)},e=e=>{e.over.addEventListener("click",(()=>{e.setSelect({width:0,height:0},!1),t({})}))},s=t=>{const e=this.config,s=this.selection;if(!s.x1&&!s.x2&&!s.y1&&!s.y2)return;const a={left:0,width:0,top:0,height:0};a.left=Math.max(t.valToPos(s.x1||e.ctx.from,"x"),0),a.width=Math.min(t.valToPos(s.x2||e.ctx.to,"x")-a.left,t.bbox.width/devicePixelRatio),a.top=(""===s.y2?0:t.valToPos(e.series.findIndex((t=>t.value===s.y2))+1,"y"))+1,a.height=(""===s.y1?t.bbox.height/devicePixelRatio:t.valToPos(e.series.findIndex((t=>t.value===s.y1))+1,"y"))-a.top,this.select=a,t.setSelect(a,!1)},a=e=>{const s=this.config,a=e.select,i=this.select;if(!a.width&&!a.height||a.left===i.left&&a.width===i.width&&a.top===i.top&&a.height===i.height)return;const r=Math.trunc(e.posToVal(a.left,"x")),o=Math.trunc(e.posToVal(a.left+a.width,"x"));let n=Math.trunc(e.posToVal(a.top+a.height,"y")),l=Math.trunc(e.posToVal(a.top,"y"));n=n<=0?"":s.series[n-1].value;const c=s.series.length;l=l>=c?s.series[c-1].value:s.series[l].value,t({x1:r,x2:o,y1:n,y2:l})};return{hooks:{init:e,ready:s,setSelect:a}}}}},Zn=Cn,$n=(0,_t.Z)(Zn,yn,bn,!1,null,"8baa8a9a",null),Sn=$n.exports,In=function(){var t=this,e=t._self._c;return e("div",[e(Gt.Z,{staticClass:"pa-4 mb-2",attrs:{outlined:""}},[t._t("check",(function(){return[e("Check",{attrs:{appId:t.appId,check:t.check}})]})),e("div",{staticClass:"mt-3"},[e("Led",{attrs:{status:t.data.status}}),t.data.message?[e("span",{domProps:{innerHTML:t._s(t.data.message)}}),"ok"===t.data.status?e("span",[t._v(" ("),e("a",{on:{click:function(e){t.configure=!0}}},[t._v("configure")]),t._v(") ")]):t._e()]:t.loading?e("span",[t._v("Loading...")]):t._e()],2),t.configured?e(Kt.Z,{attrs:{disabled:t.disabled}},[e(ps.Z,{staticClass:"mt-4",attrs:{items:t.sources,outlined:"","hide-details":"",dense:"","menu-props":{offsetY:!0}},on:{change:t.changeSource},model:{value:t.query.source,callback:function(e){t.$set(t.query,"source",e)},expression:"query.source"}}),e("div",{staticClass:"subtitle-1 mt-3"},[t._v("Filter:")]),e("div",{staticClass:"d-flex flex-wrap flex-md-nowrap align-center",staticStyle:{gap:"8px"}},[t._l(t.severities,(function(s){return e(hs.Z,{key:s.name,staticClass:"ma-0 text-no-wrap text-capitalize checkbox",attrs:{value:s.name,label:s.name,color:s.color,dense:"","hide-details":""},model:{value:t.query.severity,callback:function(e){t.$set(t.query,"severity",e)},expression:"query.severity"}})})),e("div",{staticClass:"d-flex flex-grow-1",staticStyle:{gap:"4px"}},[e(wt.Z,{attrs:{label:"Filter messages","prepend-inner-icon":"mdi-magnify",dense:"","hide-details":"","single-line":"",outlined:"",clearable:""},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.runQuery.apply(null,arguments))}},scopedSlots:t._u([t.query.hash?{key:"prepend-inner",fn:function(){return[e(_r.Z,{staticClass:"mr-2",attrs:{small:"",label:"",close:"","close-icon":"mdi-close"},on:{"click:close":function(e){return t.filterByPattern("")}}},[t._v(" pattern: "+t._s(t.query.hash.substr(0,7))+" ")])]},proxy:!0}:null],null,!0),model:{value:t.query.search,callback:function(e){t.$set(t.query,"search",e)},expression:"query.search"}}),e(et.Z,{attrs:{disabled:t.disabled,color:"success",height:"40"},on:{click:t.runQuery}},[t._v("Query")])],1)],2),e("div",{staticClass:"subtitle-1 mt-2"},[t._v("View:")]),e("div",{staticClass:"d-flex flex-wrap align-center",staticStyle:{gap:"12px"}},[e(fo.Z,{attrs:{dense:""},on:{change:t.setQuery},model:{value:t.query.view,callback:function(e){t.$set(t.query,"view",e)},expression:"query.view"}},t._l(t.views,(function(s){return e(et.Z,{staticClass:"text-capitalize",attrs:{value:s.name,disabled:s.disabled,height:"40"},on:{click:s.click}},[e(it.Z,{attrs:{small:""}},[t._v(t._s(s.icon))]),t._v(" "+t._s(s.name)+" ")],1)})),1),e(fo.Z,{attrs:{dense:""},on:{change:t.setQuery},model:{value:t.order,callback:function(e){t.order=e},expression:"order"}},[e(et.Z,{attrs:{value:"desc",disabled:t.disabled,height:"40"}},[e(it.Z,{attrs:{small:""}},[t._v("mdi-arrow-up-thick")]),t._v("Newest first")],1),e(et.Z,{attrs:{value:"asc",disabled:t.disabled,height:"40"}},[e(it.Z,{attrs:{small:""}},[t._v("mdi-arrow-down-thick")]),t._v("Oldest first")],1)],1),e("div",{staticClass:"d-flex align-center",staticStyle:{gap:"4px"}},[t._v(" Limit: "),e(ps.Z,{staticStyle:{width:"12ch"},attrs:{items:t.limits,disabled:t.disabled,outlined:"","hide-details":"",dense:"","menu-props":{offsetY:!0}},on:{change:t.setQuery},model:{value:t.query.limit,callback:function(e){t.$set(t.query,"limit",e)},expression:"query.limit"}})],1)],1)],1):t._e(),t.loading?e(ts.Z,{staticStyle:{position:"absolute",bottom:"0",left:"0"},attrs:{indeterminate:"",height:"4"}}):t._e()],2),e("div",{staticClass:"pt-5",staticStyle:{position:"relative","min-height":"50vh"}},[!t.loading&&t.loadingError?e("div",{staticClass:"pa-3 text-center red--text"},[t._v(" "+t._s(t.loadingError)+" ")]):[t.chart?e("Chart",{staticClass:"my-3",attrs:{chart:t.chart,selection:{}},on:{select:t.zoom}}):t._e(),"messages"===t.query.view?e("div",[t.entries?e(ns.Z,{staticClass:"entries",attrs:{dense:""}},[e("thead",[e("tr",[e("th",[t._v("Date")]),e("th",[t._v("Message")])])]),e("tbody",{staticClass:"mono"},t._l(t.entries,(function(s){return e("tr",{staticStyle:{cursor:"pointer"},on:{click:function(e){t.entry=s}}},[e("td",{staticClass:"text-no-wrap",staticStyle:{"padding-left":"1px"}},[e("div",{staticClass:"d-flex",staticStyle:{gap:"4px"}},[e("div",{staticClass:"marker",style:{backgroundColor:s.color}}),e("div",[t._v(t._s(s.date))])])]),e("td",{staticClass:"text-no-wrap"},[t._v(t._s(s.multiline?s.message.substr(0,s.multiline):s.message))])])})),0)]):t.loading?t._e():e("div",{staticClass:"pa-3 text-center grey--text"},[t._v("No messages found")]),t.entries&&t.data.limit?e("div",{staticClass:"text-right caption grey--text"},[t._v("The output is capped at "+t._s(t.data.limit)+" messages.")]):t._e(),t.entry?e(Yt.Z,{attrs:{width:"80%"},model:{value:t.entry,callback:function(e){t.entry=e},expression:"entry"}},[e(Gt.Z,{staticClass:"pa-5 entry"},[e("div",{staticClass:"d-flex align-center"},[e("div",{staticClass:"d-flex"},[e(_r.Z,{staticClass:"text-uppercase mr-2",attrs:{label:"",dark:"",small:"",color:t.entry.color}},[t._v(t._s(t.entry.severity))]),t._v(" "+t._s(t.entry.date)+" ")],1),e(ct.Z),e(et.Z,{attrs:{icon:""},on:{click:function(e){t.entry=null}}},[e(it.Z,[t._v("mdi-close")])],1)],1),e("div",{staticClass:"font-weight-medium my-3"},[t._v("Message")]),e("div",{staticClass:"message",class:{multiline:t.entry.multiline}},[t._v(" "+t._s(t.entry.message)+" ")]),e("div",{staticClass:"font-weight-medium mt-4 mb-2"},[t._v("Attributes")]),e(ns.Z,{attrs:{dense:""}},[e("tbody",t._l(t.entry.attributes,(function(s,a){return e("tr",[e("td",[t._v(t._s(a))]),e("td",["host.name"===a?e("router-link",{attrs:{to:{name:"node",params:{name:s},query:t.$utils.contextQuery()}}},[t._v(t._s(s))]):e("pre",[t._v(t._s(s))])],1)])})),0)]),t.entry.attributes["pattern.hash"]?e(et.Z,{staticClass:"mt-4",attrs:{color:"primary"},on:{click:function(e){return t.filterByPattern(t.entry.attributes["pattern.hash"])}}},[t._v(" Show similar messages ")]):t._e(),t.entry.attributes["trace.id"]?e(et.Z,{staticClass:"mt-4",attrs:{color:"primary",to:{params:{report:"Tracing"},query:{query:void 0,trace:"otel:"+t.entry.attributes["trace.id"]+":-:-:"}}}},[t._v(" Show the trace ")]):t._e()],1)],1):t._e()],1):t._e(),"patterns"===t.query.view?e("div",[t.patterns?e("div",{staticClass:"patterns"},t._l(t.patterns,(function(s){return e("div",{staticClass:"pattern",on:{click:function(e){t.pattern=s}}},[e("div",{staticClass:"sample"},[t._v(t._s(s.sample))]),e("div",{staticClass:"line"},[s.messages?e(nr.Z,{attrs:{value:s.messages,smooth:"",height:"30",fill:"",color:s.color,padding:"4"}}):t._e()],1),e("div",{staticClass:"percent"},[t._v(t._s(s.percent))])])})),0):t.loading?t._e():e("div",{staticClass:"pa-3 text-center grey--text"},[t._v("No patterns found")]),t.pattern?e(Yt.Z,{attrs:{width:"80%"},model:{value:t.pattern,callback:function(e){t.pattern=e},expression:"pattern"}},[e(Gt.Z,{staticClass:"pa-5",attrs:{tile:""}},[e("div",{staticClass:"d-flex align-center"},[e("div",{staticClass:"d-flex"},[e(_r.Z,{staticClass:"text-uppercase mr-2",attrs:{label:"",dark:"",small:"",color:t.pattern.color}},[t._v(t._s(t.pattern.severity))]),t._v(" "+t._s(t.pattern.sum)+" events ")],1),e(ct.Z),e(et.Z,{attrs:{icon:""},on:{click:function(e){t.pattern=null}}},[e(it.Z,[t._v("mdi-close")])],1)],1),t.pattern.chart?e("Chart",{attrs:{chart:t.pattern.chart}}):t._e(),e("div",{staticClass:"font-weight-medium my-3"},[t._v("Sample")]),e("div",{staticClass:"message",class:{multiline:t.pattern.multiline}},[t._v(" "+t._s(t.pattern.sample)+" ")]),t.configured?e(et.Z,{staticClass:"mt-4",attrs:{color:"primary"},on:{click:function(e){return t.filterByPattern(t.pattern.hash)}}},[t._v(" Show messages ")]):t._e()],1)],1):t._e()],1):t._e()]],2),e(Yt.Z,{attrs:{"max-width":"800"},model:{value:t.configure,callback:function(e){t.configure=e},expression:"configure"}},[e(Gt.Z,{staticClass:"pa-5"},[e("div",{staticClass:"d-flex align-center font-weight-medium mb-4"},[t._v(' Link "'+t._s(t.$utils.appId(t.appId).name)+'" with a service '),e(ct.Z),e(et.Z,{attrs:{icon:""},on:{click:function(e){t.configure=!1}}},[e(it.Z,[t._v("mdi-close")])],1)],1),e("div",{staticClass:"subtitle-1"},[t._v("Choose a corresponding OpenTelemetry service:")]),e(ps.Z,{attrs:{items:t.services,outlined:"",dense:"","hide-details":"","menu-props":{offsetY:!0},clearable:""},model:{value:t.form.service,callback:function(e){t.$set(t.form,"service",e)},expression:"form.service"}}),e("div",{staticClass:"grey--text my-4"},[t._v(" To configure an application to send logs follow the "),e("a",{attrs:{href:"https://codexray.com/docs/codexray/logs",target:"_blank"}},[t._v("documentation")]),t._v(". ")]),t.error?e(K.Z,{staticClass:"my-3",attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(" "+t._s(t.error)+" ")]):t._e(),t.message?e(K.Z,{staticClass:"my-3",attrs:{color:"green",outlined:"",text:""}},[t._v(" "+t._s(t.message)+" ")]):t._e(),e(et.Z,{staticClass:"mt-5",attrs:{block:"",color:"primary",loading:t.saving,disabled:!t.changed},on:{click:t.save}},[t._v("Save")])],1)],1)],1)},qn=[],Pn=function(){var t=this,e=t._self._c;return e("div",[e("CheckDetails",{attrs:{check:t.check},on:{configure:function(e){t.configure=!0}}}),e("CheckForm",{attrs:{appId:t.appId,check:t.check},model:{value:t.configure,callback:function(e){t.configure=e},expression:"configure"}})],1)},An=[],On=function(){var t=this,e=t._self._c;return e("div",{class:`status-${t.check.status}`},[e("span",[t._v(t._s(t.check.title)+": ")]),t.check.message?[t._v(" "+t._s(t.check.message)+" ")]:[t._v("ok")],e("div",{staticClass:"condition"},[e("span",[t._v("Condition: ")]),e("span",[t._v(t._s(t.condition.head))]),e("a",{on:{click:function(e){return t.$emit("configure")}}},[t._v(t._s(t.threshold))]),e("span",[t._v(t._s(t.condition.tail))])])],2)},Tn=[],jn={props:{check:Object},computed:{condition(){const t=this.check.condition_format_template.split("<threshold>",2);return 0===t.length?{head:"",tail:""}:1===t.length?{head:t[0],tail:""}:{head:t[0],tail:t[1]}},threshold(){switch(this.check.unit){case"percent":return this.check.threshold+"%";case"second":return this.$format.duration(1e3*this.check.threshold,"ms");case"seconds/second":return this.check.threshold+" seconds/second"}return this.check.threshold}}},En=jn,Ln=(0,_t.Z)(En,On,Tn,!1,null,"d6d495d6",null),Nn=Ln.exports,Mn={props:{appId:String,check:Object},components:{CheckDetails:Nn,CheckForm:Ks},data(){return{configure:!1}}},zn=Mn,Fn=(0,_t.Z)(zn,Pn,An,!1,null,"53d94b3f",null),Dn=Fn.exports;const Rn=t=>(t=t.toLowerCase(),t.startsWith("crit")?{num:5,color:"black"}:t.startsWith("err")?{num:4,color:"red-darken1"}:t.startsWith("warn")?{num:3,color:"orange-lighten1"}:t.startsWith("info")?{num:2,color:"blue-lighten2"}:t.startsWith("debug")?{num:1,color:"green-lighten1"}:{num:0,color:"grey-lighten1"});var Hn={components:{Led:Pt,Chart:Xo,Check:Dn},props:{appId:String,check:Object},data(){return{loading:!1,loadingError:"",data:{},query:{},order:"",configure:!1,form:{service:null},saved:"",saving:!1,error:"",message:"",entry:null,pattern:null}},computed:{configured(){return"unknown"!==this.data.status},sources(){return(this.data.sources||[]).map((t=>({value:t,text:"otel"===t?"OpenTelemetry":"Container logs"})))},services(){return this.data.services||[]},views(){const t=this.data.views||[],e=[{name:"messages",icon:"mdi-format-list-bulleted",click:()=>{}},{name:"patterns",icon:"mdi-creation",click:()=>this.filterByPattern("")}];return e.forEach((e=>{e.disabled=t.indexOf(e.name)<0})),e},severities(){if(!this.data.severities)return[];const t=this.data.severities.map((t=>{const e=Rn(t);return{name:t,num:e.num,color:ko.get(e.color)}}));return t.sort(((t,e)=>t.num-e.num)),t},chart(){const t=this.data.chart;return t?t.series?(t.series.forEach((t=>{const e=Rn(t.name);t.num=e.num,t.color=e.color})),t.series.sort(((t,e)=>t.num-e.num)),t.sorted=!0,t):t:null},entries(){if(!this.data.entries)return null;const t=this.data.entries.map((t=>{const e=t.message.indexOf("\n");return{severity:t.severity,timestamp:t.timestamp,color:ko.get(Rn(t.severity).color),date:this.$format.date(t.timestamp,"{MMM} {DD} {HH}:{mm}:{ss}"),message:t.message,attributes:t.attributes,multiline:e>0?e:0}}));return"asc"===this.order?t.sort(((t,e)=>t.timestamp-e.timestamp)):t.sort(((t,e)=>e.timestamp-t.timestamp)),t},patterns(){if(!this.data.patterns)return null;let t=this.data.patterns.reduce(((t,e)=>t+e.sum),0);return this.data.patterns.map((e=>{const s=100*e.sum/t,a=e.sample.indexOf("\n");let i=null;return e.chart&&e.chart.series&&e.chart.series[0]&&(e.chart.series[0].color=(Rn(e.severity)||{}).color,i=e.chart.series[0].data.map((t=>null===t?0:t))),{severity:e.severity,color:ko.get(Rn(e.severity).color),sample:e.sample,multiline:a>0?a:0,messages:i,sum:e.sum,percent:(s<1?"<1":Math.trunc(s))+"%",hash:e.hash,chart:e.chart}}))},limits(){return[10,20,50,100,1e3]},disabled(){return this.loading||"messages"!==this.query.view},changed(){return!!this.form&&this.saved!==JSON.stringify(this.form)}},mounted(){this.getQuery(),this.get(),this.$events.watch(this,this.get,"refresh")},watch:{"$route.query"(t,e){this.getQuery(),t.query!==e.query&&this.get()}},methods:{getQuery(){const t=this.$route.query;let e={};try{e=JSON.parse(t.query||"{}")}catch{}let s=e.severity||[];s.length||(s=this.data.severities||[]),this.query={source:e.source||"",view:e.view||"messages",search:e.search||"",hash:e.hash||"",severity:s,limit:e.limit||100},this.order=t.order||"desc"},setQuery(){"patterns"===this.query.view&&(this.query.severity=this.data.severities||[],this.query.search="",this.query.hash="",this.order="");const t={query:JSON.stringify(this.query),view:this.view,order:this.order};this.$router.push({query:{...this.$route.query,...t}}).catch((t=>t))},runQuery(){const t=this.$route.query.query;this.setQuery(),this.$route.query.query===t&&this.get()},changeSource(t){this.data.severities=[],this.query.source=t,this.query.severity=[],this.query.search="",this.query.hash="",this.setQuery()},filterByPattern(t){this.query.view="messages",this.pattern=null,this.query.hash=t,this.entry=null,this.setQuery()},zoom(t){const{from:e,to:s}=t.selection,a={...this.$route.query,from:e,to:s};this.$router.push({query:a}).catch((t=>t))},get(){this.loading=!0,this.loadingError="",this.data.chart=null,this.data.entries=null,this.data.patterns=null,this.$api.getLogs(this.appId,this.$route.query.query,((t,e)=>{this.loading=!1;const s="Failed to load logs";if(e||"warning"===t.status)return this.loadingError=e||t.message,this.data.status="warning",void(this.data.message=s);this.data=t,this.form.service=this.data.service,this.saved=JSON.stringify(this.form),this.query.source=this.data.source,this.query.view=this.data.view,this.query.severity=this.data.severity}))},save(){this.saving=!0,this.error="",this.message="",this.$api.saveLogsSettings(this.appId,this.form,((t,e)=>{this.saving=!1,e?this.error=e:(this.message="Settings were successfully updated.",setTimeout((()=>{this.message="",this.configure=!1}),1e3),this.get())}))}}},Vn=Hn,Un=(0,_t.Z)(Vn,In,qn,!1,null,"c8a20cb6",null),Bn=Un.exports,Wn=function(){var t=this,e=t._self._c;return e("div",[e(Gt.Z,{staticClass:"my-4 pa-4",attrs:{outlined:""}},[e("div",[e("Led",{attrs:{status:t.view.status}}),t.view.message?[e("span",{domProps:{innerHTML:t._s(t.view.message)}}),"warning"!==t.view.status&&t.view.services&&t.view.services.length?e("span",[t._v(" ("),e("a",{on:{click:function(e){t.configure=!0}}},[t._v("configure")]),t._v(") ")]):t._e()]:e("span",[t._v("Loading...")])],2),t.view.profiles?e(ps.Z,{staticClass:"mt-4",attrs:{value:t.query.type,items:t.profiles,outlined:"","hide-details":"",dense:"","menu-props":{offsetY:!0}},on:{change:t.changeType}}):t._e(),t.view.chart?e("div",{staticClass:"grey--text mt-3"},[e(it.Z,{staticStyle:{"vertical-align":"baseline"},attrs:{size:"20"}},[t._v("mdi-lightbulb-on-outline")]),t._v(" Select a chart area to zoom in or compare with the previous period ")],1):t._e(),t.loading?e(ts.Z,{staticStyle:{position:"absolute",bottom:"0",left:"0"},attrs:{indeterminate:"",height:"4"}}):t._e()],1),t.view.chart?e("Chart",{staticClass:"my-5",attrs:{chart:t.view.chart,selection:t.selection,loading:t.loading},on:{select:t.setSelection}}):t._e(),e("div",{staticStyle:{position:"relative","min-height":"100vh"}},[!t.loading&&t.loadingError?e("div",{staticClass:"pa-3 text-center red--text"},[t._v(" "+t._s(t.loadingError)+" ")]):t._e(),t.view.profile?e("FlameGraph",{staticClass:"pt-2",attrs:{profile:t.view.profile,instances:t.view.instances||[],instance:t.query.instance||"",limit:.5},on:{"change:instance":t.changeInstance}}):t._e()],1),e(Yt.Z,{attrs:{"max-width":"800"},model:{value:t.configure,callback:function(e){t.configure=e},expression:"configure"}},[e(Gt.Z,{staticClass:"pa-5"},[e("div",{staticClass:"d-flex align-center font-weight-medium mb-4"},[t._v(' Link "'+t._s(t.$utils.appId(t.appId).name)+'" with an application '),e(ct.Z),e(et.Z,{attrs:{icon:""},on:{click:function(e){t.configure=!1}}},[e(it.Z,[t._v("mdi-close")])],1)],1),e("div",{staticClass:"subtitle-1"},[t._v("Choose a corresponding application:")]),e(ps.Z,{attrs:{items:t.services,outlined:"",dense:"","hide-details":"","menu-props":{offsetY:!0},clearable:""},model:{value:t.form.service,callback:function(e){t.$set(t.form,"service",e)},expression:"form.service"}}),e("div",{staticClass:"grey--text my-4"},[t._v(" To configure an application to send profiles follow the "),e("a",{attrs:{href:"https://codexray.com/docs/codexray/profiling",target:"_blank"}},[t._v("documentation")]),t._v(". ")]),t.error?e(K.Z,{staticClass:"my-3",attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(" "+t._s(t.error)+" ")]):t._e(),t.message?e(K.Z,{staticClass:"my-3",attrs:{color:"green",outlined:"",text:""}},[t._v(" "+t._s(t.message)+" ")]):t._e(),e(et.Z,{staticClass:"mt-5",attrs:{block:"",color:"primary",loading:t.saving,disabled:!t.changed},on:{click:t.save}},[t._v("Save")])],1)],1)],1)},Qn=[],Jn=s(3716),Gn=s(9241),Yn=function(){var t=this,e=t._self._c;return e("div",[e(Gn.Z,{staticStyle:{margin:"-4px"}},[e(Jn.Z,{staticStyle:{padding:"4px"},attrs:{cols:"12",sm:"6"}},[e(ps.Z,{attrs:{items:t.instances,label:"Select instance",outlined:"",dense:"","hide-details":"",clearable:"","single-line":"","menu-props":{offsetY:!0}},on:{change:function(e){return t.$emit("change:instance",t.instanceInternal)}},model:{value:t.instanceInternal,callback:function(e){t.instanceInternal=e},expression:"instanceInternal"}})],1),e(Jn.Z,{staticStyle:{padding:"4px"},attrs:{cols:"12",sm:"6"}},[e(wt.Z,{attrs:{dense:"","hide-details":"",clearable:"","prepend-inner-icon":"mdi-magnify",label:"Search","single-line":"",outlined:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1),t.profile.flamegraph?e("FlameGraphNode",{staticClass:"mt-2",attrs:{node:t.profile.flamegraph,parent:t.profile.flamegraph,root:t.profile.flamegraph,zoom:t.zoom,search:t.search,diff:t.diff,unit:t.unit,limit:t.limit,actions:t.actions},on:{zoom:function(e){t.zoom=!0}}}):t._e()],1)},Kn=[],Xn=function(){var t=this,e=t._self._c;return t.show?e("div",{style:t.style},[e("div",{ref:"name",on:{mouseenter:function(e){t.details=!0},mouseleave:function(e){t.details=!1},click:t.click}},[e("div",{staticClass:"name",class:{dimmed:t.zoom&&t.zoomed},style:{backgroundColor:t.color}},[t._v(" "+t._s(t.node.name)+" "),t.diff?[t.rates.diff?[t._v(" ("+t._s(t.format(t.rates.diff,"%",!0))+") ")]:t._e()]:[t._v(" ("+t._s(t.format(t.node.total,t.unit))+", "+t._s(t.format(t.rates.root,"%"))+") ")]],2)]),e("div",{staticClass:"children"},t._l(t.node.children,(function(s){return e("FlameGraphNode",{attrs:{node:s,parent:t.node,root:t.root,zoom:t.zoomed?t.zoomed===s.name:void 0,search:t.search,diff:t.diff,unit:t.unit,limit:t.limit,actions:t.actions},on:{zoom:function(e){return t.emit(s)}}})})),1),t.details?e(Li.Z,{attrs:{value:!0,activator:t.$refs.name,bottom:"",transition:"none","content-class":"details"}},[e(Gt.Z,{staticClass:"pa-2"},[e("div",{staticClass:"font-weight-medium mb-1"},[t._v(t._s(t.node.name))]),t.diff?[e("div",[t._v("baseline: "+t._s(t.format(t.rates.base,"%"))+" of total")]),e("div",{staticClass:"comparison"},[t._v(" comparison: "+t._s(t.format(t.rates.comp,"%"))+" of total "),0!==t.rates.diff?[t._v(" ("),e("span",{staticClass:"percent",class:{ok:t.rates.diff<0}},[t._v(t._s(t.format(t.rates.diff,"%",!0)))]),t._v(") ")]:t._e()],2)]:[e("div",[t._v("total: "+t._s(t.format(t.node.total,t.unit))+" ("+t._s(t.format(t.rates.root,"%"))+")")]),e("div",[t._v("self: "+t._s(t.format(t.node.self,t.unit)))])]],2)],1):t._e(),t.actions?e(lt.Z,{attrs:{absolute:"","position-x":t.menu.x,"position-y":t.menu.y,"offset-y":"","open-on-click":!1},model:{value:t.menu.show,callback:function(e){t.$set(t.menu,"show",e)},expression:"menu.show"}},[e(rt.Z,{staticClass:"pa-0",staticStyle:{"font-size":"14px"},attrs:{dense:""}},[e(ot.Z,{staticClass:"px-2",staticStyle:{"min-height":"32px"},attrs:{dense:""},on:{click:function(e){return t.emit()}}},[e(it.Z,{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-magnify")]),t._v(" Zoom in ")],1),t._l(t.actions,(function(s){return e(ot.Z,{staticClass:"px-2",staticStyle:{"min-height":"32px"},attrs:{to:s.to(t.node),dense:"",exact:""}},[e(it.Z,{staticClass:"mr-1",attrs:{small:""}},[t._v(t._s(s.icon))]),t._v(" "+t._s(s.title)+" ")],1)}))],2)],1):t._e()],1):t._e()},tl=[],el={name:"FlameGraphNode",props:{node:Object,parent:Object,root:Object,zoom:Boolean,search:String,diff:Number,unit:String,limit:Number,actions:Array},data(){return{details:!1,menu:{show:!1,x:0,y:0},zoomed:""}},computed:{rates(){const t={root:this.node.total/this.root.total*100,parent:this.node.total/this.parent.total*100,base:(this.node.total-this.node.comp)/(this.root.total-this.root.comp)*100,comp:this.node.comp/this.root.comp*100};return t.diff=t.comp-t.base,t},show(){return this.rates.root>(this.limit||0)},width(){return!1===this.zoom?"0":!0===this.zoom?"100%":this.rates.parent+"%"},style(){switch(this.zoom){case!1:return{display:"none"};case!0:return{display:"block",width:"100%"};default:return{display:"block",width:this.rates.parent+"%"}}},color(){if(this.search&&!this.node.name.toLowerCase().includes(this.search.toLowerCase()))return ko.get("grey-lighten3");if(this.diff){let t=this.rates.diff/this.diff;return t=t<0?Math.max(t,-1):Math.min(t,1),t=(80*t).toFixed(0),t<0?`hsl(120, ${-t}%, 70%)`:`hsl(0, ${t}%, 70%)`}if(this.node.color_by)return ko.hash2(this.node.color_by);let t=this.node.name;const e=t.lastIndexOf("/");return e>0&&(t=t.substr(0,e)),ko.hash2(t)}},watch:{zoom(t){t||(this.zoomed="")}},methods:{click(t){this.actions?(this.menu.show=!0,this.menu.x=t.clientX,this.menu.y=t.clientY):this.emit()},emit(t){this.zoomed=t?t.name:"",this.$emit("zoom")},format(t,e,s){const a=s&&t>0?"+":"",i=Math.abs(t);if("%"===e){let e=2;return i>1&&(e=1),i>10&&(e=0),a+t.toFixed(e)+"%"}return"nanoseconds"===e?(e="ns",i>1e3&&(t/=1e3,e="μs"),i>1e6&&(t/=1e3,e="ms"),i>1e9&&(t/=1e3,e="s"),i>6e10&&(t/=60,e="min"),a+t.toFixed(0)+" "+e):"bytes"===e?(e="B",i>1e3&&(t/=1e3,e="KB"),i>1e6&&(t/=1e3,e="MB"),i>1e9&&(t/=1e3,e="GB"),a+t.toFixed(1)+" "+e):(i>1e3&&(t/=1e3,e="K"),i>1e6&&(t/=1e3,e="M"),i>1e9&&(t/=1e3,e="G"),a+t.toFixed(1)+" "+e)}}},sl=el,al=(0,_t.Z)(sl,Xn,tl,!1,null,"4fa032d1",null),il=al.exports;function rl(t,e){const s=(e.total-e.comp)/(t.total-t.comp),a=e.comp/t.comp,i=Math.abs(a-s);return Math.max(i,...(e.children||[]).map((e=>rl(t,e))))}var ol={props:{profile:Object,instances:Array,instance:String,limit:Number,actions:Array},components:{FlameGraphNode:il},data(){return{zoom:void 0,instanceInternal:this.instance,search:""}},computed:{unit(){return this.profile.type.split(":")[2]||""},diff(){return this.profile.diff?Math.max(5,100*rl(this.profile.flamegraph,this.profile.flamegraph)):0}}},nl=ol,ll=(0,_t.Z)(nl,Yn,Kn,!1,null,"0ce58160",null),cl=ll.exports,dl={props:{appId:String},components:{Chart:Xo,Led:Pt,FlameGraph:cl},data(){return{loading:!1,loadingError:"",view:{},selection:{mode:"diff"},configure:!1,form:{service:null},saved:"",saving:!1,error:"",message:""}},computed:{profiles(){return(this.view.profiles||[]).map((t=>({text:t.name||t.type,value:t.type})))},query(){try{return JSON.parse(this.$route.query.query||"")}catch{return{type:"",from:0,to:0,mode:""}}},services(){return(this.view.services||[]).map((t=>t.name))},changed(){return!!this.form&&this.saved!==JSON.stringify(this.form)}},mounted(){this.get(),this.$events.watch(this,this.get,"refresh");const{mode:t,from:e,to:s}=this.query;this.selection={mode:t||"diff",from:e,to:s}},methods:{changeType(t){this.setQuery({type:t}),this.get()},changeInstance(t){this.setQuery({instance:t}),this.get()},setSelection(t){const{mode:e,from:s,to:a}=t.selection;this.selection={mode:e||"diff",from:s,to:a},this.setQuery({mode:e,from:s,to:a},t.ctx),this.get()},setQuery(t,e){const s=JSON.stringify({...this.query,...t});this.$router.replace({query:{...this.$route.query,...e,query:s}}).catch((t=>t))},get(){this.loading=!0,this.loadingError="",this.$api.getProfiling(this.appId,this.$route.query.query,((t,e)=>{this.loading=!1;const s="Failed to load profile";if(e)return this.loadingError=e,this.view.status="warning",this.view.message=s,this.view.chart=null,void(this.view.profile=null);this.view=t;const a=(this.view.services||[]).find((t=>t.linked));this.form.service=a?a.name:null,this.saved=JSON.stringify(this.form),this.view.profile&&this.view.profile.type&&this.setQuery({type:this.view.profile.type})}))},save(){this.saving=!0,this.error="",this.message="",this.$api.saveProfilingSettings(this.appId,this.form,((t,e)=>{this.saving=!1,e?this.error=e:(this.message="Settings were successfully updated.",setTimeout((()=>{this.message="",this.configure=!1}),1e3),this.get())}))}}},ul=dl,ml=(0,_t.Z)(ul,Wn,Qn,!1,null,"49a6d095",null),hl=ml.exports,pl=function(){var t=this,e=t._self._c;return e("div",[e(Gt.Z,{staticClass:"mt-4 pa-4",attrs:{outlined:""}},[e("div",[e("Led",{attrs:{status:t.view.status}}),t.view.message?[e("span",{domProps:{innerHTML:t._s(t.view.message)}}),"warning"!==t.view.status?e("span",[t._v(" ("),e("a",{on:{click:function(e){t.configure=!0}}},[t._v("configure")]),t._v(") ")]):t._e()]:t.loading?e("span",[t._v("Loading...")]):t._e()],2),t.view.heatmap?[t.view.sources?e(ps.Z,{staticClass:"mt-4",attrs:{value:t.source,items:t.sources,outlined:"","hide-details":"",dense:"","menu-props":{offsetY:!0}},on:{change:t.changeSource}}):t._e(),t.compact?t._e():[e("div",{staticClass:"grey--text my-3"},[e(it.Z,{staticStyle:{"vertical-align":"baseline"},attrs:{size:"20"}},[t._v("mdi-lightbulb-on-outline")]),t._v(" Select a chart area to see traces for a specific time range, duration, or status. ")],1),e("div",{staticClass:"d-flex flex-column flex-md-row",staticStyle:{gap:"8px","row-gap":"8px"}},[e(et.Z,{staticClass:"text-body-2",attrs:{depressed:"",small:"",color:"success",disabled:t.loading},on:{click:function(e){return t.setSelection("errors")}}},[t._v(" Show error traces ")]),e(et.Z,{staticClass:"text-body-2",attrs:{depressed:"",small:"",color:"success",disabled:t.loading},on:{click:function(e){return t.setSelection("slo violations")}}},[t._v(" Show latency SLO violations ")])],1)]]:t._e(),t.loading?e(ts.Z,{staticStyle:{position:"absolute",bottom:"0",left:"0"},attrs:{indeterminate:"",height:"4"}}):t._e()],2),t.view.heatmap?e("Heatmap",{staticClass:"mt-5",attrs:{heatmap:t.view.heatmap,selection:t.selection,loading:t.loading},on:{select:t.setSelection}}):t._e(),t.trace.id?e("div",{staticClass:"mt-5",staticStyle:{"min-height":"50vh"}},[e("div",{staticClass:"text-md-h6 mb-3"},[e("router-link",{attrs:{to:{query:t.setTrace({id:"",span:""})}}},[e(it.Z,[t._v("mdi-arrow-left")])],1),t._v(" Trace "+t._s(t.trace.id)+" ")],1),t.loading?e(ts.Z,{attrs:{indeterminate:"",color:"green",height:"4"}}):t._e(),t.view.spans?e("TracingTrace",{attrs:{spans:t.view.spans,span:t.trace.span}}):t._e()],1):e("div",{staticClass:"mt-5",staticStyle:{"min-height":"50vh"}},[e(ns.Z,{staticClass:"spans",attrs:{dense:""}},[e("thead",[e("tr",[e("th",[t._v("Trace ID")]),e("th",[t._v("Client")]),e("th",[t._v("Status")]),e("th",[t._v("Duration")]),e("th",[t._v("Name")]),e("th",[t._v("Details")])])]),e("tbody",t._l(t.view.spans,(function(s){return e("tr",[e("td",[e("router-link",{staticClass:"text-no-wrap",attrs:{to:{query:t.setTrace({id:s.trace_id,span:s.id})},exact:""}},[e(it.Z,{staticStyle:{"vertical-align":"baseline"},attrs:{small:""}},[t._v("mdi-chart-timeline")]),t._v(" "+t._s(s.trace_id.substring(0,8))+" ")],1)],1),e("td",{staticClass:"text-no-wrap"},[t._v(t._s(s.client))]),e("td",{staticClass:"text-no-wrap"},[s.status.error?e(it.Z,{staticClass:"ml-1",staticStyle:{"margin-bottom":"2px"},attrs:{color:"error",small:""}},[t._v("mdi-alert-circle")]):e(it.Z,{staticClass:"ml-1",staticStyle:{"margin-bottom":"2px"},attrs:{color:"success",small:""}},[t._v("mdi-check-circle")]),t._v(" "+t._s(s.status.message)+" ")],1),e("td",{staticClass:"text-no-wrap"},[t._v(" "+t._s(s.duration.toFixed(1))+" "),e("span",{staticClass:"caption grey--text"},[t._v(" ms")])]),e("td",{staticClass:"text-no-wrap"},[t._v(" "+t._s(s.name)+" ")]),e("td",[e("div",{directives:[{name:"highlight",rawName:"v-highlight",value:s.details.lang,expression:"s.details.lang"}],staticClass:"details"},[t._v(t._s(s.details.text))])])])})),0)]),!t.loading&&t.loadingError?e("div",{staticClass:"pa-3 text-center red--text"},[t._v(" "+t._s(t.loadingError)+" ")]):t.loading||t.view.spans&&t.view.spans.length?t._e():e("div",{staticClass:"pa-3 text-center grey--text"},[t._v("No traces found")]),t.view.spans&&t.view.spans.length&&t.view.limit?e("div",{staticClass:"text-right caption grey--text"},[t._v(" The output is capped at "+t._s(t.view.limit)+" traces. ")]):t._e()],1),e(Yt.Z,{attrs:{"max-width":"800"},model:{value:t.configure,callback:function(e){t.configure=e},expression:"configure"}},[e(Gt.Z,{staticClass:"pa-5"},[e("div",{staticClass:"d-flex align-center font-weight-medium mb-4"},[t._v(' Link "'+t._s(t.$utils.appId(t.appId).name)+'" with a service '),e(ct.Z),e(et.Z,{attrs:{icon:""},on:{click:function(e){t.configure=!1}}},[e(it.Z,[t._v("mdi-close")])],1)],1),e("div",{staticClass:"subtitle-1"},[t._v("Choose a corresponding OpenTelemetry service:")]),e(ps.Z,{attrs:{items:t.services,outlined:"",dense:"","hide-details":"","menu-props":{offsetY:!0},clearable:""},model:{value:t.form.service,callback:function(e){t.$set(t.form,"service",e)},expression:"form.service"}}),e("div",{staticClass:"grey--text my-4"},[t._v(" To configure an application to send traces follow the "),e("a",{attrs:{href:"https://codexray.com/docs/codexray/tracing",target:"_blank"}},[t._v("documentation")]),t._v(". ")]),t.error?e(K.Z,{staticClass:"my-3",attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(" "+t._s(t.error)+" ")]):t._e(),t.message?e(K.Z,{staticClass:"my-3",attrs:{color:"green",outlined:"",text:""}},[t._v(" "+t._s(t.message)+" ")]):t._e(),e(et.Z,{staticClass:"mt-5",attrs:{block:"",color:"primary",loading:t.saving,disabled:!t.changed},on:{click:t.save}},[t._v("Save")])],1)],1)],1)},vl=[],fl=function(){var t=this,e=t._self._c;return t.roots.length?e("div",[e("div",{staticClass:"details mb-3"},[e("span",{staticClass:"d-none d-md-inline"},[e("span",{staticClass:"grey--text"},[t._v("Started at:")]),t._v(" "+t._s(t.$format.date(t.range.from,"{YYYY}-{MM}-{DD} {HH}:{mm}:{ss}.{fff}"))+" ")]),e("span",{staticClass:"grey--text ml-1"},[t._v("Duration:")]),t._v(" "+t._s((t.range.to-t.range.from).toFixed(2))+"ms "),e("span",{staticClass:"grey--text ml-1 mr-1"},[t._v("Status:")]),e("span",{staticClass:"d-inline-flex"},[t.roots[0].status.error?e(it.Z,{attrs:{color:"error",small:""}},[t._v("mdi-alert-circle")]):e(it.Z,{attrs:{color:"success",small:""}},[t._v("mdi-check-circle")]),t._v(" "+t._s(t.roots[0].status.message)+" ")],1)]),e("div",{staticClass:"header"},[e("div",{staticClass:"name",style:{minWidth:t.split+"%"}},[t._v(" Service & Operation "),e(ct.Z),t.span?e("a",{staticClass:"caption px-1",on:{click:function(e){t.full=!t.full}}},[t._v(" "+t._s(t.full?"show sub-trace":"show full trace")+" ")]):t._e()],1),e("div",{staticClass:"ticks d-none d-md-flex",style:{width:100-t.split+"%"}},t._l(t.ticks,(function(s){return e("div",{staticClass:"tick grey--text caption",style:{width:s.width+"%"}},[t._v(" "+t._s(s.value)+" ")])})),0)]),t._l(t.roots,(function(s){return e("TracingSpan",{key:s.id,attrs:{span:s,ticks:t.ticks,split:t.split}})}))],2):t._e()},_l=[],gl=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"span",on:{click:function(e){t.details=!0}}},[e("div",{staticClass:"nameColumn",style:t.nameColumn},[t._l(t.span.level,(function(t){return e("span",{staticClass:"indent"})})),e("span",[t.span.children.length?[t.folded?e(it.Z,{staticClass:"icon",attrs:{small:""},on:{click:function(e){e.stopPropagation(),t.folded=!1}}},[t._v("mdi-chevron-right")]):e(it.Z,{staticClass:"icon",attrs:{small:""},on:{click:function(e){e.stopPropagation(),t.folded=!0}}},[t._v("mdi-chevron-down")])]:e(it.Z,{attrs:{small:""}},[t._v("mdi-circle-small")]),e("span",{staticClass:"service",style:t.service},[t._v(t._s(t.span.service))]),e("span",{staticClass:"caption grey--text ml-1"},[t._v(t._s(t.span.name))])],2),e(ct.Z),t.span.status.error?e(it.Z,{staticClass:"mr-1",attrs:{color:"error",small:""}},[t._v("mdi-alert-circle")]):t._e()],2),e("div",{staticClass:"barColumn",style:t.barColumn},[t._l(t.ticks,(function(t,s){return e("div",{staticClass:"tick",style:{left:s*t.width+"%"}})})),e("div",{staticClass:"bar",style:t.bar}),e("div",{staticClass:"caption grey--text my-auto ml-1"},[t._v(t._s(t.span.duration.toFixed(2))+"ms")])],2)]),t.folded?t._e():t._l(t.span.children,(function(s){return e("TracingSpan",{key:s.id,staticClass:"child",attrs:{span:s,ticks:t.ticks,split:t.split}})})),e(Yt.Z,{attrs:{width:"80%"},model:{value:t.details,callback:function(e){t.details=e},expression:"details"}},[e(Gt.Z,{staticClass:"pa-5"},[e("div",{staticClass:"text-h6 d-flex"},[e("span",[t._v("Span: "+t._s(t.span.id))]),e(ct.Z),e(et.Z,{attrs:{icon:""},on:{click:function(e){t.details=!1}}},[e(it.Z,[t._v("mdi-close")])],1)],1),e(ns.Z,{attrs:{dense:""}},[e("tbody",[e("tr",[e("td",[t._v("name")]),e("td",[e("pre",[t._v(t._s(t.span.name))])])]),e("tr",[e("td",[t._v("service")]),e("td",[e("pre",[t._v(t._s(t.span.service))])])]),e("tr",[e("td",[t._v("duration")]),e("td",[e("pre",[t._v(t._s(t.span.duration.toFixed(2))+"ms")])])]),e("tr",[e("td",[t._v("status")]),e("td",[e("div",{staticClass:"d-flex"},[t.span.status.error?e(it.Z,{attrs:{color:"error",small:""}},[t._v("mdi-alert-circle")]):e(it.Z,{attrs:{color:"success",small:""}},[t._v("mdi-check-circle")]),e("pre",[t._v(t._s(t.span.status.message))])],1)])])])]),e("div",{staticClass:"font-weight-medium mt-4"},[t._v("Attributes")]),e(ns.Z,{attrs:{dense:""}},[e("tbody",t._l(t.span.attributes,(function(s,a){return e("tr",[e("td",[t._v(t._s(a))]),e("td",[e("pre",[t._v(t._s(s))])])])})),0)]),t._l(t.span.events,(function(s){return e("div",{staticClass:"event mt-4"},[e("div",[e("span",{staticClass:"font-weight-medium"},[t._v("Event:")]),t._v(" "+t._s(s.name)+" "),e("span",{staticClass:"caption grey--text"},[t._v(t._s(s.timestamp-t.span.timestamp)+"ms since span start")])]),e(ns.Z,{attrs:{dense:""}},[e("tbody",t._l(s.attributes,(function(s,a){return e("tr",[e("td",[t._v(t._s(a))]),e("td",[e("pre",[t._v(t._s(s))])])])})),0)])],1)}))],2)],1)],2)},yl=[],bl={name:"TracingSpan",props:{span:Object,ticks:Array,split:Number},data(){return{folded:!1,details:!1}},computed:{nameColumn(){return{width:this.split+"%"}},barColumn(){return{width:100-this.split+"%"}},service(){return{borderColor:this.span.color}},bar(){return{marginLeft:this.span.offset+"%",width:this.span.width+"%",backgroundColor:this.span.color}}}},xl=bl,wl=(0,_t.Z)(xl,gl,yl,!1,null,"3520749e",null),kl=wl.exports;const Cl=50,Zl=80,$l=5;var Sl={props:{spans:Array,span:String},components:{TracingSpan:kl},data(){return{full:!1}},computed:{split(){return Cl},tree(){if(!this.spans.length)return[];const t=new Map;this.spans.forEach((e=>{t.set(e.id,e)}));const e=(t,s)=>{const a={id:t.id,name:t.name,status:t.status,children:[],level:s.level+1,service:t.service,color:ko.hash2(t.service),timestamp:t.timestamp,duration:t.duration,attributes:t.attributes,events:t.events};s.children.push(a),this.spans.filter((t=>t.parent_id===a.id)).forEach((t=>{e(t,a)}))},s={level:-1,children:[]};return!this.full&&this.span?this.spans.filter((t=>t.id===this.span)).forEach((t=>{e(t,s)})):this.spans.filter((e=>!e.parent_id||!t.has(e.parent_id))).forEach((t=>{e(t,s)})),s.children},range(){if(!this.tree.length)return null;const t={from:1/0,to:0},e=s=>{t.from=Math.min(t.from,s.timestamp),t.to=Math.max(t.to,s.timestamp+s.duration),s.children.forEach(e)};return this.tree.forEach(e),t},roots(){if(!this.spans.length)return[];const t=this.range.to-this.range.from,e=s=>{s.offset=(s.timestamp-this.range.from)*Zl/t,s.width=s.duration*Zl/t,s.children.forEach(e)};return this.tree.forEach(e),this.tree},ticks(){if(!this.range)return[];const t=(this.range.to-this.range.from)/$l,e=Zl/$l,s=t=>t?t>1e3?(t/1e3).toFixed(2)+"s":t.toFixed(2)+"ms":"0";return Array.from({length:$l+1}).map(((a,i)=>({value:s(t*i),width:e})))}}},Il=Sl,ql=(0,_t.Z)(Il,fl,_l,!1,null,"16672e3d",null),Pl=ql.exports,Al={props:{appId:String,compact:Boolean},components:{Heatmap:Sn,Led:Pt,TracingTrace:Pl},data(){return{loading:!1,loadingError:"",view:{},init:!1,configure:!1,form:{service:null},saved:"",saving:!1,error:"",message:""}},computed:{sources(){return(this.view.sources||[]).map((t=>({text:t.name,value:{type:t.type}})))},source(){return{type:this.trace.type}},services(){return(this.view.services||[]).map((t=>t.name))},changed(){return!!this.form&&this.saved!==JSON.stringify(this.form)},trace(){const t=(this.$route.query.trace||"").split(":");return{type:t[0]||"",id:t[1]||"",tsRange:t[2]||"-",durRange:t[3]||"-",span:t[4]||""}},selection(){const t=this.trace;if(t.span&&this.view.heatmap){const e=this.view.spans.find((e=>e.id===t.span));if(e){const t=this.view.heatmap,s=e.timestamp-t.ctx.step,a=e.timestamp+t.ctx.step;let i=-1;if(e.status.error?i=t.series.findIndex((t=>"err"===t.value)):(i=t.series.findIndex((t=>Number(t.value)>e.duration/1e3)),-1===i&&(i=t.series.findIndex((t=>"inf"===t.value)))),-1===i)return null;const r=0===i?"":t.series[i-1].value,o=t.series[i].value;return{x1:s,x2:a,y1:r,y2:o}}}let e=t.tsRange.split("-");const s=Number(e[0])||0,a=Number(e[1])||0;e=t.durRange.split("-");const i=e[0]||"",r=e[1]||"";return{x1:s,x2:a,y1:i,y2:r}}},mounted(){this.get(),this.$events.watch(this,this.get,"refresh")},watch:{"$route.query.trace"(){this.get()}},methods:{setTrace(t,e){t={...this.trace,...t};const s=`${t.type}:${t.id}:${t.tsRange}:${t.durRange}:${t.span}`;return{...this.$route.query,...e,trace:s}},changeSource(t){const e=this.setTrace({type:t.type,id:"",span:""});this.$router.push({query:e}).catch((t=>t))},setSelection(t){const e=this.view.heatmap;if(!e||!e.series)return;const s=e.series.find((t=>!!t.threshold)),a=s?s.value:0;switch(t){case"errors":t={y1:"inf",y2:"err"};break;case"slo violations":t={y1:a,y2:"inf"};break}const{from:i,to:r}=e.ctx,o=`${t.x1||""}-${t.x2||""}`,n=`${t.y1||""}-${t.y2||""}`,l=this.setTrace({id:"",tsRange:o,durRange:n,span:""},{from:i,to:r});this.$router.push({query:l}).catch((t=>t))},get(){this.init?this.init=!1:(this.loading=!0,this.loadingError="",this.view.spans=[],this.$api.getTracing(this.appId,this.$route.query.trace,((t,e)=>{this.loading=!1;const s="Failed to load traces";if(e)return this.loadingError=e,this.view.status="warning",this.view.message=s,void(this.view.spans=[]);if(this.view=t,"warning"===this.view.status)return this.loadingError=this.view.message,void(this.view.message=s);const a=(this.view.services||[]).find((t=>t.linked));this.form.service=a?a.name:null,this.saved=JSON.stringify(this.form);const i=(this.view.sources||[]).find((t=>t.selected));if(i){const t=this.setTrace({type:i.type});this.$route.query.trace!==t.trace&&(this.init=!0,this.$router.replace({query:t}).catch((t=>t)))}})))},save(){this.saving=!0,this.error="",this.message="",this.$api.saveTracingSettings(this.appId,this.form,((t,e)=>{this.saving=!1,e?this.error=e:(this.message="Settings were successfully updated.",this.changeSource({type:""}),setTimeout((()=>{this.message="",this.configure=!1}),1e3),this.get())}))}}},Ol=Al,Tl=(0,_t.Z)(Ol,pl,vl,!1,null,"b1816464",null),jl=Tl.exports,El={props:{w:Object},components:{Chart:Xo,ChartGroup:on,DependencyMap:mn,Table:gn,Heatmap:Sn,Logs:Bn,Profiling:hl,Tracing:jl},computed:{heatmapSelection(){const t=this.w.heatmap;return t&&t.drill_down_link?{}:null},doc_link(){const t=this.w.doc_link;return t?`https://codexray.com/docs/codexray/${t.group}/${t.item}${t.hash?"#"+t.hash:""}`:null}},methods:{chartZoom(t){const{from:e,to:s}=t.selection,a={...this.$route.query,from:e,to:s};this.$router.push({query:a}).catch((t=>t))},heatmapDrillDown(t){const e=this.w.heatmap;if(e&&e.drill_down_link&&t.x1){const s=`${t.x1||""}-${t.x2||""}`,a=`${t.y1||""}-${t.y2||""}`,i=`::${s}:${a}:`,{from:r,to:o}=this.w.heatmap.ctx,n={...this.$route.query,from:r,to:o,trace:i};this.$router.push({...e.drill_down_link,query:n}).catch((t=>t))}}}},Ll=El,Nl=(0,_t.Z)(Ll,po,vo,!1,null,"08f73fda",null),Ml=Nl.exports,zl={props:{name:String,widgets:Array},components:{Widget:Ml}},Fl=zl,Dl=(0,_t.Z)(Fl,mo,ho,!1,null,"5dd20f0a",null),Rl=Dl.exports,Hl=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pa-3 text-center grey--text"},[t._v("No data is available yet")])},Vl=[],Ul={},Bl=Ul,Wl=(0,_t.Z)(Bl,Hl,Vl,!1,null,"b78b0f00",null),Ql=Wl.exports,Jl=function(){var t=this,e=t._self._c;return e(Yt.Z,{attrs:{"max-width":"800"},scopedSlots:t._u([{key:"activator",fn:function({on:s}){return[t.active?e(et.Z,t._g({staticStyle:{position:"absolute",top:"10px",right:"10px"},attrs:{small:"",icon:""}},s),[e(it.Z,[t._v("mdi-cog")])],1):e("div",{staticClass:"mb-2"},[t._v(" It seems this app is a "+t._s(t.types[t.type].name)+" database. "),e(et.Z,t._g({attrs:{color:"primary",small:""}},s),[t._v("Configure")]),e("br"),t._v(" If you just configured the integration, please wait a couple minutes for it to collect data. ")],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(Gt.Z,{staticClass:"pa-5"},[e("div",{staticClass:"d-flex align-center font-weight-medium mb-4"},[t._v(" Configure "+t._s(t.types[t.type].name)+" integration "),t.loading?e(ma.Z,{staticClass:"ml-2",attrs:{indeterminate:"",color:"green",size:"24"}}):t._e(),e(ct.Z),e(et.Z,{attrs:{icon:""},on:{click:function(e){t.dialog=!1}}},[e(it.Z,[t._v("mdi-close")])],1)],1),"postgres"===t.type?[e("p",[t._v(" This integration allows codexray to collect Postgres-specific metrics. It requires a database user with the "),e("var",[t._v("pg_monitor")]),t._v(" role and the "),e("var",[t._v("pg_stat_statements")]),t._v(" extension enabled. ")]),e("Code",[e("pre",[t._v("create role codexray with login password '<PASSWORD>';\ngrant pg_monitor to codexray;\ncreate extension pg_stat_statements;\n                    ")])]),e("p",[t._v("The "),e("var",[t._v("pg_stat_statements")]),t._v(" extension should be loaded via the "),e("var",[t._v("shared_preload_libraries")]),t._v(" server setting.")])]:t._e(),"mysql"===t.type?[e("p",[t._v("This integration allows codexray to collect Mysql-specific metrics. It requires a Mysql user with the following permissions:")]),e("Code",[e("pre",[t._v("CREATE USER 'codexray'@'%' IDENTIFIED BY '<PASSWORD>';\nGRANT SELECT, PROCESS, REPLICATION CLIENT ON *.* TO 'codexray'@'%';\n                    ")])])]:t._e(),"redis"===t.type?[e("p",[t._v("This integration allows codexray to collect Redis-specific metrics.")])]:t._e(),t.config?e(Kt.Z,{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e("div",{staticClass:"subtitle-1 mt-3"},[t._v("Port")]),e(wt.Z,{attrs:{outlined:"",dense:"",rules:[t.$validators.notEmpty],"hide-details":""},model:{value:t.config.port,callback:function(e){t.$set(t.config,"port",e)},expression:"config.port"}}),t.types[t.type].username?e("div",[e("div",{staticClass:"subtitle-1 mt-3"},[t._v("Username")]),e(wt.Z,{attrs:{outlined:"",dense:"","hide-details":""},model:{value:t.config.credentials.username,callback:function(e){t.$set(t.config.credentials,"username",e)},expression:"config.credentials.username"}})],1):t._e(),t.types[t.type].password?e("div",[e("div",{staticClass:"subtitle-1 mt-3"},[t._v("Password")]),e(wt.Z,{attrs:{type:"password",outlined:"",dense:"","hide-details":""},model:{value:t.config.credentials.password,callback:function(e){t.$set(t.config.credentials,"password",e)},expression:"config.credentials.password"}})],1):t._e(),"postgres"===t.type?e("div",[e("div",{staticClass:"subtitle-1 mt-3"},[t._v("SSL Mode")]),e(ps.Z,{attrs:{items:["disable","require","verify-ca"],outlined:"",dense:"","hide-details":"","menu-props":{offsetY:!0}},model:{value:t.sslmode,callback:function(e){t.sslmode=e},expression:"sslmode"}})],1):t._e(),"mysql"===t.type?e("div",[e("div",{staticClass:"subtitle-1 mt-3"},[t._v("TLS")]),e(ps.Z,{attrs:{items:["false","true","skip-verify","preferred"],outlined:"",dense:"","hide-details":"","menu-props":{offsetY:!0}},model:{value:t.tls,callback:function(e){t.tls=e},expression:"tls"}})],1):t._e(),t.error?e(K.Z,{staticClass:"mt-4",attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(" "+t._s(t.error)+" ")]):t._e(),t.message?e(K.Z,{staticClass:"mt-4",attrs:{color:"green",outlined:"",text:""}},[t._v(" "+t._s(t.message)+" ")]):t._e(),e(et.Z,{staticClass:"mt-3",attrs:{block:"",color:"primary",disabled:!t.valid||t.loading},on:{click:function(e){return t.save(!1)}}},[t._v("Save")]),t.active&&!t.config.disabled?e(et.Z,{staticClass:"mt-3",attrs:{block:"",color:"error",disabled:t.loading},on:{click:function(e){return t.save(!0)}}},[t._v(" Disable the integration ")]):t._e()],1):t._e()],2)],1)},Gl=[],Yl={props:{appId:String,type:String,active:Boolean},components:{Code:de},data(){return{config:null,dialog:!1,valid:!1,loading:!1,error:"",message:"",sslmode:"disable",tls:"false"}},watch:{dialog(t){t&&this.get()}},computed:{types(){return{postgres:{name:"Postgres",username:!0,password:!0},redis:{name:"Redis",username:!1,password:!0},memcached:{name:"Memcached",username:!1,password:!1},mongodb:{name:"MongoDB",username:!0,password:!0},mysql:{name:"MySQL",username:!0,password:!0}}}},methods:{get(){this.loading=!0,this.error="",this.$api.getInstrumentation(this.appId,this.type,((t,e)=>{this.loading=!1,e?this.error=e:(this.config=t,"postgres"===this.type&&this.config.params&&this.config.params["sslmode"]&&(this.sslmode=this.config.params["sslmode"]))}))},save(t){this.loading=!0,this.error="",this.message="";const e={...this.config,disabled:t};"postgres"===this.type&&(e.params={sslmode:this.sslmode}),"mysql"===this.type&&(e.params={tls:this.tls}),this.$api.saveInstrumentationSettings(this.appId,this.type,e,((t,e)=>{this.loading=!1,e?this.error=e:(this.$events.emit("refresh"),this.message="Settings were successfully updated. The changes will take effect in a minute or two.",setTimeout((()=>{this.message="",this.dialog=!1}),3e3))}))}}},Kl=Yl,Xl=(0,_t.Z)(Kl,Jl,Gl,!1,null,"0bbf710a",null),tc=Xl.exports,ec={props:{id:String,report:String},components:{AppMap:uo,Dashboard:Rl,NoData:Ql,Check:Dn,Led:Pt,ApplicationInstrumentation:tc},data(){return{app:null,loading:!1,error:"",r:null}},mounted(){this.get(),this.$events.watch(this,this.get,"refresh")},watch:{id(){this.app=null,this.get()},report(){this.showReport()}},methods:{get(){this.loading=!0,this.$api.getApplication(this.id,((t,e)=>{this.loading=!1,e?this.error=e:(this.app=t,this.showReport())}))},showReport(){if(!this.app||!this.app.reports||!this.app.reports.length)return void(this.r=null);if(!this.report)return this.app.reports.length>1&&"SLO"===this.app.reports[0].name&&"unknown"===this.app.reports[0].status?this.r=this.app.reports[1]:this.r=this.app.reports[0],void this.$router.replace({params:{report:this.r.name},query:this.$utils.contextQuery()}).catch((t=>t));const t=this.app.reports.find((t=>t.name===this.report));t?this.r=t:this.$router.replace({params:{report:null},query:this.$utils.contextQuery()}).catch((t=>t))}}},sc=ec,ac=(0,_t.Z)(sc,Mr,zr,!1,null,"59436e0a",null),ic=ac.exports,rc=function(){var t=this,e=t._self._c;return e("div",[t.loading?e(ts.Z,{attrs:{indeterminate:"",color:"green"}}):t._e(),t.error?e(K.Z,{attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(" "+t._s(t.error)+" ")]):t._e(),e("ApplicationFilter",{staticClass:"my-4",attrs:{applications:t.applications},on:{filter:t.setFilter}}),e("div",{staticClass:"cards my-4"},[t._l(t.statuses,(function(t){return e("Card",{key:t.name,attrs:{name:t.name,count:t.count,background:t.background,icon:t.color}})})),e(hs.Z,{staticClass:"font-weight-regular mt-0 pt-0 ml-2",staticStyle:{"margin-left":"-4px"},attrs:{label:"Show resolved",value:t.showResolved,color:"primary","hide-details":""},on:{change:t.changeShowResolved}})],2),e("CheckForm",{attrs:{appId:t.editing.appId,check:t.editing.check},model:{value:t.editing.active,callback:function(e){t.$set(t.editing,"active",e)},expression:"editing.active"}}),e("CustomTable",{staticClass:"table",attrs:{items:t.items,headers:t.headers},scopedSlots:t._u([{key:"item.incident",fn:function({item:s}){return[e("div",{staticClass:"incident",class:{"grey--text":s.resolved_at}},[e("div",{staticClass:"status",style:{backgroundColor:s.color}}),e("router-link",{attrs:{to:{name:"overview",params:{view:"incidents"},query:{...t.$utils.contextQuery(),incident:s.key}}}},[e("span",{staticClass:"key",staticStyle:{"font-family":"monospace"}},[t._v("i-"+t._s(s.key))])])],1)]}},{key:"item.opened_at",fn:function({item:s}){return[e("div",{staticClass:"d-flex text-no-wrap",class:{"grey--text":s.resolved_at}},[t._v(" "+t._s(t.$format.date(s.opened_at,"{MMM} {DD}, {HH}:{mm}:{ss}"))+" ("+t._s(t.$format.timeSinceNow(s.opened_at))+" ago) ")])]}},{key:"item.duration",fn:function({item:s}){return[e("div",{staticClass:"d-flex text-no-wrap",class:{"grey--text":s.resolved_at}},[t._v(" "+t._s(t.$format.durationPretty(s.duration))+" ")])]}},{key:"item.application",fn:function({item:s}){return[e("div",{staticClass:"d-flex"},[e("span",{class:{"grey--text":s.resolved_at}},[t._v(" "+t._s(t.$utils.appId(s.application_id).name)+" ")])])]}},{key:"item.latency",fn:function({item:s}){return[s.latency_slo?e("span",{class:s.latency_slo.violated?"fired":void 0},[t._v(" "+t._s(s.latency_slo.compliance)+" ")]):t._e()]}},{key:"item.availability",fn:function({item:s}){return[s.availability_slo?e("span",{class:s.availability_slo.violated?"fired":void 0},[t._v(" "+t._s(s.availability_slo.compliance)+" ")]):t._e()]}},{key:"item.affected_request_percent",fn:function({item:s}){return[e("div",{staticClass:"progress-line"},[e(ts.Z,{attrs:{value:s.affected_request_percent,color:"green lighten-1",height:"16px"}}),e("div",{staticClass:"percent-text"},[t._v(t._s(t.$format.percent(s.affected_request_percent))+" %")])],1)]}},{key:"item.error_budget_consumed_percent",fn:function({item:s}){return[e("div",{staticClass:"progress-line"},[e(ts.Z,{attrs:{value:s.error_budget_consumed_percent,color:"purple lighten-1",height:"16px"}}),e("div",{staticClass:"percent-text"},[t._v(t._s(t.$format.percent(s.error_budget_consumed_percent))+" %")])],1)]}},{key:"item.actions",fn:function({item:s}){return[e(lt.Z,{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function({attrs:s,on:a}){return[e(et.Z,t._g(t._b({staticClass:"ml-1",attrs:{icon:"","x-small":""}},"v-btn",s,!1),a),[e(it.Z,{attrs:{small:""}},[t._v("mdi-dots-vertical")])],1)]}}],null,!0)},[e(rt.Z,{attrs:{dense:""}},[e(ot.Z,{on:{click:function(e){return t.edit(s.application_id,"SLOAvailability","Availability")}}},[e(it.Z,{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-check-circle-outline")]),t._v(" Adjust Availability SLO ")],1),e(ot.Z,{on:{click:function(e){return t.edit(s.application_id,"SLOLatency","Latency")}}},[e(it.Z,{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-timer-outline")]),t._v(" Adjust Latency SLO ")],1),e(ot.Z,{attrs:{to:{name:"overview",params:{view:"incidents"},query:{incident:s.key,view:"rca"}}}},[e(it.Z,{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-creation")]),t._v(" Investigate with AI ")],1)],1)],1)]}}])})],1)},oc=[];const nc={critical:{name:"Critical",background:"red lighten-4",color:"#EF5350"},warning:{name:"Warning",background:"orange lighten-4",color:"#FFA726"},ok:{name:"Resolved",background:"grey lighten-3",color:"#757575"}};var lc={components:{CheckForm:Ks,ApplicationFilter:Zr,Card:Or,CustomTable:vr},data(){return{incidents:[],filter:new Set,showResolved:!1,editing:{active:!1},loading:!1,error:"",headers:[{value:"incident",text:"Incident",sortable:!1},{value:"application",text:"Application",sortable:!1},{value:"opened_at",text:"Opened at",sortable:!0},{value:"duration",text:"Duration",sortable:!0},{value:"availability",text:"Availability",sortable:!1},{value:"latency",text:"Latency",sortable:!1},{value:"affected_request_percent",text:"Affected requests",sortable:!0},{value:"error_budget_consumed_percent",text:"Consumed error budged",sortable:!0},{value:"actions",text:"",sortable:!1,align:"end",width:"20px"}]}},mounted(){this.get(),this.$events.watch(this,this.get,"refresh"),this.showResolved="1"===this.$route.query.show_resolved},watch:{items(){this.items.some((t=>t.resolved_at))&&!this.showResolved&&(this.showResolved=!0)},showResolved(){this.get()}},computed:{applications(){if(!this.incidents)return[];const t={};return this.incidents.forEach((e=>{t[e.application_id]=e.application_category})),Object.keys(t).map((e=>({id:e,category:t[e]})))},items(){if(!this.incidents)return[];let t=this.incidents.filter((t=>this.filter.has(t.application_id)));const e=this.$route.query.show_resolved;if("0"===e&&(t=t.filter((t=>!t.resolved_at))),void 0===e){const e=t.filter((t=>!t.resolved_at));e.length&&(t=e)}return t.map((t=>({...t,color:nc[t.resolved_at?"ok":t.severity].color})))},statuses(){return Object.keys(nc).map((t=>({...nc[t],count:this.incidents.filter((e=>(e.resolved_at?"ok":e.severity)===t)).length})))}},methods:{get(){this.loading=!0,this.error="",this.$api.getOverview("incidents","",((t,e)=>{this.loading=!1,e?this.error=e:this.incidents=t.incidents||[]}))},changeShowResolved(){this.showResolved=!this.showResolved,this.$router.push({query:{...this.$route.query,show_resolved:this.showResolved?"1":"0"}}).catch((t=>t))},setFilter(t){this.filter=t},edit(t,e,s){this.editing={active:!0,appId:t,check:{id:e,title:s}}}}},cc=lc,dc=(0,_t.Z)(cc,rc,oc,!1,null,"075cd7bc",null),uc=dc.exports,mc=function(){var t=this,e=t._self._c;return e("div",[t.loading?e(ts.Z,{attrs:{indeterminate:"",color:"green"}}):t._e(),t.error?e(K.Z,{staticClass:"mt-2",attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(" "+t._s(t.error)+" ")]):t._e(),e("CheckForm",{attrs:{appId:t.editing.appId,check:t.editing.check},model:{value:t.editing.active,callback:function(e){t.$set(t.editing,"active",e)},expression:"editing.active"}}),t.incident?e("div",[e(Gt.Z,{staticClass:"my-6 pa-4 pb-2",attrs:{outlined:""}},[e("div",{staticClass:"d-flex flex-wrap",staticStyle:{gap:"16px","row-gap":"8px"}},[e("div",[e("span",{staticClass:"field-name"},[t._v("Incident")]),t._v(": "),e("span",[t._v("i-"+t._s(t.$route.query.incident))])]),e("div",[e("span",{staticClass:"field-name"},[t._v("Started")]),t._v(": "),e("span",[t._v(" "+t._s(t.$format.date(t.incident.opened_at,"{MMM} {DD}, {HH}:{mm}:{ss}"))+" ")]),e("span",[t._v(" ("+t._s(t.$format.timeSinceNow(t.incident.opened_at))+" ago) ")])]),e("div",[e("span",{staticClass:"field-name"},[t._v("Resolved")]),t._v(": "),e("span",[t.incident.resolved_at?[t._v(" "+t._s(t.$format.date(t.incident.resolved_at,"{MMM} {DD}, {HH}:{mm}:{ss}"))+" ")]:e("span",[t._v("still open")])],2)]),e("div",[e("span",{staticClass:"field-name"},[t._v("Duration")]),t._v(": "),e("span",[t._v(t._s(t.$format.durationPretty(t.incident.duration)))])]),e("div",[e("span",{staticClass:"field-name"},[t._v("Severity")]),t._v(": "),e("span",[e(it.Z,{staticStyle:{"margin-bottom":"2px"},attrs:{color:"critical"===t.incident.severity?"error":"warning",small:""}},[t._v(" mdi-alert-circle ")]),e("span",{staticClass:"text-uppercase"},[t._v(t._s(t.incident.severity))])],1)]),e("div",[e("span",{staticClass:"field-name"},[t._v("Application")]),t._v(": "),e("router-link",{staticClass:"name",attrs:{to:{name:"overview",params:{view:"applications",id:t.incident.application_id},query:t.$utils.contextQuery()}}},[t._v(" "+t._s(t.$utils.appId(t.incident.application_id).name)+" ")])],1)]),e(ns.Z,{staticClass:"mt-5 table",attrs:{dense:""}},[e("thead",[e("tr",[e("th",[t._v("Service Level Objective (SLO)")]),e("th",[t._v("Objective")]),e("th",[t._v("Compliance")])])]),e("tbody",[t.incident.availability_slo?e("tr",[e("td",[t._v("Availability")]),e("td",[t._v(" "+t._s(t.incident.availability_slo.objective)+" "),e(et.Z,{attrs:{small:"",icon:""},on:{click:function(e){return t.edit("SLOAvailability","Availability")}}},[e(it.Z,{attrs:{small:""}},[t._v("mdi-pencil")])],1)],1),e("td",[e("span",{class:{fired:t.incident.availability_slo.violated}},[t._v(" "+t._s(t.incident.availability_slo.compliance)+" ")])])]):t._e(),t.incident.latency_slo?e("tr",[e("td",[t._v("Latency")]),e("td",[t._v(" "+t._s(t.incident.latency_slo.objective)+" "),e(et.Z,{attrs:{small:"",icon:""},on:{click:function(e){return t.edit("SLOLatency","Latency")}}},[e(it.Z,{attrs:{small:""}},[t._v("mdi-pencil")])],1)],1),e("td",[e("span",{class:{fired:t.incident.latency_slo.violated}},[t._v(" "+t._s(t.incident.latency_slo.compliance)+" ")])])]):t._e()])])],1),e(ee.Z,{attrs:{height:"32","show-arrows":"","hide-slider":""}},t._l(t.views,(function(s){return e(Xt.Z,{key:s.name,staticClass:"view",class:{active:t.view===s.name},attrs:{to:t.openView(s.name)}},[e(it.Z,{staticClass:"mr-1",attrs:{small:""}},[t._v(t._s(s.icon))]),t._v(" "+t._s(s.title)+" ")],1)})),1),"overview"===t.view?[t.incident.heatmap?[e("div",{staticClass:"d-flex flex-wrap mt-5"},[e("Widget",{staticClass:"my-5",style:{width:t.$vuetify.breakpoint.mdAndUp?t.incident.heatmap.width||"50%":"100%"},attrs:{w:t.incident.heatmap}})],1)]:t._e()]:"traces"===t.view?[e("Tracing",{attrs:{appId:t.incident.application_id,compact:""}})]:"rca"===t.view?[e("RCA",{attrs:{appId:t.incident.application_id}})]:t._e()],2):t.loading||t.error?t._e():e("NoData")],1)},hc=[],pc=function(){var t=this,e=t._self._c;return e("div",[t.loading?e(ts.Z,{attrs:{indeterminate:"",color:"green"}}):t._e(),t.error?e(K.Z,{attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(" "+t._s(t.error)+" ")]):t._e(),"not implemented"===t.rca?e(K.Z,{staticClass:"mt-5",attrs:{color:"info",outlined:"",text:""}},[t._v(" AI-powered Root Cause Analysis is available only in codexray Enterprise (from $1 per CPU core/month). "),e("a",{staticClass:"font-weight-bold",attrs:{href:"https://codexray.com/account",target:"_blank"}},[t._v("Start")]),t._v(" your free trial today. ")]):t.rca?e("div",[t.rca.latency_chart||t.rca.errors_chart?[e("div",{staticClass:"text-h6"},[t._v(" Service Level Indicators of "),e("router-link",{staticClass:"name",attrs:{to:{name:"application",params:{id:t.appId},query:t.$utils.contextQuery()}}},[t._v(" "+t._s(t.$utils.appId(t.appId).name)+" ")])],1),e("div",{staticClass:"grey--text mb-2 mt-1"},[e(it.Z,{staticStyle:{"vertical-align":"baseline"},attrs:{size:"18"}},[t._v("mdi-lightbulb-on-outline")]),t._v(" Select a chart area to identify the root cause of an anomaly ")],1),e(Gn.Z,[e(Jn.Z,{attrs:{cols:"12",md:"6"}},[t.rca.latency_chart?e("Chart",{staticClass:"my-5 chart",attrs:{chart:t.rca.latency_chart,loading:t.loading,selection:t.selection},on:{select:t.explainAnomaly}}):t._e()],1),e(Jn.Z,{attrs:{cols:"12",md:"6"}},[t.rca.errors_chart?e("Chart",{staticClass:"my-5 chart",attrs:{chart:t.rca.errors_chart,loading:t.loading,selection:t.selection},on:{select:t.explainAnomaly}}):t._e()],1)],1)]:t._e(),t.rca.causes&&t.rca.causes.length>0?e("div",[e("div",{staticClass:"mt-5 mb-3 text-h6"},[t._v("Possible causes")]),e(ns.Z,{attrs:{dense:""}},[e("thead",[e("tr",[e("th",[t._v("Issue")]),e("th",[t._v("Reasons")]),e("th",[t._v("Applications")])])]),e("tbody",t._l(t.rca.causes,(function(s){return e("tr",[e("td",{staticClass:"text-no-wrap"},[e("div",[e(it.Z,{staticClass:"mr-1",attrs:{color:"error",small:""}},[t._v("mdi-alert-circle")]),e("span",{domProps:{innerHTML:t._s(s.summary)}})],1)]),e("td",{staticClass:"text-no-wrap"},[e("ul",t._l(s.details,(function(s){return e("li",[e("span",{domProps:{innerHTML:t._s(s)}})])})),0)]),e("td",[e("div",{staticClass:"d-flex flex-wrap"},[t._l(s.affected_services,(function(a,i){return[e("router-link",{attrs:{to:{name:"application",params:{id:a},query:t.$utils.contextQuery()}}},[t._v(" "+t._s(t.$utils.appId(a).name)+" ")]),i+1<s.affected_services.length?e("span",{staticClass:"mr-1"},[t._v(",")]):t._e()]}))],2)])])})),0)])],1):t._e(),t.tree.length?e("div",[e("div",{staticClass:"mt-5 mb-3 text-h6"},[t._v("Detailed RCA report")]),e("div",t._l(t.tree,(function(t){return e("RcaItem",{key:t.id,attrs:{hyp:t,split:70}})})),1)]):t._e()],2):t._e()],1)},vc=[],fc=function(){var t=this,e=t._self._c;return e("div",[t.hyp.children.length||t.hyp.timeseries?e("div",{staticClass:"item",style:{cursor:(t.hyp.widgets||t.hyp.log_pattern)&&"pointer"},on:{click:function(e){t.details=!0}}},[e("div",{staticClass:"nameColumn",style:t.nameColumn},[t._l(t.hyp.level,(function(t){return e("span",{staticClass:"indent"})})),e("span",[t.hyp.children.length?[t.folded?e(it.Z,{staticClass:"icon",attrs:{small:""},on:{click:function(e){e.stopPropagation(),t.folded=!1}}},[t._v("mdi-chevron-right")]):e(it.Z,{staticClass:"icon",attrs:{small:""},on:{click:function(e){e.stopPropagation(),t.folded=!0}}},[t._v("mdi-chevron-down")])]:e(it.Z,{attrs:{small:""}},[t._v("mdi-circle-small")]),e("span",{staticClass:"service",style:t.service},[t.hyp.name?[e("span",{domProps:{innerHTML:t._s(t.hyp.name)}}),t.hyp.disable_reason?e("span",{staticClass:"grey--text caption ml-2"},[t._v(t._s(t.hyp.disable_reason))]):t._e()]:e("span",[t._v(t._s(t.$utils.appId(t.hyp.service).name))])],2)],2)],2),e("div",{staticClass:"iconColumn"},[t.hyp.possible_cause?e(it.Z,{staticClass:"mr-1",attrs:{color:"error",small:""}},[t._v("mdi-alert-circle")]):t._e()],1),e("div",{staticClass:"barColumn",style:t.barColumn},[t.hyp.timeseries?[e(nr.Z,{attrs:{value:t.hyp.timeseries.map((t=>null===t?0:t)),smooth:"",height:"20",fill:"",color:t.hyp.disable_reason?"#d3d3d3":"green",padding:"4"}})]:t._e()],2)]):t._e(),t.folded?t._e():t._l(t.hyp.children,(function(s){return e("RcaItem",{key:s.id,staticClass:"child",attrs:{hyp:s,split:t.split}})})),t.hyp.widgets||t.hyp.log_pattern?e(Yt.Z,{attrs:{width:"80%"},model:{value:t.details,callback:function(e){t.details=e},expression:"details"}},[t.hyp.log_pattern?e(Gt.Z,{staticClass:"pa-5"},[e("div",{staticClass:"d-flex align-center"},[e("div",{staticClass:"d-flex"},[e(_r.Z,{staticClass:"text-uppercase mr-2",attrs:{label:"",dark:"",small:"",color:t.palette().get(t.severity(t.hyp.log_pattern.severity).color)}},[t._v(t._s(t.hyp.log_pattern.severity))]),t._v(" "+t._s(t.hyp.log_pattern.sum)+" events ")],1),e(ct.Z),e(et.Z,{attrs:{icon:""},on:{click:function(e){t.details=!1}}},[e(it.Z,[t._v("mdi-close")])],1)],1),t.hyp.log_pattern.chart?e("Chart",{attrs:{chart:t.hyp.log_pattern.chart}}):t._e(),e("div",{staticClass:"font-weight-medium my-3"},[t._v("Sample")]),e("div",{staticClass:"message",class:{multiline:t.hyp.log_pattern.multiline}},[t._v(" "+t._s(t.hyp.log_pattern.sample)+" ")]),e(et.Z,{staticClass:"mt-4",attrs:{color:"primary",to:t.showLogMessages(t.hyp)}},[t._v(" Show messages ")])],1):e(Gt.Z,{staticClass:"pa-5"},[e("div",{staticClass:"text-h6 d-flex pb-5"},[e("span",[t._v("Details")]),e(ct.Z),e(et.Z,{attrs:{icon:""},on:{click:function(e){t.details=!1}}},[e(it.Z,[t._v("mdi-close")])],1)],1),e("div",{staticClass:"d-flex flex-wrap"},t._l(t.hyp.widgets,(function(s){return e("div",{staticClass:"my-5",style:{width:t.$vuetify.breakpoint.mdAndUp&&t.hyp.widgets.length>1?s.width||"50%":"100%"}},[e("Widget",{attrs:{w:s}})],1)})),0)])],1):t._e()],2)},_c=[],gc={name:"RcaItem",methods:{palette(){return ko},severity(t){return t=t.toLowerCase(),t.startsWith("crit")?{num:5,color:"black"}:t.startsWith("err")?{num:4,color:"red-darken1"}:t.startsWith("warn")?{num:3,color:"orange-lighten1"}:t.startsWith("info")?{num:2,color:"blue-lighten2"}:t.startsWith("debug")?{num:1,color:"green-lighten1"}:{num:0,color:"grey-lighten1"}},showLogMessages(t){return{name:"application",params:{id:t.service,report:"Logs"},query:{query:JSON.stringify({hash:t.log_pattern.hash,view:"messages"}),from:this.$route.query.rcaFrom,to:this.$route.query.rcaTo}}}},components:{Widget:Ml,Chart:Xo},props:{hyp:Object,split:Number},data(){return{folded:!1,details:!1}},computed:{nameColumn(){return{width:this.split+"%"}},barColumn(){return{width:100-this.split+"%"}},service(){return{borderColor:this.hyp.color}}}},yc=gc,bc=(0,_t.Z)(yc,fc,_c,!1,null,"3956c5f4",null),xc=bc.exports,wc={computed:{tree(){if(!this.rca.hypotheses||!this.rca.hypotheses.length)return[];const t=(e,s)=>{const a={id:e.id,name:e.name,children:[],level:s.level+1,service:e.service,color:ko.hash2(e.service),timeseries:e.timeseries,possible_cause:e.possible_cause,widgets:e.widgets,disable_reason:e.disable_reason,log_pattern:e.log_pattern};s.children.push(a),this.rca.hypotheses.filter((t=>t.parent_id===a.id)).forEach((e=>{t(e,a)}))},e={level:-1,children:[]};return t(this.rca.hypotheses[0],e),e.children}},props:{appId:String},components:{Chart:Xo,RcaItem:xc},data(){return{rca:null,loading:!1,error:"",selection:{mode:"",from:this.$route.query.rcaFrom||0,to:this.$route.query.rcaTo||0}}},watch:{"$route.query"(){this.selection.from=this.$route.query.rcaFrom||0,this.selection.to=this.$route.query.rcaTo||0}},mounted(){this.get(),this.$events.watch(this,this.get,"refresh")},methods:{explainAnomaly(t){this.selection.from=t.selection.from,this.selection.to=t.selection.to,this.$router.push({query:{...this.$route.query,rcaFrom:t.selection.from,rcaTo:t.selection.to,...t.ctx}}),this.get()},get(){this.loading=!0,this.$api.getRCA(this.appId,((t,e)=>{this.loading=!1,e?this.error=e:this.rca=t}))}}},kc=wc,Cc=(0,_t.Z)(kc,pc,vc,!1,null,"3812f18b",null),Zc=Cc.exports,$c={components:{Tracing:jl,CheckForm:Ks,Widget:Ml,RCA:Zc,NoData:Ql},computed:{view(){return this.$route.query.view||"overview"},views(){return[{name:"overview",title:"overview",icon:"mdi-format-list-checkbox"},{name:"traces",title:"traces",icon:"mdi-chart-timeline"},{name:"rca",title:"root cause analysis",icon:"mdi-creation"}]}},data(){return{incident:null,loading:!1,error:"",editing:{active:!1}}},mounted(){this.get(),this.$events.watch(this,this.get,"refresh")},methods:{get(){this.loading=!0,this.$api.getIncident(this.$route.query.incident,((t,e)=>{this.loading=!1,e?this.error=e:this.incident=t}))},edit(t,e){this.editing={active:!0,appId:this.incident.application_id,check:{id:t,title:e}}},openView(t){if("traces"===t){let e="";this.incident.latency_slo&&this.incident.latency_slo.threshold>0&&(e=`${this.incident.latency_slo.threshold}-err`);const s=`::${this.incident.actual_from}-${this.incident.actual_to}:${e}:`;return{query:{...this.$route.query,view:t,trace:s}}}return{query:{...this.$route.query,view:t,trace:void 0}}}}},Sc=$c,Ic=(0,_t.Z)(Sc,mc,hc,!1,null,"5ab8a19a",null),qc=Ic.exports,Pc=function(){var t=this,e=t._self._c;return e("div",[t.loading?e(ts.Z,{attrs:{indeterminate:"",color:"green"}}):t._e(),t.error?e(K.Z,{attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(" "+t._s(t.error)+" ")]):t.loading||t.applications.length?e("ApplicationFilter",{staticClass:"my-4",attrs:{applications:t.applications,autoSelectNamespaceThreshold:t.maxApplications},on:{filter:t.setFilter}}):e("NoData"),t.tooManyApplications?e("div",{staticClass:"text-center red--text mt-5"},[t._v(" Too many applications ("+t._s(t.tooManyApplications)+") to render. Please choose a different category or namespace. ")]):t._e(),e("div",{directives:[{name:"on-resize",rawName:"v-on-resize",value:t.calc,expression:"calc"}],staticClass:"applications",on:{scroll:t.calc}},[t._l(t.levels,(function(s){return e("div",{staticClass:"level",staticStyle:{"z-index":"1"},style:{rowGap:200/s.length+"px",maxWidth:100/t.levels.length+"%"}},t._l(s,(function(s){return e("div",{staticStyle:{"text-align":"center"}},[e("div",{ref:s.id,refInFor:!0,staticClass:"app",class:{selected:s.hi(t.hi)},style:t.getStatusStyle(s.status),on:{mouseenter:function(e){t.hi=s.id},mouseleave:function(e){t.hi=null}}},[e("div",{staticClass:"d-flex"},[e("div",{staticClass:"flex-grow-1 name"},[e("router-link",{attrs:{to:{name:"overview",params:{view:"applications",id:s.id},query:t.$utils.contextQuery()}}},[e("AppHealth",{attrs:{app:s}})],1)],1),e("div",[e("AppPreferences",{attrs:{app:s,categories:t.categories}})],1)]),t.hideLabels?t._e():e("Labels",{staticClass:"d-none d-sm-block label",attrs:{labels:s.labels}})],1)])})),0)})),e("svg",{style:{zIndex:t.hi?2:0}},[e("defs",[t._l(["unknown","ok","warning","critical"],(function(t){return[e("marker",{staticClass:"marker",class:t,attrs:{id:`marker-${t}`,viewBox:"0 0 10 10",refX:"10",refY:"5",markerWidth:10,markerHeight:10,markerUnits:"userSpaceOnUse",orient:"auto-start-reverse"}},[e("path",{attrs:{d:"M 0 3 L 10 5 L 0 7 z"}})])]}))],2),t._l(t.arrows,(function(s){return[s.dd?e("path",{staticClass:"arrow",class:s.status,attrs:{d:s.dd}}):t._e(),e("path",{staticClass:"arrow",class:s.status,attrs:{d:s.d,"stroke-opacity":s.hi?1:.7,"marker-end":`url(#marker-${s.status})`}})]}))],2),t._l(t.arrows,(function(s){return[s.stats&&s.hi?e("div",{staticClass:"stats",style:{top:s.stats.y+"px",left:s.stats.x+"px",zIndex:3}},t._l(s.stats.items,(function(s){return e("div",[t._v(t._s(s))])})),0):t._e()]}))],2)],1)},Ac=[];function Oc(t,e,s,a,i){if(e){s.add(e.id);for(const r of e.upstreams)s.has(r.id)?i.add(e.id+"->"+r.id):a.has(r.id)||Oc(t,t.get(r.id),s,a,i);s.delete(e.id),a.add(e.id)}}function Tc(t,e,s,a){if(e){(void 0===e.level||s>e.level)&&(e.level=s);for(const i of e.upstreams){const r=e.id+"->"+i.id;a.has(r)||Tc(t,t.get(i.id),s+1,a)}}}var jc={components:{NoData:Ql,AppPreferences:ro,ApplicationFilter:Zr,AppHealth:Xr,Labels:Wr},data(){return{applications:[],categories:[],loading:!1,error:"",levels:[],arrows:[],hi:null,filter:new Set,tooManyApplications:0}},mounted(){this.get(),this.$events.watch(this,this.get,"refresh"),this.calc()},watch:{applications(){this.calc()},hi(t){this.highlightArrows(t)},selectedCategories(){this.calc()}},computed:{maxApplications(){return 1e3},hideLabels(){return this.levels.some((t=>t.length>=15))}},methods:{get(){this.loading=!0,this.error="",this.$api.getOverview("map","",((t,e)=>{this.loading=!1,e?this.error=e:(this.applications=t.map||[],this.categories=t.categories||[])}))},setFilter(t){this.filter=t,this.calc()},calc(){if(!this.applications)return;const t=new Map;this.applications.forEach((e=>{t.set(e.id,e)})),this.tooManyApplications=0;const e=e=>t.get(e.id)&&this.filter.has(e.id),s=this.applications.filter(e).map((t=>({...t})));if(s.length>this.maxApplications)return this.tooManyApplications=s.length,this.levels=[],void(this.arrows=[]);s.forEach((t=>{t.name=this.$utils.appId(t.id).name,t.level=0,t.upstreams=t.upstreams.filter(e),t.upstreams.sort(((t,e)=>t.id.localeCompare(e.id))),t.downstreams=t.downstreams.filter(e),t.hi=e=>Array.of(t,...t.upstreams,...t.downstreams).some((t=>t.id===e))})),s.sort(((t,e)=>t.name.localeCompare(e.name))),this.calcLevels(s),requestAnimationFrame((()=>this.calcArrows(s)))},calcLevels(t){if(0===t.length)return void(this.levels=[]);const e=new Map;t.forEach((t=>{e.set(t.id,t)}));const s=new Set;t.forEach((t=>{Oc(e,t,new Set,new Set,s)})),t.forEach((t=>{t.downstreams=t.downstreams.filter((e=>!s.has(e.id+"->"+t.id)))}));const a=t.filter((t=>0===t.downstreams.length));a.forEach((t=>{Tc(e,t,0,s)}));const i=Math.max(...t.map((t=>t.level))),r=Array.from({length:i+1},(()=>[]));t.forEach((t=>{let e=t.level;0===t.upstreams.length&&0===t.downstreams.length?e=i:0===t.downstreams.length?e=0:0===t.upstreams.length&&(e=i),r[e].push(t)})),this.levels=r},calcArrows(t){if(!t.length)return void(this.arrows=[]);const e=t=>{const e=this.$refs[t]&&(this.$refs[t][0]||this.$refs[t]);return e?{top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}:null},s=[];t.forEach((t=>{t.upstreams.forEach((a=>{const i={src:t.id,dst:a.id,status:a.status,w:a.weight||0},r=e(i.src),o=e(i.dst);r&&o&&(s.push(i),i.x1=r.left+r.width,i.y1=r.top+r.height/2,i.x2=o.left,i.y2=o.top+o.height/2,i.x1>i.x2&&(i.x1=r.left,i.x2=o.left+o.width),i.d=`M${i.x1},${i.y1} L${i.x2},${i.y2}`,a.stats&&a.stats.length&&(i.stats={x:(i.x2+i.x1)/2-20,y:(i.y2+i.y1)/2-12*a.stats.length/2,items:a.stats}))}))})),this.arrows=s},highlightArrows(t){if(this.arrows.forEach((e=>{e.hi=t&&(e.src===t||e.dst===t),e.dd=""})),!t)return;const e=this.arrows.filter((t=>t.hi)),s=Math.max(...e.map((t=>t.w)));s&&e.forEach((t=>{if(!t.w)return;const e=3*t.w/s,a=e/2+((t.y2-t.y1)**2+(t.x2-t.x1)**2)/(8*e);t.dd=`M${t.x1},${t.y1} A${a},${a} 0,0,0 ${t.x2},${t.y2} A${a},${a} 0,0,0 ${t.x1},${t.y1}`}))},getStatusStyle(t){const e={critical:{background:"#FFCDD2",color:"#EF5350"},warning:{background:"#FFE0B2",color:"#FFA726"},unknown:{background:"#F5F5F5",color:"#757575"},ok:{background:"#e7f8ef",color:"#1DBF73"}},s=e[t]||{};return{backgroundColor:s.background,borderLeft:`4px solid ${s.color}`}}}},Ec=jc,Lc=(0,_t.Z)(Ec,Pc,Ac,!1,null,"755ec076",null),Nc=Lc.exports,Mc=function(){var t=this,e=t._self._c;return e("div",{staticClass:"traces"},[t.error?e(K.Z,{attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(" "+t._s(t.error)+" ")]):t.view.message?e(K.Z,{staticClass:"message",attrs:{color:"info",outlined:"",text:""}},["not_found"===t.view.message?[t._v(" This page only shows traces from OpenTelemetry integrations, not from eBPF. "),e("div",{staticClass:"mt-2"},[e("OpenTelemetryIntegration",{attrs:{color:"primary"}},[t._v("Integrate OpenTelemetry")])],1)]:t._e(),"no_clickhouse"===t.view.message?[t._v(" Clickhouse integration is not configured. ")]:t._e()],2):[e("div",{staticClass:"mt-4 d-flex"},[e(ct.Z),e("OpenTelemetryIntegration",{attrs:{small:"",color:"primary"}},[t._v("Integrate OpenTelemetry")])],1),t.view.error?e(K.Z,{attrs:{color:"error",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(" "+t._s(t.view.error)+" ")]):t._e(),t.view.heatmap?e("Heatmap",{attrs:{heatmap:t.view.heatmap,selection:t.selection,loading:t.loading},on:{select:t.setSelection}}):t._e(),e(ee.Z,{attrs:{height:"32","show-arrows":"","hide-slider":""}},t._l(t.views,(function(s){return e(Xt.Z,{key:s.name,staticClass:"view",class:{active:t.query.view===s.name},attrs:{to:t.openView(s.name)}},[e(it.Z,{staticClass:"mr-1",attrs:{small:""}},[t._v(t._s(s.icon))]),t._v(" "+t._s(s.title)+" ")],1)})),1),e(Gt.Z,{staticClass:"query px-4 py-2 my-4",attrs:{outlined:""}},[e("div",{staticClass:"mt-2 d-flex align-center",staticStyle:{gap:"4px"}},[e("div",[t._v("Filters:")]),e("div",{staticClass:"d-flex flex-wrap align-center filters"},[t._l(t.filters,(function(s,a){return e("div",{staticClass:"d-flex align-center filter"},[s.edit?[e(ps.Z,{staticClass:"field",attrs:{items:Object.keys(t.filterable.fields).map((e=>({value:e,text:t.filterable.fields[e]}))),outlined:"",dense:"","hide-details":"","menu-props":{"offset-y":!0},"append-icon":"mdi-chevron-down"},model:{value:s.field,callback:function(e){t.$set(s,"field",e)},expression:"f.field"}}),e(ps.Z,{staticClass:"op",attrs:{items:t.filterable.ops,outlined:"",dense:"","hide-details":"","menu-props":{"offset-y":!0},"append-icon":"mdi-chevron-down"},model:{value:s.op,callback:function(e){t.$set(s,"op",e)},expression:"f.op"}}),e(wt.Z,{staticClass:"value",attrs:{outlined:"",dense:"","hide-details":""},model:{value:s.value,callback:function(e){t.$set(s,"value",e)},expression:"f.value"}}),e(et.Z,{attrs:{disabled:!s.field,small:"",icon:""},on:{click:t.applyFilters}},[e(it.Z,{attrs:{small:"",color:"success"}},[t._v("mdi-check")])],1),e(et.Z,{attrs:{small:"",icon:""},on:{click:function(e){return t.delFilter(a)}}},[e(it.Z,{attrs:{small:"",color:"error"}},[t._v("mdi-close")])],1)]:[e(_r.Z,{attrs:{label:"",close:"",color:"primary"},on:{click:function(e){return t.editFilter(a)},"click:close":function(e){return t.delFilter(a)}}},[e("div",{staticClass:"where-arg"},[t._v(t._s(t.filterable.fields[s.field])+" "+t._s(s.op)+" "+t._s(s.value))])])]],2)})),t.filters.some((t=>t.edit))?t._e():e(et.Z,{attrs:{small:"",icon:""},on:{click:t.newFilter}},[e(it.Z,{attrs:{small:""}},[t._v("mdi-plus")])],1)],2)]),e("div",{staticClass:"d-flex align-center"},[e("div",[e("div",{staticClass:"marker selection"})]),e("div",[t._v(" Selection: "),t.selectionDefined?[t.query.ts_from&&t.query.ts_to?[t._v(" time "),e("var",[t._v(" "+t._s(t.format(t.query.ts_from,"ts")))]),t._v(" — "),e("var",[t._v(" "+t._s(t.format(t.query.ts_to,"ts")))])]:t._e(),"inf"!==t.query.dur_from||"err"===t.query.dur_to?[t._v(" where ( "),"inf"!==t.query.dur_from?[t._v(" trace duration "),e("var",[t._v(" "+t._s(t.format(t.query.dur_from,"dur")))]),t._v(" — "),e("var",[t._v(" "+t._s(t.format(t.query.dur_to,"dur")))]),"err"===t.query.dur_to?[t._v(" or ")]:t._e()]:t._e(),"err"===t.query.dur_to?[t._v(" trace status is "),e("var",[t._v(" Error")])]:t._e(),t._v(" ) ")]:t._e(),e(Li.Z,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:s}){return[e(et.Z,t._g({attrs:{to:t.clearSelection(),"x-small":"",icon:"",exact:""}},s),[e(it.Z,{attrs:{small:""}},[t._v("mdi-close")])],1)]}}],null,!1,1649188502)},[e(Gt.Z,{staticClass:"px-2 py-1"},[t._v(" clear selection ")])],1)]:e("span",{staticClass:"grey--text"},["attributes"===t.query.view?[t._v("select a chart area to explore trace attributes")]:[t._v("select a chart area to see traces for a specific time range, duration, or status")]],2)],2)]),"attributes"===t.query.view||"latency"===t.query.view?e("div",{staticClass:"d-flex align-center"},[e("div",[e("div",{staticClass:"marker baseline"})]),t._v(" Baseline: other events within the time window ")]):t._e(),e(Kt.Z,{attrs:{disabled:t.loading}},[e(hs.Z,{attrs:{label:"Exclude auxiliary requests (from monitoring, control plane, etc)",dense:"","hide-details":""},model:{value:t.form.excludeAux,callback:function(e){t.$set(t.form,"excludeAux",e)},expression:"form.excludeAux"}}),"latency"===t.query.view?e("div",{staticClass:"d-flex mt-2 mb-1 align-baseline",staticStyle:{gap:"8px","min-width":"0"}},[e("div",[t._v("View:")]),e(fo.Z,{attrs:{value:t.query.diff||!1,mandatory:""},on:{change:t.setDiffMode}},[e(et.Z,{attrs:{value:!1,height:"30"}},[e(it.Z,{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-chart-timeline")]),t._v(" FlameGraph ")],1),e(et.Z,{attrs:{value:!0,height:"30",disabled:!t.selectionDefined}},[e(it.Z,{staticClass:"mr-1 mdi-flip-h",attrs:{small:""}},[t._v("mdi-select-compare")]),t._v(" Diff ")],1)],1)],1):t._e()],1),t.loading?e(ts.Z,{staticStyle:{position:"absolute",bottom:"0",left:"0"},attrs:{indeterminate:"",height:"4"}}):t._e()],1),t.query.trace_id?e("div",{staticClass:"mt-5",staticStyle:{"min-height":"50vh"}},[e("div",{staticClass:"text-md-h6 mb-3"},[e("router-link",{attrs:{to:t.openView("traces")}},[e(it.Z,[t._v("mdi-arrow-left")])],1),t._v(" Trace "+t._s(t.query.trace_id)+" ")],1),t.view.trace?e("TracingTrace",{attrs:{spans:t.view.trace}}):t._e()],1):"overview"===t.query.view?e("div",{staticClass:"mt-5",staticStyle:{"min-height":"50vh"}},[e(vi.Z,{staticClass:"table",attrs:{items:t.view.summary?t.view.summary.stats:[],"items-per-page":50,"sort-by":"total","sort-desc":"","must-sort":"",dense:"","mobile-breakpoint":"0","no-data-text":"No traces found",headers:[{value:"service_name",text:"Root Service Name",align:"start"},{value:"span_name",text:"Root Span Name",align:"start"},{value:"total",text:"Requests",align:"end"},{value:"failed",text:"Errors",align:"end"},{value:"duration_quantiles[0]",text:"p50",align:"end"},{value:"duration_quantiles[1]",text:"p95",align:"end"},{value:"duration_quantiles[2]",text:"p99",align:"end"}],"footer-props":{itemsPerPageOptions:[10,20,50,100,-1]}},scopedSlots:t._u([{key:"item.service_name",fn:function({item:s}){return[e("router-link",{attrs:{to:t.filterTraces(s.service_name)}},[t._v(" "+t._s(s.service_name)+" ")])]}},{key:"item.span_name",fn:function({item:s}){return[e("router-link",{attrs:{to:t.filterTraces(s.service_name,s.span_name)}},[t._v(" "+t._s(s.span_name)+" ")])]}},{key:"item.total",fn:function({item:s}){return[e("span",[t._v(t._s(t.format(s.total)))]),e("span",{staticClass:"caption grey--text"},[t._v("/s")])]}},{key:"item.failed",fn:function({item:s}){return[s.failed?e("router-link",{attrs:{to:t.filterTraces(s.service_name,s.span_name,!0)}},[e("span",[t._v(t._s(t.format(s.failed,"%")))]),e("span",{staticClass:"caption grey--text"},[t._v("%")])]):e("span",[t._v("—")])]}},{key:"item.duration_quantiles[0]",fn:function({item:s}){return[e("span",[t._v(t._s(t.format(s.duration_quantiles[0],"ms")))]),e("span",{staticClass:"caption grey--text"},[t._v(" ms")])]}},{key:"item.duration_quantiles[1]",fn:function({item:s}){return[e("span",[t._v(t._s(t.format(s.duration_quantiles[1],"ms")))]),e("span",{staticClass:"caption grey--text"},[t._v(" ms")])]}},{key:"item.duration_quantiles[2]",fn:function({item:s}){return[e("span",[t._v(t._s(t.format(s.duration_quantiles[2],"ms")))]),e("span",{staticClass:"caption grey--text"},[t._v(" ms")])]}},{key:"foot",fn:function(){return[e("tfoot",t._l(t.view.summary?[t.view.summary.overall]:[],(function(s){return e("tr",[e("td",{staticClass:"font-weight-medium"},[t._v("OVERALL")]),e("td"),e("td",{staticClass:"text-right font-weight-medium"},[e("span",[t._v(t._s(t.format(s.total)))]),e("span",{staticClass:"caption grey--text"},[t._v("/s")])]),e("td",{staticClass:"text-right font-weight-medium"},[s.failed?e("router-link",{attrs:{to:t.filterTraces(t.query.service_name,t.query.span_name,!0)}},[e("span",[t._v(t._s(t.format(s.failed,"%")))]),e("span",{staticClass:"caption grey--text"},[t._v("%")])]):e("span",[t._v("—")])],1),e("td",{staticClass:"text-right font-weight-medium"},[e("span",[t._v(t._s(t.format(s.duration_quantiles[0],"ms")))]),e("span",{staticClass:"caption grey--text"},[t._v(" ms")])]),e("td",{staticClass:"text-right font-weight-medium"},[e("span",[t._v(t._s(t.format(s.duration_quantiles[1],"ms")))]),e("span",{staticClass:"caption grey--text"},[t._v(" ms")])]),e("td",{staticClass:"text-right font-weight-medium"},[e("span",[t._v(t._s(t.format(s.duration_quantiles[2],"ms")))]),e("span",{staticClass:"caption grey--text"},[t._v(" ms")])])])})),0)]},proxy:!0}])})],1):"traces"===t.query.view?e("div",{staticClass:"mt-5",staticStyle:{"min-height":"50vh"}},[e(ns.Z,{attrs:{dense:""}},[e("thead",[e("tr",[e("th",[t._v("Trace ID")]),e("th",[t._v("Root Service")]),e("th",[t._v("Name")]),e("th",[t._v("Status")]),e("th",[t._v("Duration")])])]),e("tbody",t._l(t.view.traces,(function(s){return e("tr",[e("td",[e("router-link",{staticClass:"text-no-wrap",attrs:{to:t.openTrace(s.trace_id),exact:""}},[e(it.Z,{staticStyle:{"vertical-align":"baseline"},attrs:{small:""}},[t._v("mdi-chart-timeline")]),t._v(" "+t._s(s.trace_id.substring(0,8))+" ")],1)],1),e("td",{staticClass:"text-no-wrap"},[t._v(t._s(s.service))]),e("td",{staticClass:"text-no-wrap"},[t._v(t._s(s.name))]),e("td",{staticClass:"text-no-wrap"},[s.status.error?e(it.Z,{staticClass:"ml-1",staticStyle:{"margin-bottom":"2px"},attrs:{color:"error",small:""}},[t._v("mdi-alert-circle")]):e(it.Z,{staticClass:"ml-1",staticStyle:{"margin-bottom":"2px"},attrs:{color:"success",small:""}},[t._v("mdi-check-circle")]),t._v(" "+t._s(s.status.message)+" ")],1),e("td",{staticClass:"text-no-wrap"},[t._v(" "+t._s(t.format(s.duration,"ms"))+" "),e("span",{staticClass:"caption grey--text"},[t._v(" ms")])])])})),0)]),t.loading||t.view.traces&&t.view.traces.length?t._e():e("div",{staticClass:"pa-3 text-center grey--text"},[t._v("No traces found")]),!t.loading&&t.view.traces&&t.view.traces.length&&t.view.limit?e("div",{staticClass:"text-right caption grey--text"},[t._v(" The output is capped at "+t._s(t.view.limit)+" traces. ")]):t._e()],1):"attributes"===t.query.view?e("div",[e("div",{staticClass:"d-flex grey--text mt-2 mb-3"},[e(it.Z,{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-information-outline")]),t._v(" This section shows how the attributes of traces in the selected area differ from those of other traces. ")],1),e("div",{staticClass:"attr-stats",style:{gap:t.statsStyles.gap}},t._l(t.view.attr_stats,(function(s){return e("div",{staticClass:"attr",style:{width:t.statsStyles.attrWidth}},[e("div",{staticClass:"name"},[t._v(t._s(s.name))]),t._l(s.values,(function(s){return e(Li.Z,{attrs:{bottom:"",transition:"none",attach:".attr-stats","content-class":"attr-value-details"},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e("router-link",{attrs:{to:t.openTrace(s.sample_trace_id)}},[e("div",t._g({staticClass:"value"},a),[e("div",{staticClass:"name"},[t._v(" "+t._s(s.name)+" ")]),e("div",{staticClass:"bars"},[e("div",{staticClass:"bar baseline",style:{width:100*s.baseline+"%"}}),e("div",{staticClass:"bar selection",style:{width:100*s.selection+"%"}})])])])]}}],null,!0)},[e(Gt.Z,{staticClass:"pa-2"},[e("div",[t._v("Value:")]),e("div",{staticClass:"font-weight-medium mb-1"},[t._v(t._s(s.name))]),e("div",{staticClass:"baseline"},[e("span",{staticClass:"marker"}),t._v(" Baseline: "+t._s(s.baseline?t.format(s.baseline,"%")+"%":"—")+" ")]),e("div",{staticClass:"selection"},[e("span",{staticClass:"marker"}),t._v(" Selection: "+t._s(s.selection?t.format(s.selection,"%")+"%":"—")+" ")]),e("div",{staticClass:"d-flex grey--text mt-2"},[e(it.Z,{staticClass:"mr-1",attrs:{"x-small":""}},[t._v("mdi-information-outline")]),t._v(" Click to view a sample trace containing this attribute ")],1)])],1)}))],2)})),0)]):"errors"===t.query.view?e("div",[e("div",{staticClass:"d-flex grey--text mt-2 mb-3"},[e(it.Z,{staticClass:"mr-2",attrs:{small:""}},[t._v("mdi-information-outline")]),t._v(" This section highlights the underlying reasons why traces within the selected range contain errors. It identifies the tracing spans where errors originated. ")],1),e(vi.Z,{staticClass:"table errors",attrs:{items:t.view.errors||[],"items-per-page":20,"sort-by":"count","sort-desc":"","must-sort":"","mobile-breakpoint":"0","no-data-text":"No errors found",headers:[{value:"service_name",text:"Service Name",width:"15%"},{value:"span_name",text:"Span",width:"25%"},{value:"sample_error",text:"Error",width:"40%"},{value:"sample_trace_id",text:"Sample Trace",sortable:!1,width:"16ch"},{value:"count",text:"Percentage",width:"16ch"}],"footer-props":{itemsPerPageOptions:[10,20,50,100,-1]}},scopedSlots:t._u([{key:"item.service_name",fn:function({item:s}){return[e("span",{staticClass:"service nowrap",style:{borderColor:t.color(s.service_name)},attrs:{title:s.service_name}},[t._v(" "+t._s(s.service_name)+" ")])]}},{key:"item.span_name",fn:function({item:s}){return[e("div",{staticClass:"nowrap",attrs:{title:s.span_name}},[t._v(t._s(s.span_name))]),t._l(s.labels,(function(s,a){return e("div",{staticClass:"caption nowrap",staticStyle:{"line-height":"1rem"},attrs:{title:`${a}: ${s}`}},[t._v(" • "+t._s(a)+": "+t._s(s)+" ")])}))]}},{key:"item.sample_error",fn:function({item:s}){return[s.sample_error?e("div",{staticClass:"nowrap",attrs:{title:s.sample_error}},[e(it.Z,{staticStyle:{"margin-bottom":"2px"},attrs:{color:"error",small:""}},[t._v("mdi-alert-circle")]),t._v(" "+t._s(s.sample_error)+" ")],1):t._e()]}},{key:"item.sample_trace_id",fn:function({item:s}){return[e("router-link",{staticClass:"nowrap",attrs:{to:t.openTrace(s.sample_trace_id),exact:""}},[e(it.Z,{staticStyle:{"vertical-align":"baseline"},attrs:{small:""}},[t._v("mdi-chart-timeline")]),t._v(" "+t._s(s.sample_trace_id.substring(0,8))+" ")],1)]}},{key:"item.count",fn:function({item:s}){return[e("div",{staticClass:"d-flex align-center",staticStyle:{gap:"4px"}},[e("div",{staticStyle:{"text-align":"right",width:"4ch"}},[e("span",[t._v(t._s(t.format(s.count,"%")))]),e("span",{staticClass:"caption grey--text"},[t._v("%")])]),e("div",{staticClass:"flex-grow-1"},[e(ts.Z,{attrs:{value:100*s.count,"background-opacity":"0",height:"14"}})],1)])]}}])})],1):"latency"===t.query.view?e("div",[e("div",{staticClass:"d-flex grey--text mt-2 mb-3"},[e(it.Z,{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-information-outline")]),t._v(" This section shows the latency FlameGraph for the selected traces. A wider frame indicates greater time consumption by that tracing span. ")],1),t.view.latency?e("FlameGraph",{staticClass:"pt-2",attrs:{profile:t.view.latency,actions:[{title:"Open a sample trace",icon:"mdi-chart-timeline",to:e=>t.openTrace(e.data["trace_id"])}]}}):t._e()],1):t._e()]],2)},zc=[],Fc=function(){var t=this,e=t._self._c;return e(Yt.Z,{scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(et.Z,t._g(t._b({attrs:{color:t.color,outlined:t.outlined,small:t.small}},"v-btn",a,!1),s),[t._t("default")],2)]}}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(Gt.Z,{staticClass:"pa-5"},[e("div",{staticClass:"d-flex align-center text-h5 mb-4"},[t._v(" OpenTelemetry Integration "),e(ct.Z),e(et.Z,{attrs:{icon:""},on:{click:function(e){t.dialog=!1}}},[e(it.Z,[t._v("mdi-close")])],1)],1),e("p",[e("a",{attrs:{href:"https://opentelemetry.io/",target:"_blank"}},[t._v("OpenTelemetry")]),t._v(" is a vendor-neutral, open-source project that provides a set of APIs, SDKs, and tooling for collecting and exporting telemetry data. OpenTelemetry provides SDKs for many popular programming languages and a collector that allows you to export telemetry data into to one or more open-source or commercial back-ends. codexray can serve as an OpenTelemetry backend for traces and logs. Telemetry data can be ingested directly into codexray or through the OpenTelemetry collector. ")]),e(Kt.Z,{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e("div",{staticClass:"subtitle-2"},[t._v("codexray URL (must be accessible by instrumented applications or the OpenTelemetry collector):")]),e(wt.Z,{attrs:{rules:[t.$validators.notEmpty,t.$validators.isUrl],placeholder:"http://codexray:8080",outlined:"",dense:"","hide-details":""},model:{value:t.codexray_url,callback:function(e){t.codexray_url=e},expression:"codexray_url"}}),e("div",{staticClass:"subtitle-2 mt-2"},[t._v(" API Key (can be managed in the "),e("router-link",{attrs:{to:{name:"project_settings"}}},[e("span",{on:{click:function(e){t.dialog=!1}}},[t._v("project settings")])]),t._v("): ")],1),e(ps.Z,{attrs:{rules:[t.$validators.notEmpty],items:"permission denied"===t.api_keys?[]:t.api_keys.map((t=>({value:t.key,text:`${t.key} (${t.description})`}))),outlined:"",dense:"","hide-details":"","menu-props":{offsetY:!0},"no-data-text":"permission denied"===t.api_keys?"Only project Admins can access API keys.":"No keys available"},model:{value:t.api_key,callback:function(e){t.api_key=e},expression:"api_key"}}),0===t.tab?[e("div",{staticClass:"subtitle-2 mt-2"},[t._v("Service name:")]),e(wt.Z,{attrs:{rules:[t.$validators.notEmpty,t.$validators.isSlug],placeholder:"catalog",outlined:"",dense:""},model:{value:t.service_name,callback:function(e){t.service_name=e},expression:"service_name"}})]:t._e()],2),e(ee.Z,{staticClass:"mb-4",attrs:{height:"40","slider-size":"2"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(Xt.Z,[e(it.Z,{staticClass:"mr-1"},[t._v("mdi-application-braces-outline")]),t._v("SDK")],1),e(Xt.Z,[e(it.Z,{staticClass:"mr-1"},[t._v("mdi-arrow-decision-outline")]),t._v("OpenTelemetry Collector")],1)],1),e(se.Z,{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(te.Z,{attrs:{transition:"none"}},[e("p",[t._v("Instrument your apps with the relevant OpenTelemetry SDK:")]),e("ul",{staticClass:"my-2"},[e("li",[e("a",{attrs:{href:"https://codexray.com/docs/codexray/tracing/opentelemetry-go",target:"_blank"}},[t._v("Go")])]),e("li",[e("a",{attrs:{href:"https://codexray.com/docs/codexray/tracing/opentelemetry-java",target:"_blank"}},[t._v("Java")])]),e("li",[e("a",{attrs:{href:"https://codexray.com/docs/codexray/tracing/opentelemetry-python",target:"_blank"}},[t._v("Python")])]),e("li",[e("a",{attrs:{href:"https://opentelemetry.io/docs/languages/cpp/getting-started/",target:"_blank"}},[t._v("C++")])]),e("li",[e("a",{attrs:{href:"https://opentelemetry.io/docs/languages/net/getting-started/",target:"_blank"}},[t._v(".NET")])]),e("li",[e("a",{attrs:{href:"https://opentelemetry.io/docs/languages/js/getting-started/",target:"_blank"}},[t._v("JavaScript")])]),e("li",[e("a",{attrs:{href:"https://opentelemetry.io/docs/languages/php/getting-started/",target:"_blank"}},[t._v("PHP")])]),e("li",[e("a",{attrs:{href:"https://opentelemetry.io/docs/languages/ruby/getting-started/",target:"_blank"}},[t._v("Ruby")])]),e("li",[e("a",{attrs:{href:"https://opentelemetry.io/docs/languages/rust/getting-started/",target:"_blank"}},[t._v("Rust")])])]),e("p",[t._v("Use the following environment variables to configure the SDKs to send traces and logs directly to codexray:")]),e("Code",{attrs:{disabled:!t.valid}},[e("pre",[t._v('OTEL_SERVICE_NAME="'+t._s(t.service_name)+'" \\\nOTEL_EXPORTER_OTLP_TRACES_ENDPOINT="'+t._s(t.codexray_url)+'/v1/traces" \\\nOTEL_EXPORTER_OTLP_LOGS_ENDPOINT="'+t._s(t.codexray_url)+'/v1/logs" \\\nOTEL_EXPORTER_OTLP_PROTOCOL="http/protobuf" \\\nOTEL_METRICS_EXPORTER="none" \\\nOTEL_EXPORTER_OTLP_HEADERS="x-api-key='+t._s(t.api_key)+'"\n                        ')])])],1),e(te.Z,{attrs:{transition:"none"}},[e("p",[t._v(" If your apps are already configured to send logs and traces to the OpenTelemetry collector, you can simply add an additional exporter to send data to codexray using the OTLP protocol: ")]),e("Code",{attrs:{disabled:!t.valid}},[e("pre",[t._v('receivers:\n  otlp:\n    protocols:\n      grpc:\n        endpoint: 0.0.0.0:4317\n      http:\n        endpoint: 0.0.0.0:4318\n\nprocessors:\n  batch:\n\nexporters:\n  otlphttp/codexray:\n    endpoint: "'+t._s(t.codexray_url)+'"\n    encoding: proto\n    headers:\n      "x-api-key": "'+t._s(t.api_key)+'"\n\nservice:\n  pipelines:\n    traces:\n      receivers: [otlp]\n      processors: [batch]\n      exporters: [otlphttp/codexray]\n    logs:\n       receivers: [otlp]\n       processors: [batch]\n       exporters: [otlphttp/codexray]\n                        ')])])],1)],1)],1)],1)},Dc=[],Rc={props:{color:String,outlined:Boolean,small:Boolean},components:{Code:de},data(){const t=["127.0.0.1","localhost"].some((t=>location.origin.includes(t)));return{error:"",dialog:!1,tab:null,codexray_url:t?"":location.origin,service_name:"",api_keys:[],api_key:"",valid:!1}},watch:{dialog(){this.dialog&&this.get()}},methods:{get(){this.$api.getProject(this.$route.params.projectId,((t,e)=>{e?this.error=e:this.api_keys=t.api_keys||[]}))}}},Hc=Rc,Vc=(0,_t.Z)(Hc,Fc,Dc,!1,null,"3f5c4716",null),Uc=Vc.exports,Bc={components:{OpenTelemetryIntegration:Uc,FlameGraph:cl,TracingTrace:Pl,Heatmap:Sn},data(){return{view:{},filters:[],form:{excludeAux:!0,diff:!1},loading:!1,error:""}},mounted(){this.get(),this.$events.watch(this,this.get,"refresh")},watch:{form:{handler(t){this.setForm(t)},deep:!0},"$route.query.query":{handler(){this.filters=(this.query.filters||[]).map((t=>({...t,edit:!1}))),this.form.excludeAux=!this.query.include_aux,this.form.diff=!!this.selectionDefined&&this.query.diff||!1,this.get()},immediate:!0}},computed:{views(){return[{name:"overview",title:"overview",icon:"mdi-format-list-checkbox"},{name:"traces",title:"traces",icon:"mdi-chart-timeline"},{name:"errors",title:"error causes",icon:"mdi-target"},{name:"latency",title:"latency explorer",icon:"mdi-clock-fast"},{name:"attributes",title:"compare attributes",icon:"mdi-select-compare"}]},query(){let t={};try{t=JSON.parse(this.$route.query.query)}catch{}return t.view||(t.view="overview"),t},filterable(){return{fields:{ServiceName:"Root Service Name",SpanName:"Root Span Name",TraceId:"Trace ID"},ops:["=","!=","~","!~"]}},selection(){const t=this.query;return{x1:t.ts_from,x2:t.ts_to,y1:t.dur_from,y2:t.dur_to}},selectionDefined(){const t=this.query;return t.ts_from||t.ts_to||t.dur_from||t.dur_to},statsStyles(){const t=8,e={xs:2,sm:3,md:4,lg:5,xl:6}[this.$vuetify.breakpoint.name];return{gap:t+"px",attrWidth:`calc((100% - ${(e-1)*t}px) / ${e})`}}},methods:{get(){const t=this.$route.query.query||"";this.loading=!0,this.error="",this.$api.getOverview("traces",t,((t,e)=>{this.loading=!1,e?this.error=e:this.view=t.traces||{}}))},push(t){this.$router.push(t).catch((t=>t))},setQuery(t,e,s){const a=t?JSON.stringify(t):void 0;return{query:{query:a,from:e,to:s}}},filterTraces(t,e,s){const{from:a,to:i}=this.$route.query,r={...this.query};return r.filters=[],t&&r.filters.push({field:"ServiceName",op:"=",value:t}),e&&(r.filters.push({field:"SpanName",op:"=",value:e}),r.view="traces"),s&&(r.view="errors",r.dur_from="inf",r.dur_to="err"),this.setQuery(r,a,i)},openTrace(t){const{from:e,to:s}=this.$route.query,a={...this.query};return a.view="traces",a.trace_id=t,this.setQuery(a,e,s)},openView(t){const{from:e,to:s}=this.$route.query,a={...this.query};return a.view=t,a.trace_id=void 0,t&&"overview"!==t||(a.ts_from=void 0,a.ts_to=void 0,a.dur_from=void 0,a.dur_to=void 0),this.setQuery(a,e,s)},newFilter(){this.filters.push({field:"",op:"=",value:"",edit:!0})},delFilter(t){this.filters.splice(t,1),this.applyFilters()},editFilter(t){this.filters[t].edit=!0},applyFilters(){this.filters.forEach((t=>{t.edit=!t.field}));const{from:t,to:e}=this.$route.query,s={...this.query};s.filters=this.filters.filter((t=>!t.edit)).map((({field:t,op:e,value:s})=>({field:t,op:e,value:s}))),s.filters.length||(s.filters=void 0),"overview"===s.view&&s.filters&&s.filters.some((t=>"TraceId"===t.field))&&(s.view="traces"),this.push(this.setQuery(s,t,e))},clearSelection(){const{from:t,to:e}=this.$route.query,s={...this.query};return s.ts_from=void 0,s.ts_to=void 0,s.dur_from=void 0,s.dur_to=void 0,s.diff=void 0,this.setQuery(s,t,e)},setSelection(t){const{from:e,to:s}=this.view.heatmap.ctx,a={...this.query};a.ts_from=t.x1,a.ts_to=t.x2,a.dur_from=t.y1,a.dur_to=t.y2,a.trace_id=void 0,a.view&&"overview"!==a.view||(a.view="traces"),this.push(this.setQuery(a,e,s))},setDiffMode(t){const{from:e,to:s}=this.$route.query,a={...this.query};a.diff=t||void 0,this.push(this.setQuery(a,e,s))},setForm(t){const{from:e,to:s}=this.$route.query,a={...this.query};a.include_aux=!t.excludeAux,a.diff=t.diff,this.push(this.setQuery(a,e,s))},color(t){return ko.hash2(t)},format(t,e){if("ts"===e)return this.$format.date(t,"{MMM} {DD}, {HH}:{mm}");if("dur"===e)return t?"inf"===t||"err"===t?"Inf":t>=1?t+"s":1e3*t+"ms":"0";if("%"===e){if(t*=100,t<1)return"<1";let e=1;return t>=10&&(e=0),t.toFixed(e)}if("ms"===e){let e=0;return t<10&&(e=1),t.toFixed(e)}let s="";return t>1e3&&(t/=1e3,s="K"),t>1e6&&(t/=1e3,s="M"),t>1e9&&(t/=1e3,s="G"),t.toFixed(1)+s}}},Wc=Bc,Qc=(0,_t.Z)(Wc,Mc,zc,!1,null,"2608b263",null),Jc=Qc.exports,Gc=function(){var t=this,e=t._self._c;return e("div",[t.loading?e(ts.Z,{attrs:{indeterminate:"",color:"green"}}):t._e(),t.error?e(K.Z,{attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(" "+t._s(t.error)+" ")]):t._e(),t.nodes&&t.nodes.rows?e("Table",{staticClass:"nodes-table",attrs:{header:t.nodes.header,rows:t.nodes.rows}}):t.loading||t.error?t._e():e("NoData"),e("div",{staticClass:"mt-4"},[e("AgentInstallation",{attrs:{color:"primary"}},[t._v("Add nodes")])],1)],1)},Yc=[],Kc={components:{Table:gn,NoData:Ql,AgentInstallation:pe},data(){return{nodes:null,loading:!1,error:""}},mounted(){this.get(),this.$events.watch(this,this.get,"refresh")},methods:{get(){this.loading=!0,this.error="",this.$api.getOverview("nodes","",((t,e)=>{this.loading=!1,e?this.error=e:this.nodes=t.nodes}))}}},Xc=Kc,td=(0,_t.Z)(Xc,Gc,Yc,!1,null,"111de8da",null),ed=td.exports,sd=function(){var t=this,e=t._self._c;return e("div",[t.error?e(K.Z,{attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(" "+t._s(t.error)+" ")]):t._e(),t.node?["unknown"===t.node.status?e("div",{staticClass:"text-center"},[t._v(" This node is present in the Kubernetes cluster, but it seems that codexray-node-agent is not installed ("),e("a",{attrs:{href:"https://codexray.com/docs/metric-exporters/node-agent/installation",target:"_blank"}},[t._v("docs")]),t._v("). ")]):e("Dashboard",{staticClass:"mt-3",attrs:{name:t.name,widgets:t.node.widgets}})]:t.loading||t.error?t._e():e("NoData")],2)},ad=[],id={props:{name:String},components:{Dashboard:Rl,NoData:Ql},data(){return{node:null,loading:!1,error:""}},mounted(){this.get(),this.$events.watch(this,this.get,"refresh")},watch:{name(){this.node=null,this.get()}},methods:{get(){this.loading=!0,this.$api.getNode(this.name,((t,e)=>{this.loading=!1,e?this.error=e:this.node=t}))}}},rd=id,od=(0,_t.Z)(rd,sd,ad,!1,null,"b2566dfe",null),nd=od.exports,ld=function(){var t=this,e=t._self._c;return e("div",[t.loading?e(ts.Z,{attrs:{indeterminate:"",color:"green"}}):t._e(),t.error?e(K.Z,{attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(" "+t._s(t.error)+" ")]):t._e(),e("ApplicationFilter",{staticClass:"my-4",attrs:{applications:t.applications},on:{filter:t.setFilter}}),e(vi.Z,{directives:[{name:"on-resize",rawName:"v-on-resize",value:t.calcWidth,expression:"calcWidth"}],ref:"table",staticClass:"table",attrs:{dense:"","mobile-breakpoint":"0","items-per-page":50,items:t.items,"sort-by":"application","sort-desc":"","must-sort":"","no-data-text":"No applications found",headers:[{value:"application",text:"Application",sortable:!1},{value:"requests",text:"Requests",sortable:!1},{value:"latency",text:"Latency",sortable:!1,width:this.sparklineWidthPercent+"%"},{value:"errors",text:"Errors",sortable:!1,width:this.sparklineWidthPercent+"%"},{value:"incident",text:"Incident",sortable:!1,width:"14ch"}],"footer-props":{itemsPerPageOptions:[10,20,50,100,-1]}},scopedSlots:t._u([{key:"item.application",fn:function({item:s}){return[e("div",{staticClass:"application"},[e("div",{staticClass:"name"},[e("router-link",{attrs:{to:{name:"overview",params:{view:"anomalies",id:s.id},query:t.$utils.contextQuery()}}},[t._v(" "+t._s(t.$utils.appId(s.id).name)+" ")])],1)])]}},{key:"item.incident",fn:function({item:s}){return[s.incident?e("div",{staticClass:"incident"},[e("div",{staticClass:"status",class:t.statuses[s.incident.resolved_at?"ok":s.incident.severity].color}),e("router-link",{attrs:{to:{name:"overview",params:{view:"incidents"},query:{incident:s.incident.key}}}},[e("span",{staticClass:"key",staticStyle:{"font-family":"monospace"}},[t._v("i-"+t._s(s.incident.key))])])],1):e("span",{staticClass:"grey--text"},[t._v("-")])]}},{key:"item.requests",fn:function({item:s}){return[s.rps?e("div",[t._v(" "+t._s(t.$format.float(s.rps))+" "),e("span",{staticClass:"grey--text caption"},[t._v("/s")])]):e("span",{staticClass:"grey--text"},[t._v("-")])]}},{key:"item.errors",fn:function({item:s}){return[s.errors?e("div",[e("router-link",{staticClass:"chart",attrs:{to:{name:"overview",params:{view:"anomalies",id:s.id},query:t.$utils.contextQuery()}}},[s.errors.msg?e("div",{staticClass:"value"},[t._v(t._s(s.errors.msg))]):t._e(),s.errors.chart?e(nr.Z,{attrs:{value:s.errors.chart.map((t=>null===t?0:t)),fill:"",smooth:"",padding:"4",color:`${s.errors.msg?"red":"grey"} ${t.$vuetify.theme.dark?"":"lighten-2"}`,height:"30",width:t.sparklineWidth}}):t._e()],1)],1):t._e()]}},{key:"item.latency",fn:function({item:s}){return[s.latency?e("div",[e("router-link",{staticClass:"chart",attrs:{to:{name:"overview",params:{view:"anomalies",id:s.id},query:t.$utils.contextQuery()}}},[s.latency.msg?e("div",{staticClass:"value"},[t._v(t._s(s.latency.msg))]):t._e(),s.latency.chart?e(nr.Z,{attrs:{value:s.latency.chart.map((t=>null===t?0:t)),fill:"",smooth:"",padding:"4",color:`${s.latency.msg?"red":"grey"} ${t.$vuetify.theme.dark?"":"lighten-2"}`,height:"30",width:t.sparklineWidth}}):t._e()],1)],1):t._e()]}}])})],1)},cd=[],dd={components:{ApplicationFilter:Zr},data(){return{loading:!1,error:"",statuses:{critical:{name:"Critical",color:"red lighten-1"},warning:{name:"Warning",color:"orange lighten-1"},ok:{name:"Resolved",color:"grey lighten-1"}},anomalyApplications:[],filter:new Set,sparklineWidth:120,sparklineWidthPercent:30}},mounted(){this.get(),this.$events.watch(this,this.get,"refresh")},computed:{applications(){if(!this.anomalyApplications)return[];const t={};return this.anomalyApplications.forEach((e=>{t[e.id]=e.category})),Object.keys(t).map((e=>({id:e,category:t[e]})))},items(){return this.anomalyApplications?this.anomalyApplications.filter((t=>this.filter.has(t.id))):[]}},methods:{calcWidth(){this.sparklineWidth=this.$refs.table.$el.clientWidth*this.sparklineWidthPercent/100},get(){this.loading=!0;const t=this.$route.query.query||"";this.$api.getOverview("anomalies",t,((t,e)=>{this.loading=!1,e?this.error=e:this.anomalyApplications=t||[]}))},setFilter(t){this.filter=t}}},ud=dd,md=(0,_t.Z)(ud,ld,cd,!1,null,"63b09924",null),hd=md.exports,pd={components:{Applications:Nr,Application:ic,Incidents:uc,Incident:qc,ServiceMap:Nc,Traces:Jc,Nodes:ed,Node:nd,Anomalies:hd,RCA:Zc,NoData:Ql},props:{view:String,id:String,report:String},computed:{views(){const t={applications:"Applications",map:"Topology",traces:"Traces",nodes:"Nodes",EUM:"EUM",incidents:"Incidents"};return"Enterprise"===this.$codexray.edition&&(t.anomalies="Anomalies"),t}},watch:{view:{handler(t){this.views[t]||this.$router.replace({params:{view:"applications"}}).catch((t=>t))},immediate:!0}}},vd=pd,fd=(0,_t.Z)(vd,rr,or,!1,null,"44b2b2be",null),_d=fd.exports,gd=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrapper"},[e("div",{staticClass:"text-center",staticStyle:{"max-width":"800px"}},[e("img",{attrs:{src:`${t.$codexray.base_path}static/icon.svg`,height:"80"}}),e("h1",{staticClass:"text-h4 mt-5 mb-3"},[t._v("Welcome to codexray")]),e("p",[t._v("Looks like everything is working. Now let's create your first project!")]),e(et.Z,{staticClass:"mt-5",attrs:{to:{name:"project_new"},color:"primary",large:""}},[t._v(" Create a project ")])],1)])},yd=[],bd={},xd=bd,wd=(0,_t.Z)(xd,gd,yd,!1,null,"6e9ae7c8",null),kd=wd.exports,Cd=function(){var t=this,e=t._self._c;return e("div",{staticClass:"form"},[e("div",{staticClass:"text-center"},[e("img",{attrs:{src:`${t.$codexray.base_path}static/icon.svg`,alt:":~#",height:"80"}})]),e("h2",{staticClass:"text-h4 my-5 text-center"},[t._v("Welcome to codexray")]),e(Kt.Z,{ref:"form",on:{submit:function(e){return e.preventDefault(),t.post.apply(null,arguments)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[t.error?e(K.Z,{attrs:{color:"red",icon:"mdi-alert-octagon-outline",outlined:"",text:""}},[t._v(" "+t._s(t.error)+" ")]):t.message?e(K.Z,{attrs:{color:"green",outlined:"",text:""}},[t._v(" "+t._s(t.message)+" ")]):t._e(),e("div",{staticClass:"font-weight-medium"},[t._v("Email")]),e(wt.Z,{attrs:{outlined:"",dense:"",type:"email",name:"email",rules:[t.$validators.notEmpty],disabled:t.set_admin_password},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),e("div",{staticClass:"font-weight-medium"},[t._v("Password")]),e(wt.Z,{attrs:{outlined:"",dense:"",type:"password",name:"password",rules:[t.$validators.notEmpty]},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),t.set_admin_password?[e("div",{staticClass:"font-weight-medium"},[t._v("Confirm password")]),e(wt.Z,{attrs:{outlined:"",dense:"",type:"password",rules:[t.$validators.notEmpty,e=>e===t.form.password||"passwords do not match"]},model:{value:t.confirm_password,callback:function(e){t.confirm_password=e},expression:"confirm_password"}})]:t._e(),e(et.Z,{staticClass:"mt-5",attrs:{block:"",type:"submit",disabled:!t.valid,loading:t.loading,color:"primary"}},[t.set_admin_password?[t._v(" Set Admin Password and Log In ")]:[t._v(" Log In ")]],2)],2),t.set_admin_password?t._e():e("div",{staticClass:"caption grey--text text-center mt-10"},[t._v(" Contact your codexray administrator if you forgot your email or password. ")])],1)},Zd=[],$d={data(){return{form:{email:"",password:""},confirm_password:"",valid:!1,error:"",message:"",loading:!1}},computed:{set_admin_password(){return"set_admin_password"===this.$route.query.action}},watch:{set_admin_password:{handler(t){t&&(this.form.email="admin")},immediate:!0}},methods:{post(){this.loading=!0,this.error="";const t={...this.form};this.set_admin_password&&(t.action="set_admin_password"),this.$api.login(t,((t,e)=>{this.loading=!1,e?this.error=e:this.$router.push(this.$route.query.next||{name:"index"})}))}}},Sd=$d,Id=(0,_t.Z)(Sd,Cd,Zd,!1,null,"1b3e3388",null),qd=Id.exports,Pd=function(){var t=this,e=t._self._c;return e("div")},Ad=[],Od={created(){this.$api.logout((()=>{this.$router.push({name:"index"})}))}},Td=Od,jd=(0,_t.Z)(Td,Pd,Ad,!1,null,"4b43d52c",null),Ed=jd.exports,Ld=function(){var t=this,e=t._self._c;return t.error?e(K.Z,{staticClass:"mx-auto mt-5",attrs:{color:"red",elevation:"2",border:"left","colored-border":"","min-width":"60%"}},["configuration"===t.error?e("div",[e("div",[t._v("Your SAML integration appears to be improperly configured.")]),e("div",[t._v(" codexray expects to receive the following attributes from your Identity Provider: "),e("b",[t._v("Email")]),t._v(", "),e("b",[t._v("FirstName")]),t._v(", and "),e("b",[t._v("LastName")]),t._v(". ")])]):e("div",[t._v("Authentication using SAML integration was unsuccessful. Please try again later.")]),e("div",{staticClass:"mt-2 d-flex",staticStyle:{gap:"8px"}},[e(et.Z,{attrs:{to:{name:"index"},color:"primary"}},[t._v("Refresh")]),e(et.Z,{attrs:{to:{name:"login"},color:"warning"}},[t._v("Login as Admin")])],1)]):t._e()},Nd=[],Md={computed:{error(){return this.$route.query.error}}},zd=Md,Fd=(0,_t.Z)(zd,Ld,Nd,!1,null,"c0f2bb10",null),Dd=Fd.exports;o.ZP.config.productionTip=!1,o.ZP.config.devtools=!1;const Rd=window.codexray;o.ZP.use(n.Z);const Hd=new n.Z({mode:"history",base:Rd.base_path,routes:[{path:"/login",name:"login",component:qd,meta:{anonymous:!0}},{path:"/logout",name:"logout",component:Ed,meta:{anonymous:!0}},{path:"/sso/saml",name:"saml",component:Dd,meta:{anonymous:!0}},{path:"/p/settings/:tab?",name:"project_new",component:ir,props:!0},{path:"/p/:projectId/settings/:tab?",name:"project_settings",component:ir,props:!0,meta:{stats:{params:["tab"]}}},{path:"/p/:projectId/:view?/:id?/:report?",name:"overview",component:_d,props:!0,meta:{stats:{params:["view","report"]}}},{path:"/welcome",name:"welcome",component:kd},{path:"/",name:"index",component:ze},{path:"*",redirect:{name:"index"}}],scrollBehavior(t){if(t.hash)try{return document.querySelector(t.hash),new Promise((e=>{setTimeout((()=>{e({selector:t.hash,behavior:"smooth"})}),300)}))}catch{}}}),Vd=new Y(Hd,c,Rd.base_path);Hd.afterEach((t=>{if(t.matched[0]){let e=t.matched[0].path;if(t.meta.stats&&t.meta.stats.params&&t.meta.stats.params.forEach((s=>{const a=t.params[s];e=e.replace(":"+s,a||"")})),e=e.replaceAll("?",""),t.params["id"]||(e=e.replace(":id","")),"traces"===t.params.view&&t.query.query)try{const s=JSON.parse(t.query.query),a=s.ts_from||s.ts_to||s.dur_from||s.dur_to;e+=`${s.view||""}:${s.diff?"diff":""}:${a?"selection":""}:${s.service_name?"service":""}:${s.span_name?"span":""}:${s.trace_id?"id":""}:${s.include_aux?"aux":""}`}catch{}if("applications"===t.params.view&&"Profiling"===t.params.report&&t.query.query)try{const s=JSON.parse(t.query.query);e+=`${s.type||""}:${s.mode||""}:${Number(s.from)||Number(s.to)?"ts":""}`}catch{}if("applications"===t.params.view&&"Tracing"===t.params.report&&t.query.trace){const[s,a,i,r]=t.query.trace.split(":");e+=`${s}:${a?"id":""}:${"-"!==i?"ts":""}:${r}`}if("applications"===t.params.view&&"Logs"===t.params.report&&t.query.query)try{const s=JSON.parse(t.query.query);e+=`${s.source||""}:${s.view||""}:${s.severity||""}:${s.hash?"hash":""}:${s.search?"search":""}`}catch{}Vd.stats("route-open",{path:e})}})),o.ZP.prototype.$events=f,o.ZP.prototype.$format=r,o.ZP.prototype.$pluralize=v(),o.ZP.prototype.$api=Vd,o.ZP.prototype.$utils=new y(Hd),o.ZP.prototype.$validators=a,o.ZP.prototype.$storage=i,o.ZP.prototype.$codexray=Rd,new o.ZP({router:Hd,vuetify:c,render:t=>t(ze)}).$mount("#app")},784:function(t){t.exports={functional:!0,render(t,e){const{_c:s,_v:a,data:i,children:r=[]}=e,{class:o,staticClass:n,style:l,staticStyle:c,attrs:d={},...u}=i;return s("svg",{class:[o,n],style:[l,c],attrs:Object.assign({width:"25",height:"24",xmlns:"http://www.w3.org/2000/svg"},d),...u},r.concat([s("path",{attrs:{d:"M11.108 10h2.012v5h-2.012v-5zm-.001 6h2.012v2h-2.012v-2z"}}),s("path",{attrs:{d:"M13.891 4.2a2.012 2.012 0 00-1.778-1.062A2.01 2.01 0 0010.334 4.2L2.953 18.064a1.977 1.977 0 00.054 1.968A1.99 1.99 0 004.73 21h14.766a2 2 0 001.724-.968 1.98 1.98 0 00.054-1.968L13.891 4.2zM4.731 19l7.382-13.863L19.5 19H4.73z"}})]))}}},4003:function(t){t.exports={functional:!0,render(t,e){const{_c:s,_v:a,data:i,children:r=[]}=e,{class:o,staticClass:n,style:l,staticStyle:c,attrs:d={},...u}=i;return s("svg",{class:[o,n],style:[l,c],attrs:Object.assign({width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg"},d),...u},r.concat([s("path",{attrs:{d:"M15 6.5a5 5 0 01-5 5m5-5a5 5 0 00-5-5m5 5H5m5 5a5 5 0 01-5-5m5 5c1.105 0 2-2.239 2-5s-.895-5-2-5m0 10c-1.105 0-2-2.239-2-5s.895-5 2-5m-5 5a5 5 0 015-5m2 15a2 2 0 11-4 0m4 0a2 2 0 10-4 0m4 0h6m-10 0H2"}})]))}}},1171:function(t){t.exports={functional:!0,render(t,e){const{_c:s,_v:a,data:i,children:r=[]}=e,{class:o,staticClass:n,style:l,staticStyle:c,attrs:d={},...u}=i;return s("svg",{class:[o,n],style:[l,c],attrs:Object.assign({width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg"},d),...u},r.concat([s("g",{attrs:{"clip-path":"url(#clip0_401_1057)"}},[s("path",{attrs:{d:"M3.375 10.125a2.25 2.25 0 104.5 0 2.25 2.25 0 00-4.5 0zm3.375 0a1.125 1.125 0 11-2.25 0 1.125 1.125 0 012.25 0zM8.438 13.5H2.811A2.812 2.812 0 000 16.313 1.687 1.687 0 001.688 18h7.875a1.687 1.687 0 001.687-1.688A2.812 2.812 0 008.437 13.5zm1.124 3.375H1.689a.563.563 0 01-.563-.563 1.687 1.687 0 011.688-1.687h5.624a1.687 1.687 0 011.688 1.688.562.562 0 01-.563.562zM18 .562v9a.563.563 0 01-.563.563H11.25v1.125h2.813a.562.562 0 110 1.125h-4.5a.563.563 0 010-1.125h.562v-1.125h-.563a.563.563 0 010-1.125h7.313V1.125H4.5v5.063a.563.563 0 11-1.125 0V.563A.562.562 0 013.938 0h13.5A.562.562 0 0118 .563zM7.312 6.75a.529.529 0 01-.393-.169.54.54 0 010-.787l2.25-2.25a.54.54 0 01.787 0l1.857 1.845 2.98-2.97a.558.558 0 01.788.787l-3.375 3.375a.54.54 0 01-.787 0L9.562 4.736 7.707 6.581a.529.529 0 01-.394.169z"}})]),s("defs",[s("clipPath",{attrs:{id:"clip0_401_1057"}},[s("path",{attrs:{fill:"#fff",d:"M0 0h18v18H0z"}})])])]))}}},6866:function(t){t.exports={functional:!0,render(t,e){const{_c:s,_v:a,data:i,children:r=[]}=e,{class:o,staticClass:n,style:l,staticStyle:c,attrs:d={},...u}=i;return s("svg",{class:[o,n],style:[l,c],attrs:Object.assign({width:"16",height:"14",xmlns:"http://www.w3.org/2000/svg"},d),...u},r.concat([s("path",{attrs:{d:"M1.333 6.722h3.334l1.7-5.555 3.665 11.666 1.293-6.111h3.342"}})]))}}},3660:function(t){t.exports={functional:!0,render(t,e){const{_c:s,_v:a,data:i,children:r=[]}=e,{class:o,staticClass:n,style:l,staticStyle:c,attrs:d={},...u}=i;return s("svg",{class:[o,n],style:[l,c],attrs:Object.assign({width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg"},d),...u},r.concat([s("path",{attrs:{d:"M10 10V6.25m0 6.53v.032m7.5-7.5v9.375a2.813 2.813 0 01-2.813 2.813H5.313A2.813 2.813 0 012.5 14.687V5.313A2.812 2.812 0 015.313 2.5h9.375A2.812 2.812 0 0117.5 5.312z"}})]))}}},8174:function(t){t.exports={functional:!0,render(t,e){const{_c:s,_v:a,data:i,children:r=[]}=e,{class:o,staticClass:n,style:l,staticStyle:c,attrs:d={},...u}=i;return s("svg",{class:[o,n],style:[l,c],attrs:Object.assign({width:"14",height:"18",xmlns:"http://www.w3.org/2000/svg"},d),...u},r.concat([s("path",{attrs:{d:"M4.555 15.475a.5.5 0 100-1v1zM.556 12.309h-.5.5zM1.056 1a.5.5 0 10-1 0h1zm3.5 4.597a.5.5 0 000-1v1zm8 1.625v-.5.5zm-4 0v.5-.5zM13.444 1h.5a.5.5 0 00-.5-.5V1zm0 5.333h.5-.5zm-5.778 0h-.5.5zm0-3.555l-.333-.374a.5.5 0 00-.167.374h.5zm2-1.778V.5a.5.5 0 00-.333.126L9.667 1zm2.889 16v-.5.5zm-4 0v.5-.5zm4.889-6.222h.5a.5.5 0 00-.5-.5v.5zm0 5.333h.5-.5zm-5.778 0h-.5.5zm0-3.555l-.333-.374a.5.5 0 00-.167.374h.5zm2-1.778v-.5a.5.5 0 00-.333.126l.333.374zm-5.112 3.697H3.223v1h1.332v-1zm-3.499-2.166V5.097h-1v7.212h1zm0-7.212V1h-1v4.097h1zm3.5-.5h-4v1h4v-1zm-1.333 9.878a2.167 2.167 0 01-2.167-2.166h-1a3.167 3.167 0 003.167 3.166v-1zm9.332-7.753h-4v1h4v-1zM12.946 1v5.333h1V1h-1zm-.39 6.722c.768 0 1.39-.622 1.39-1.389h-1a.389.389 0 01-.39.39v1zM7.168 6.333c0 .767.621 1.39 1.388 1.39v-1a.389.389 0 01-.388-.39h-1zm1 0V2.778h-1v3.555h1zm1.5-4.833h3.777v-1H9.668v1zM9.334.626l-2 1.778.665.747 2-1.777-.665-.748zM12.556 16.5h-4v1h4v-1zm.389-5.722v5.333h1v-5.333h-1zm-.39 6.722c.768 0 1.39-.622 1.39-1.389h-1a.389.389 0 01-.39.389v1zm-5.388-1.389c0 .767.621 1.389 1.388 1.389v-1a.389.389 0 01-.388-.389h-1zm1 0v-3.555h-1v3.555h1zm1.5-4.833h3.777v-1H9.668v1zm-.333-.874l-2 1.778.665.747 2-1.777-.665-.748z"}})]))}}},6292:function(t){t.exports={functional:!0,render(t,e){const{_c:s,_v:a,data:i,children:r=[]}=e,{class:o,staticClass:n,style:l,staticStyle:c,attrs:d={},...u}=i;return s("svg",{class:[o,n],style:[l,c],attrs:Object.assign({width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg"},d),...u},r.concat([s("path",{attrs:{d:"M10 18l6.928-4V6L10 2 3.072 6v8L10 18zm0 0v-7.5m0 0l-6.5-4m6.5 4l6.5-4"}})]))}}},7790:function(t){t.exports={functional:!0,render(t,e){const{_c:s,_v:a,data:i,children:r=[]}=e,{class:o,staticClass:n,style:l,staticStyle:c,attrs:d={},...u}=i;return s("svg",{class:[o,n],style:[l,c],attrs:Object.assign({width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg"},d),...u},r.concat([s("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.397 3.597c-.356-1.463-2.438-1.463-2.794 0a1.436 1.436 0 01-2.143.889c-1.286-.784-2.758.688-1.975 1.974.507.83.058 1.914-.887 2.144-1.464.355-1.464 2.438 0 2.792a1.436 1.436 0 01.887 2.144c-.783 1.286.689 2.758 1.975 1.975a1.436 1.436 0 012.144.887c.355 1.464 2.438 1.464 2.792 0a1.436 1.436 0 012.144-.887c1.286.783 2.758-.689 1.975-1.975a1.437 1.437 0 01.887-2.144c1.464-.355 1.464-2.437 0-2.792a1.436 1.436 0 01-.888-2.144c.784-1.286-.688-2.758-1.974-1.974a1.436 1.436 0 01-2.144-.888v-.001z"}}),s("path",{attrs:{d:"M11.667 10a1.667 1.667 0 11-3.334 0 1.667 1.667 0 013.334 0z"}})]))}}},7329:function(t){t.exports={functional:!0,render(t,e){const{_c:s,_v:a,data:i,children:r=[]}=e,{class:o,staticClass:n,style:l,staticStyle:c,attrs:d={},...u}=i;return s("svg",{class:[o,n],style:[l,c],attrs:Object.assign({width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg"},d),...u},r.concat([s("path",{attrs:{d:"M12.802 1.323l-.363.344.363-.344zM14 2.5l.334-.373L14 2.5zm1.225 1.213l-.36.347.36-.347zm.275.685H15h.5zM2.5 3H2h.5zM1 11a.5.5 0 000 1v-1zm16 1a.5.5 0 000-1v1zM2 7.5a.5.5 0 101 0H2zm13 0a.5.5 0 001 0h-1zM3 15a.5.5 0 00-1 0h1zm-1 2a.5.5 0 001 0H2zm8-2a.5.5 0 00-1 0h1zm-1 2a.5.5 0 001 0H9zm8-2a.5.5 0 10-1 0h1zm-1 2a.5.5 0 001 0h-1zm-9.5-2a.5.5 0 00-1 0h1zm-1 1a.5.5 0 001 0h-1zm8-1a.5.5 0 10-1 0h1zm-1 1a.5.5 0 001 0h-1zm-8-14.5h7v-1h-7v1zm7 0h.558v-1H11.5v1zm.94.167c.294.31.767.794 1.227 1.206l.667-.746c-.43-.384-.881-.845-1.17-1.149l-.725.69zm1.227 1.206c.333.297.868.844 1.198 1.187l.72-.694a28.984 28.984 0 00-1.251-1.239l-.667.746zM16 4.398c0-.383-.146-.754-.415-1.032l-.72.694c.086.089.135.21.135.338h1zM12.058 1.5c.14 0 .279.06.381.167l.725-.689A1.528 1.528 0 0012.058.5v1zM4.5.5A2.5 2.5 0 002 3h1a1.5 1.5 0 011.5-1.5v-1zM11 1v3h1V1h-1zm1.5 4.5h3v-1h-3v1zM11 4a1.5 1.5 0 001.5 1.5v-1A.5.5 0 0112 4h-1zM1 12h16v-1H1v1zm1-9v4.5h1V3H2zm13 1.398V5h1v-.602h-1zM15 5v2.5h1V5h-1zM2 15v2h1v-2H2zm7 0v2h1v-2H9zm7 0v2h1v-2h-1zM5.5 15v1h1v-1h-1zm7 0v1h1v-1h-1z"}})]))}}},7548:function(t){t.exports={functional:!0,render(t,e){const{_c:s,_v:a,data:i,children:r=[]}=e,{class:o,staticClass:n,style:l,staticStyle:c,attrs:d={},...u}=i;return s("svg",{class:[o,n],style:[l,c],attrs:Object.assign({width:"20",height:"18",xmlns:"http://www.w3.org/2000/svg"},d),...u},r.concat([s("path",{attrs:{d:"M1.244 16.5c1.325-2.21 4.23-3.724 8.762-3.724s7.437 1.513 8.762 3.724M13.606 5.1a3.6 3.6 0 11-7.2 0 3.6 3.6 0 017.2 0z"}})]))}}},8091:function(t,e,s){var a={"./alert.svg":784,"./deployments.svg":4003,"./eum.svg":1171,"./health.svg":6866,"./incidents.svg":3660,"./map.svg":8174,"./nodes.svg":6292,"./settings.svg":7790,"./traces.svg":7329,"./user-profile.svg":7548};function i(t){var e=r(t);return s(e)}function r(t){if(!s.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}i.keys=function(){return Object.keys(a)},i.resolve=r,t.exports=i,i.id=8091}},e={};function s(a){var i=e[a];if(void 0!==i)return i.exports;var r=e[a]={exports:{}};return t[a].call(r.exports,r,r.exports,s),r.exports}s.m=t,function(){var t=[];s.O=function(e,a,i,r){if(!a){var o=1/0;for(d=0;d<t.length;d++){a=t[d][0],i=t[d][1],r=t[d][2];for(var n=!0,l=0;l<a.length;l++)(!1&r||o>=r)&&Object.keys(s.O).every((function(t){return s.O[t](a[l])}))?a.splice(l--,1):(n=!1,r<o&&(o=r));if(n){t.splice(d--,1);var c=i();void 0!==c&&(e=c)}}return e}r=r||0;for(var d=t.length;d>0&&t[d-1][2]>r;d--)t[d]=t[d-1];t[d]=[a,i,r]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var i,r,o=a[0],n=a[1],l=a[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(i in n)s.o(n,i)&&(s.m[i]=n[i]);if(l)var d=l(s)}for(e&&e(a);c<o.length;c++)r=o[c],s.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return s.O(d)},a=self["webpackChunk_codexray_codexray"]=self["webpackChunk_codexray_codexray"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(2383)}));a=s.O(a)})();
//# sourceMappingURL=app.9db96a3b.js.map